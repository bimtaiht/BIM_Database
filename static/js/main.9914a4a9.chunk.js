(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{154:function(t,e){},155:function(t,e,n){},161:function(t,e,n){},162:function(t,e,n){},163:function(t,e,n){},194:function(t,e,n){},195:function(t,e,n){},197:function(t,e,n){},246:function(t,e,n){},253:function(t,e,n){},291:function(t,e,n){},292:function(t,e,n){},297:function(t,e){},298:function(t,e){},310:function(t,e,n){},311:function(t,e,n){},312:function(t,e,n){},314:function(t,e,n){},315:function(t,e,n){},316:function(t,e,n){},317:function(t,e,n){},323:function(t,e,n){},324:function(t,e,n){},325:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n(0),r=n.n(s),a=n(28),c=n.n(a),o=(n(194),n(2)),u=n(3),l=n(9),h=n(8),d=(n(195),n(196),n(13)),f=(n(197),n(333)),p=n(330),m=n(183),v=n(334),g=n(4),I="text",b="password",_=function(){function t(){Object(o.a)(this,t),this.content=void 0,this.placeholder="n\u1ed9i dung input",this.State=I,Object(g.k)(this,{content:g.l,placeholder:g.l,State:g.l})}return Object(u.a)(t,[{key:"Content",get:function(){return this.content},set:function(t){this.content=t,this.onSetContent&&this.onSetContent(t)}},{key:"Placeholder",set:function(t){this.placeholder=t}},{key:"Style",get:function(){return this.style||(this.style=this.inputStyle?this.inputStyle:{},this.wrapper&&(this.style.position="relative")),this.style}}]),t}(),y=function(t,e){var n=new _;return n.content=t,n.placeholder=e,n},j=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onChange=function(t){var e=t.target.value;i.state.Content=e};var s=i.props.store;if(s)i.state=s;else{i.state=y("N\u1ed9i dung input")}return i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.content,n=t.placeholder;return Object(i.jsxs)(i.Fragment,{children:[t.State===I?Object(i.jsx)(v.a,{value:e,onChange:this.onChange,placeholder:n}):"",t.State===b?Object(i.jsx)(v.a.Password,{value:e,onChange:this.onChange}):""]})}}]),n}(s.Component),S=Object(d.a)(j),O=n(35),M=n(58),k=n.n(M),V=n(85),C=n(166),D=n.n(C),T=n(337),w=function(t){return D.a.create({baseURL:"https://api.bimdev.vn/api",Accept:"application/json","Content-Type":"application/json",timeout:t})},F=function(t){return{success:t.status>=200&&t.status<300,data:t.data,message:t.statusText}},x=function(){var t=Object(V.a)(k.a.mark((function t(e){var n;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return n=t.sent,t.abrupt("return",F(n));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(i=t.t0,T.b.error("Error sending request: ".concat(i)),{success:!1}));case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}var i}),t,null,[[0,7,10,12]])})));return function(e){return t.apply(this,arguments)}}(),G=2e4,L=function(){var t=Object(V.a)(k.a.mark((function t(e,n,i){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=i||G,t.abrupt("return",x(w(i).get(e,n)));case 2:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),N=function(){var t=Object(V.a)(k.a.mark((function t(e,n,i,s){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=s||G,t.next=3,x(w(s).put(e,n,i));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,s){return t.apply(this,arguments)}}(),R=function(){var t=Object(V.a)(k.a.mark((function t(e,n,i,s){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=s||G,t.next=3,x(w(s).post(e,n,i));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,s){return t.apply(this,arguments)}}(),P="concrete",E="formwork",A="rebar",H="Project",W="Phase",U="Workpackage",B="Value",K="Unit",z="elementName",q="MassType",J="workItem",Y="level",Q="diameter",Z="block",X="zone",$="typename",tt="materialName",et="systemtype",nt="systemclassification",it="familyName",st="size",rt="roomName",at="roomNumber",ct="guid",ot="elementId",ut=function(){return[q,J,Y,Z,X,it,$,z,tt,rt,at,et,nt,st,ct,ot]},lt=function(t,e){switch(e){case H:case B:case K:case q:case W:return{fields:[e],isFromElement:!1};case J:case z:case"rebarType":case"partition":case Y:case Q:case Z:case X:case $:case tt:case rt:case at:case et:case nt:case it:case st:case ct:case ot:var n=t.MassType;if([tt].includes(e)||n===A)return{fields:["Info",e],isFromElement:!1};var i=void 0;switch(e){case ct:case ot:return{fields:["Element",e],isFromElement:!0};case J:case z:case $:case et:case nt:case it:i="identify";break;case Y:case Z:case X:case rt:case at:i="locate";break;case st:i="geometry"}return{fields:["Element","info",i,e],isFromElement:!0}}},ht=function(t,e){var n=void 0;switch(e){case H:case W:n=t.Name;break;case U:n=t.FullName;break;default:n=t}return n||"undefined"},dt=function(){return[J,q,Z]},ft=(new Intl.DateTimeFormat("en-GB"),function(){return Math.random().toString(36).substr(2,9)}),pt=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},mt=function(t,e){t.M2VM=!0,e(),t.M2VM=!1},vt=function(t,e,n){if(-1!==e&&-1!==n&&e!==n){var i=t[e];t[e]=t[n],t[n]=i}},gt=function(t,e){var n=!0,i=!0;return t.length===e.length&&(t.forEach((function(t,s){n&&!e.includes(t)&&(n=!1,i=!1)})),i)},It=function(t,e){var n=t.findIndex((function(t){return t.Key===e}));if(0!==n)return t.splice(n,1)},bt=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=pt(),s=function(){e(),n&&It(t,i)};t.push({Key:i,Value:s})},_t=function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.push({Key:pt(),Value:e,IsDelete:n})},yt=function(t,e){t.forEach((function(t){return t.Value()})),e(t=t.filter((function(t){return!t.IsDelete})))},jt=function(t,e){return"".concat(function(t){for(var e="A".charCodeAt(0),n="Z".charCodeAt(0)-e+1,i="";t>=0;)i=String.fromCharCode(t%n+e)+i,t=Math.floor(t/n)-1;return i}(e)).concat(t+1)},St=function(t,e,n,i){return"".concat(jt(t,e),":").concat(jt(n,i))},Ot=function(){function t(){Object(o.a)(this,t),this.Cells=[]}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=ft()),this._id}},{key:"Index",get:function(){return this.Dict.Columns.indexOf(this)}}]),t}(),Mt=n(167),kt=n.n(Mt),Vt=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).handleChange=function(t){i.state.Content=t.target.value},i.OnPaste=function(t){t.preventDefault();var e,n=((e=t).originalEvent||e).clipboardData.getData("text/plain");i.state.Content=n},i.OnKeyDown=function(t){i.state;(t.ctrlKey&&66==t.which||t.ctrlKey&&73==t.which||13==t.keyCode)&&t.preventDefault()},i.contentEditable=r.a.createRef();var s=i.props.store;if(s)i.state=s;else{i.state=y("N\u1ed9i dung input")}return i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Content,n=this.props.style?this.props.style:{};return n.minWidth||(n.minWidth=150,n.fontFamily="password"),Object(i.jsxs)(i.Fragment,{children:[t.State===I?Object(i.jsx)(kt.a,{className:"ant-input",innerRef:this.contentEditable,placeholder:t.Placeholder,style:n,html:e||"",onChange:this.handleChange,onKeyDown:this.OnKeyDown,onPaste:this.OnPaste}):"",t.State===b?Object(i.jsx)(v.a.Password,{value:e,onChange:this.handleChange,style:n}):""]})}}]),n}(s.Component),Ct=Object(d.a)(Vt),Dt="default",Tt="edit",wt=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Render",get:function(){return this.render||(this.render=Ft(this)),this.render},set:function(t){this.render=t}}]),t}(),Ft=function(t){switch(t.State){case Dt:return function(t,e){return Object(i.jsxs)(i.Fragment,{children:[t,e.Is_Tool_Visible&&e.Is_Edit_Visible?Object(i.jsx)(m.a,{type:"primary",size:"small",className:"left10 btn-warning",onClick:e.Edit,children:"e"}):""]})};case Tt:return function(t,e){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("span",{className:"input__wrapper",children:[Object(i.jsx)(Ct,{store:e}),e.Is_Tool_Visible&&e.Is_OK_Visible?Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:e.EditOK,children:"ok"}):""]})})};default:return}},xt=function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.GetRender=function(t){var n=e.Items,i=n.findIndex((function(e){return e.State===t}));if(-1===i){var s=function(t,e){var n=new wt;return n.State=t,n.Render=e,n}(t);return n.push(s),s}return n[i]}},Gt=function(){function t(){var e=this;Object(o.a)(this,t),this.content=void 0,this.placeholder="n\u1ed9i dung input",this.State=I,this.IsEditing=!1,this.OnSet_RenderState_Func_Dict=[],this.renderState=Dt,this.CanChange_RenderState=!0,this.Is_Tool_Visible=!0,this.Is_Edit_Visible=!0,this.Is_OK_Visible=!0,this.Edit=function(){e.RenderState=Tt},this.EditOK=function(){e.RenderState=Dt},this.Render=function(){return e.Render_Dict.GetRender(e.RenderState).Render(e.Content,e)},Object(g.k)(this,{content:g.l,placeholder:g.l,State:g.l,IsEditing:g.l,renderState:g.l,Is_Tool_Visible:g.l,Is_Edit_Visible:g.l,Is_OK_Visible:g.l,CanChange_RenderState:g.l})}return Object(u.a)(t,[{key:"Content",get:function(){return this.content},set:function(t){this.content=t,this.onSetContent&&this.onSetContent(t)}},{key:"Placeholder",set:function(t){this.placeholder=t}},{key:"Style",get:function(){return this.style||(this.style=this.inputStyle?this.inputStyle:{},this.wrapper&&(this.style.position="relative")),this.style}},{key:"TitleFunc",get:function(){var t=this;return this.titleFunc||(this.titleFunc=function(){return t.Content}),this.titleFunc},set:function(t){this.titleFunc=t}},{key:"Render_Dict",get:function(){return this.render_Dict||(this.render_Dict=new xt),this.render_Dict},set:function(t){this.render_Dict=t}},{key:"RenderState",get:function(){return this.renderState},set:function(t){this.CanChange_RenderState&&(this.renderState=t,this.OnSet_RenderState_Func_Dict.forEach((function(t){return t.Value()})))}}]),t}(),Lt=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,i=new Gt;return i.Content=t,i.CanChange_RenderState=e,void 0===n&&(n=e),i.Is_Tool_Visible=n,i},Nt=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=["Floors","Structural Framing","Walls","Structural Columns"]),this.categoryNames}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),Rt="category",Pt="family",Et="parameter",At="bystring",Ht="bynumber",Wt="byequal",Ut="bycontain",Bt="bynotcontain",Kt="byequal",zt="bysmaller",qt="bybigger",Jt="bybetween",Yt=function(t,e){var n=new Xt;return n.ValueType=t.valueType,n.NumberFilterType=t.numberFilterType,n.StringFilterType=t.stringFilterType,n.Values=t.values,n.CategoryType=e,n},Qt=function(t){var e=[];switch(t.CategoryType){case Rt:e=Nt.Instance.CategoryNames;break;case Et:e=ou.Instance.ParameterNames}return e},Zt=function(t,e){if(void 0===e||null===e)return!1;var n=!1,i=t.Values;switch(t.ValueType){case At:if("string"===typeof e)switch(t.StringFilterType){case Wt:i.forEach((function(t){n||t!==e||(n=!0)}));break;case Ut:var s=e.toLowerCase();i.forEach((function(t){!n&&s.includes(t.toLowerCase())&&(n=!0)}));break;case Bt:s=e.toLowerCase();n=!0,i.forEach((function(t){n&&s.includes(t.toLowerCase())&&(n=!1)}))}break;case Ht:if(!isNaN(e))switch(t.NumberFilterType){case Kt:return e===i[0];case zt:return e<i[0];case"bysmallerorequal":return e<=i[0];case qt:return e>i[0];case"bybiggerorequal":return e>=i[0];case Jt:var r=i[0],a=i[1];return t.IsEqualLeft&&r===e||r<e&&e<a||t.IsEqualRight&&e===a}}return n},Xt=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Values",get:function(){return this.values},set:function(t){this.values=t}},{key:"ValueStorageList",get:function(){return this.valueStorageList||(this.valueStorageList=Qt(this)),this.valueStorageList}},{key:"ApiData",get:function(){return{valueType:(t=this).ValueType,numberFilterType:t.NumberFilterType,stringFilterType:t.StringFilterType,values:t.Values};var t}}]),t}(),$t="byuser",te="byauto",ee=function(t,e){var n=new ne;return n.MassGroupItem=t,e?(n.CreateType=$t,n.Value=pt(),n.Title="T\xean \u0111\u1ea7u m\u1ee5c"):n.CreateType=te,n},ne=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.MassGroupItem.Items.splice(e.Index,1)}}return Object(u.a)(t,[{key:"SupItem",get:function(){return this.supItem||(this.supItem=function(t){if(!t.IsGet_SupItem){t.IsGet_SupItem=!0;var e=t.SupValue;if(e){var n=t.MassGroupItem.Items,i=n.findIndex((function(t){return t.Value===e}));return-1!==i?n[i]:void 0}}}(this)),this.supItem}},{key:"Index",get:function(){return this.MassGroupItem.Items.indexOf(this)}},{key:"Title",get:function(){return this.title||(this.title=this.Value),this.title},set:function(t){this.title=t}},{key:"NewMGI",get:function(){return this.newMGI||(this.newMGI=function(t){var e=t.newMGI_id;if(e){var n=t.MassGroupItem.SupComponent.AllItems,i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}(this),!this.newMGI&&this.newMGI_id&&(this.newMGI_id=void 0)),this.newMGI},set:function(t){this.newMGI=t,t&&t!==this.MassGroupItem?this.newMGI_id=t.id:this.newMGI_id=void 0}},{key:"ApiData",get:function(){return{value:this.Value,supValue:this.SupValue,title:this.Title,newMGI_id:this.newMGI_id,createType:this.CreateType}}}]),t}(),ie=function(){function t(){var e=this;Object(o.a)(this,t),this.IsGetElement=!1,this.OnGetElementDone_Funcs=[],this.GetValue=function(t,n){if(t){var i;if(t===Y){var s=e.LevelItem;return!s.IsGet_Value&&n&&(i=!0,_t(s.OnSet_Value_Func_Dict,(function(){n(s.Value)}))),{Value:s.Value,IsHandle:i}}return{Value:e.GetValue_Mas(t),IsHandle:i}}},this.GetValue_Mas=function(t){if(t){var n=lt(e,t),i=n.fields;return!n.isFromElement||e.Element?function(){var n=e,s=!0;if(i.forEach((function(t){if(s){var e=n[t];void 0===(n=e)&&(s=!1)}})),t===B){var r=2;"each"===e.Unit&&(r=0),n=n.toLocaleString("en-US",{maximumFractionDigits:r})}return n}():void 0}},this.AddDatabase=function(t){var n=e.ApiData,i=n._id,s="https://api.bimdev.vn/api/hbm",r=i?"edit":"add";(i?N("".concat(s,"/").concat(r),n):R("".concat(s,"/").concat(r),n)).then((function(t){return t.data})).then((function(n){"add"===r&&(e._id=n._id),t&&t(n),T.b.success("".concat(r," mass successfully"))}))},this.DeleteDatabase=function(t){var n={_id:e._id};N("".concat("https://api.bimdev.vn/api/hbm","/delete"),n).then((function(t){return t.data})).then((function(e){t&&t(e),T.b.success("delete mass successfully")}))},this.IsGet_TLS_LevelGroup=!1,this.OnGet_TLS_LevelGroup_Func_Dict=[],this.OnGet_FullValue_Func_Dict=[],this.GetPhaseItem=function(t){var n=e.PhaseItems,i=n.findIndex((function(e){return e.Phase.Name===t}));return n[i]}}return Object(u.a)(t,[{key:"Project",get:function(){return this.project||(this.project=bi(this)),this.project},set:function(t){this.project=t}},{key:"Workpackage",get:function(){return this.workpackage||(this.workpackage=yi(this)),this.workpackage}},{key:"Phases",get:function(){return this.phases||(this.phases=ji(this)),this.phases},set:function(t){this.phases=t}},{key:"ValidPhasesByInput",get:function(){return Si(this)}},{key:"GetElementDone",set:function(t){this.OnGetElementDone_Funcs.forEach((function(t){return t()}))}},{key:"ApiData",get:function(){return{_id:this._id,projectId:this.projectId,elementId:this.elementId,workpackageId:this.workpackageId,exportSetId:this.exportSetId,exportSetVersionId:this.exportSetVersionId,value:this.Value,unit:this.Unit,massType:this.MassType,info:this.Info}}},{key:"Get_TLS_LevelGroup",get:function(){return this.get_TLS_LevelGroup},set:function(t){this.OnGet_TLS_LevelGroup_Func_Dict.forEach((function(t){return t.Value()})),this.get_TLS_LevelGroup=t}},{key:"TLS_LevelGroup",get:function(){return this.tls_LevelGroup||Oi(this),this.tls_LevelGroup},set:function(t){this.tls_LevelGroup=t,this.Get_TLS_LevelGroup=!0}},{key:"Get_FullValue",set:function(t){var e=this;yt(this.OnGet_FullValue_Func_Dict,(function(t){return e.OnGet_FullValue_Func_Dict=t})),this.get_FullValue=t}},{key:"FullValue",get:function(){return this.fullValue||Ci(this),this.fullValue},set:function(t){this.fullValue=t,this.Get_FullValue=!0}},{key:"PhaseItems",get:function(){return this.phaseItems||(this.phaseItems=Di(this)),this.phaseItems}},{key:"Lastest_PhaseItem",get:function(){return this.lastest_PhaseItem||(this.lastest_PhaseItem=Ti(this)),this.lastest_PhaseItem}},{key:"LevelItem",get:function(){return this.levelItem||(this.levelItem=wi(this)),this.levelItem}},{key:"OriginLevelItem",get:function(){return this.originLevelItem||(this.originLevelItem=Fi(this)),this.originLevelItem}}]),t}(),se=function(){function t(){Object(o.a)(this,t),this.IsGet_TLS_LevelGroup=!1,this.OnGet_TLS_LevelGroup_Func_Dict=[],this.OnGet_FullValue_Func_Dict=[]}return Object(u.a)(t,[{key:"Project",get:function(){return this.Phase.Project}},{key:"MassItem",get:function(){return this.Dict}},{key:"Get_TLS_LevelGroup",get:function(){return this.get_TLS_LevelGroup},set:function(t){this.OnGet_TLS_LevelGroup_Func_Dict.forEach((function(t){return t.Value()})),this.get_TLS_LevelGroup=t}},{key:"TLS_LevelGroup",get:function(){return this.tls_LevelGroup||le(this),this.tls_LevelGroup},set:function(t){this.tls_LevelGroup=t,this.Get_TLS_LevelGroup=!0}},{key:"Get_FullValue",set:function(t){this.OnGet_FullValue_Func_Dict.forEach((function(t){return t.Value()}))}},{key:"FullValue",get:function(){return this.fullValue||pe(this),this.fullValue},set:function(t){this.fullValue=t,this.Get_FullValue=!0}},{key:"LevelItem",get:function(){return this.levelItem||(this.levelItem=me(this)),this.levelItem}}]),t}(),re=function(){function t(){Object(o.a)(this,t),this.OnSet_Replace_Value_Func_Dict=[],this.OnSet_Value_Func_Dict=[]}return Object(u.a)(t,[{key:"Origin_Value",get:function(){return this.originValue||(this.originValue=ce(this)),this.originValue}},{key:"Replace_Value",get:function(){return this.replace_Value||oe(this),this.replace_Value},set:function(t){var e=this;this.replace_Value=t,yt(this.OnSet_Replace_Value_Func_Dict,(function(t){return e.OnSet_Replace_Value_Func_Dict=t}))}},{key:"Project",get:function(){return this.MassItem.Project}},{key:"Phase",get:function(){var t;return null===(t=this.MassPhase_Item)||void 0===t?void 0:t.Phase}},{key:"Value",get:function(){return this.value||ue(this),this.value},set:function(t){var e=this;this.value=t,yt(this.OnSet_Value_Func_Dict,(function(t){return e.OnSet_Value_Func_Dict=t}))}}]),t}(),ae=function(t,e){var n=new re;return n.MassItem=t,n.MassPhase_Item=e,n},ce=function(t){return t.MassItem.GetValue_Mas(Y)},oe=function(t){if(!t.IsGet_Replace_Value){t.IsGet_Replace_Value=!0;var e=t.Phase?t.Phase:t.Project,n=t.Origin_Value,i=function(e){var i,s=e.Data.Binding.Items,r=!1;s.forEach((function(t){!r&&t.Values.includes(n)&&(r=!0,i=t.Name)})),t.Replace_Value=i||n};e.TypicalLevelSetting?i(e.TypicalLevelSetting):_t(e.OnGetTypicalLevelSetting_Func_Dict,(function(){return i(e.TypicalLevelSetting)}),!1)}},ue=function(t){if(!t.IsGet_Value){t.IsGet_Value=!0;var e=function(e){t.Value=e};t.Replace_Value?e(t.Replace_Value):(t.value=t.Origin_Value,_t(t.OnSet_Replace_Value_Func_Dict,(function(){return e(t.Replace_Value)}),!1))}},le=function(t){if(!t.IsGet_TLS_LevelGroup){t.IsGet_TLS_LevelGroup=!0;var e=t.Phase,n=function(e){var n=e.Data.Typical,i=he(t,n);return fe(t,i)},i=e.TypicalLevelSetting;i?t.TLS_LevelGroup=n(i):_t(e.OnGetTypicalLevelSetting_Func_Dict,(function(){return t.TLS_LevelGroup=n(e.TypicalLevelSetting)}))}},he=function(t,e){if(e){var n=void 0;return e.PageItems.forEach((function(e){!n&&de(t,e)&&(n=e)})),n}},de=function(t,e){var n=e.Filters,i=!0;return n.forEach((function(e){if(i){var n=e.Field,s=t.MassItem.GetValue_Mas(n);i=e.Values.includes(s)}})),i},fe=function(t,e){if(e){var n=void 0;return e.LevelGroups.forEach((function(e){var i=e.Primary_Values,s=t.MassItem.GetValue_Mas(Y);!n&&i.includes(s)&&(n=e)})),n}},pe=function(t){if(!t.IsGet_FullValue){t.IsGet_FullValue=!0;var e=function(e){var n=e?e.Count:1;return t.MassItem.Value*n};t.TLS_LevelGroup||t.Get_TLS_LevelGroup?t.FullValue=e(t.TLS_LevelGroup):bt(t.OnGet_TLS_LevelGroup_Func_Dict,(function(){t.FullValue=e(t.TLS_LevelGroup)}))}},me=function(t){return ae(t.Dict,t)},ve="default",ge="edit",Ie=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Render",get:function(){return this.render||(this.render=Oe(this)),this.render},set:function(t){this.render=t}}]),t}(),be=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).getWrapperContent=function(){var t=i.state.wrapper;return t||""};var s=i.props.store;return i.state=s||{content:"N\u1ed9i dung"},i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state.content;return Object(i.jsxs)(i.Fragment,{children:[t,this.getWrapperContent()]})}}]),n}(s.Component),_e=Object(d.a)(be),ye=function(){function t(){var e=this;Object(o.a)(this,t),this.renderState=void 0,this.Render=function(){var t=e.DataIndex,n=e.Item,i=je(e);return e.Table.Override_Get_CellRender?e.Table.Override_Get_CellRender(i,n,t,e,e.Row,e.Column):e.Render_Dict.GetRender(e.RenderState).Render(i,n,t,e,e.Row,e.Column)},Object(g.k)(this,{renderState:g.l})}return Object(u.a)(t,[{key:"Key",get:function(){return"".concat(this.Column.Key,"_").concat(this.Row.Key)}},{key:"Item",get:function(){return this.Row.Item}},{key:"ColumnIndex",get:function(){return this.Row.Cells.indexOf(this)}},{key:"RowIndex",get:function(){return this.Row.Index}},{key:"RenderState",get:function(){return this.renderState||(this.renderState=this.Column.RenderState),this.renderState},set:function(t){this.renderState=t}},{key:"ValueVM",get:function(){if(!this.valueVM){var t=je(this);this.valueVM=y(t)}return this.valueVM}},{key:"Render_Dict",get:function(){return this.render_Dict||(this.render_Dict=this.Column.Render_Dict),this.render_Dict}},{key:"DataIndex",get:function(){return this.Column.DataIndex}}]),t}(),je=function(t){var e=t.DataIndex,n=t.Item;if(t.Table.Override_Get_CellValue)return t.Table.Override_Get_CellValue(n,t,t.Row,t.Column);var i=void 0;return e&&(i=n,e.forEach((function(t){i=i[t]}))),i},Se=function(t,e){var n=new Ie;return n.State=t,n.Render=e,n},Oe=function(t){switch(t.State){case ve:return function(t,e,n,i,s,r){return i.ValueVM.Content};case ge:return function(t,e,n,s,r,a){if(!n)return t;var c=s.ValueVM,o=n.length,u=e;return n.filter((function(t,e){return e<o-1})).forEach((function(t){return u=u[t]})),c.onSetContent=function(t){u[n[o-1]]=t},Object(i.jsx)(S,{store:c})};default:return}},Me=function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.GetRender=function(t){var n=e.Items,i=n.findIndex((function(e){return e.State===t}));if(-1===i){var s=Se(t);return n.push(s),s}return n[i]}},ke=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Render",get:function(){return this.render||(this.render=Ve(this)),this.render},set:function(t){this.render=t}}]),t}(),Ve=function(t){switch(t.State){case ve:return function(t,e,n){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"column__title__wrapper",children:[t,n.CanHandleColumn&&e.IsShow_MoveCommand?Object(i.jsxs)("div",{className:"column__title__tool",children:[n.CanEditColumn?Object(i.jsx)(m.a,{type:"primary",size:"small",style:{backgroundColor:"#faad14",border:"none"},onClick:e.Edit,children:"e"}):"",n.CanDeleteColumn?Object(i.jsx)(m.a,{type:"primary",danger:!0,size:"small",onClick:e.Delete,children:"x"}):""]}):""]})})};case ge:return function(t,e,n){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"column__title__wrapper",children:[e.InputElement,Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:e.OK,children:"ok"})]})})};default:return}},Ce=function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.GetRender=function(t){var n=e.Items,i=n.findIndex((function(e){return e.State===t}));if(-1===i){var s=function(t,e){var n=new ke;return n.State=t,n.Render=e,n}(t);return n.push(s),s}return n[i]}},De="select",Te="input",we=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.initialItem=void 0,this.GetInitialIndex=function(){var t=e.Items.indexOf(e.InitialItem);return-1!==t?t:null},this.selectedIndex=void 0,this.GetSelectedItem=function(){var t=e.SelectedIndex;if(-1!==t)return e.Items[t]},this.CanClear=!1,this.Clear=function(){e.SelectedIndex=null},this.open=!1,this.canOpen=!0,this.isDisabled=!1,Object(g.k)(this,{items:g.l,selectedIndex:g.l,CanClear:g.l,open:g.l,canOpen:g.l,isDisabled:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=[]),this.items},set:function(t){this.items=t}},{key:"InitialItem",get:function(){return this.initialItem},set:function(t){this.initialItem=t,this.InitialIndex=this.GetInitialIndex(),this.SelectedIndex=this.InitialIndex}},{key:"InitialIndex",get:function(){return this.initialIndex||(this.initialIndex=this.GetInitialIndex()),this.initialIndex},set:function(t){this.initialIndex=t}},{key:"SelectedIndex",get:function(){return this.selectedIndex},set:function(t){this.selectedIndex=t,this.SelectedItem=this.GetSelectedItem()}},{key:"SelectedItem",get:function(){return this.selectedItem||(this.selectedItem=this.GetSelectedItem()),this.selectedItem},set:function(t){this.selectedItem=t,this.OnSelectedItemChanged&&this.OnSelectedItemChanged(t)}},{key:"Placeholder",get:function(){return this.placeholder||(this.placeholder="ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng ..."),this.placeholder},set:function(t){this.placeholder=t}},{key:"DivStyle",get:function(){return this.CanClear?{position:"relative",padding:"0 22px 0 0"}:{}}},{key:"TitleRender",get:function(){return this.titleRender||(this.titleRender=xe(this)),this.titleRender},set:function(t){this.titleRender=t}},{key:"Open",get:function(){return this.open},set:function(t){this.open=t,this.OnSetOpen&&this.OnSetOpen(t)}},{key:"CanOpen",get:function(){return this.canOpen},set:function(t){this.canOpen=t}},{key:"IsDisabled",get:function(){return this.isDisabled},set:function(t){this.isDisabled=t}}]),t}(),Fe=function(t,e){var n=new we;return n.Items=t,n.InitialItem=e,n},xe=function(t){return function(t){return t.DisplayContent?t.DisplayContent:"".concat(t)}},Ge=function t(){var e=this;Object(o.a)(this,t),this.getClassName=function(){return e.className||(e.className="float ".concat(e.location)),e.className}},Le=function(t){var e=new Ge;return e.location=t,e},Ne=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).getWrapperContent=function(){var t=i.state.wrapper;return t||""};var s=i.props.store;return i.state=s||Le("top right"),i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("span",{className:t.getClassName(),children:this.getWrapperContent()})})}}]),n}(s.Component),Re=Object(d.a)(Ne),Pe=(n(246),f.a.Option),Ee=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndex=t},i.onDropdownVisibleChange=function(t){i.state.Open=t};var s=i.props.store;return i.state=s||new we,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=this.props.className?this.props.className:"",n=this.props.style?this.props.style:{width:"100%"},s=t.Placeholder,r=t.Items,a=t.SelectedIndex,c=t.InitialIndex;-1===a&&(a=c,t.InitialIndex=-1);var o=r?r.map((function(e,n){var s=t.TitleRender(e),r=void 0;return r=void 0===e?ft():"string"!==typeof e&&isNaN(e)?e._id?e._id:e.id:e,Object(i.jsx)(Pe,{value:n,children:s},r)})):"",u="";if(t.CanClear){var l=Le("right");l.wrapper=Object(i.jsx)(m.a,{size:"small",type:"primary",onClick:t.Clear,children:"x"}),u=Object(i.jsx)(Re,{store:l})}return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"select__wrapper ".concat(e),style:t.DivStyle,children:[u,Object(i.jsx)(f.a,{style:n,showSearch:!0,placeholder:s,optionFilterProp:"children",onChange:this.onValueChange,value:a,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},open:t.CanOpen&&t.Open,onDropdownVisibleChange:this.onDropdownVisibleChange,disabled:t.IsDisabled,children:o})]})})}}]),n}(s.Component),Ae=Object(d.a)(Ee),He=function(){function t(){var e=this;Object(o.a)(this,t),this.TitleRenderState=ve,this.RenderState=ve,this.title=void 0,this.OnSetTitleOK_Funcs=[],this.Edit=function(){var t=e.Table;t.CanHandleColumn&&t.CanEditColumn&&(e.TitleRenderState=ge)},this.OK=function(){e.TitleRenderState=ve,e.OnSetTitleOK_Funcs.forEach((function(t){return t(e)}))},this.Delete=function(){var t=e.Table;t.CanHandleColumn&&t.CanDeleteColumn&&(t.Columns.splice(e.Index,1),t.Update())},this.TitleRender=function(){var t=e.Title,n=e.Table;return e.TitleRender_Dict.GetRender(e.TitleRenderState).Render(t,e,n)},this.inputType=void 0,this.IsShow_MoveCommand=!1,this.Show_MoveCommand=function(){e.IsShow_MoveCommand=!0},this.Collapse_MoveCommand=function(){e.IsShow_MoveCommand=!1},this.MoveLeft=function(){var t=e.Index;if(0!==t){var n=e.CurrentList;1!==n.filter((function(t){return!t.IsActive})).length&&(vt(n,t,t-1),e.Table.Update())}},this.MoveRight=function(){var t=e.Index,n=e.CurrentList,i=n.filter((function(t){return!t.IsActive}));1!==i.length&&t!==i.length&&(vt(n,t,t+1),e.Table.Update())},Object(g.k)(this,{title:g.l,TitleRenderState:g.l,inputType:g.l,IsShow_MoveCommand:g.l})}return Object(u.a)(t,[{key:"Index",get:function(){return this.CurrentList.indexOf(this)}},{key:"CurrentList",get:function(){return this.Table.Columns},set:function(t){this.Table.Columns=t}},{key:"Title",get:function(){return this.title||(this.title=Ke(this)),this.title},set:function(t){this.title=t}},{key:"TitleRender_Dict",get:function(){return this.titleRender_Dict||(this.titleRender_Dict=new Ce),this.titleRender_Dict}},{key:"Render_Dict",get:function(){return this.render_Dict||(this.render_Dict=new Me),this.render_Dict},set:function(t){this.render_Dict=t}},{key:"InputType",get:function(){return this.inputType||(this.inputType=this.Table.Column_InputType),this.inputType}},{key:"AllNames",get:function(){return this.Table.AllColumnNames}},{key:"InputVM",get:function(){var t=this;if(!this.inputVM){var e=this.inputVM=y(this.Title);e.onSetContent=function(e){return t.Title=e}}return e}},{key:"SelectVM",get:function(){var t=this;this.selectVM||((this.selectVM=Fe(this.AllNames,this.Title)).OnSelectedItemChanged=function(e){return t.Title=e});return this.selectVM}},{key:"InputElement",get:function(){switch(this.InputType){case Te:return Object(i.jsx)(S,{store:this.InputVM});case De:var t=this.Table.Column_Title_SelectWidth;return Object(i.jsx)("div",{style:{width:t},children:Object(i.jsx)(Ae,{store:this.SelectVM})})}}},{key:"CanShow_MoveCommand",get:function(){return this.Table.CanShow_MoveCommand}}]),t}(),We=function(t,e,n,i){var s=new He;s.Title=t,Array.isArray(e)?s.DataIndex=e:s.DataIndex=[e],s.Key=ft(),s.Table=i;var r=s.Render_Dict;return n&&n.forEach((function(t){r.GetRender(t.State).Render=t.Render})),s},Ue=function(t,e){var n=new He;return n.Title=t,n.DataIndex=[t],n.Key=ft(),n.Table=e,n.OnSetTitleOK_Funcs.push((function(){n.DataIndex=[n.Title],e.Update()})),n},Be=function(t){var e=[Se(ve,(function(e,n,s,r,a){var c="";if(t.CanHandleItem&&t.CanEditItem){c=Object(i.jsx)(m.a,{type:"primary",size:"small",style:{backgroundColor:"#faad14",border:"none"},onClick:function(){return a.Edit()},children:"edit"})}var o="";if(t.CanHandleItem&&t.CanDeleteItem){o=Object(i.jsx)(m.a,{type:"primary",danger:!0,size:"small",onClick:function(){return t.DeleteItem(n,a)},children:"x"})}return Object(i.jsxs)(i.Fragment,{children:[c,o]})})),Se(ge,(function(t,e,n,s,r){return Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:function(){return r.OK()},children:"ok"})}))],n=We(undefined,null,e,t);return n.IsAction=!0,n.TitleRender_Dict.GetRender(ve).Render=function(){return Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddColumn,children:"(+) c"}),t.CanHandleItem&&t.CanAddItem?Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddItem,children:"(+) r"}):""]})},n},Ke=function(t){switch(t.InputType){case Te:return;case De:return t.AllNames[0]}},ze=n(55),qe=n(173),Je=function(){function t(){var e=this;Object(o.a)(this,t),this.Item=void 0,this.Edit=function(){var t=e.Table;t.CanHandleItem&&t.CanEditItem&&e.Cells.forEach((function(t){return t.RenderState=ge}))},this.OK=function(){e.Cells.forEach((function(t){return t.RenderState=ve})),e.Table.EditItem(e.Item)},Object(g.k)(this,{Item:g.l})}return Object(u.a)(t,[{key:"Key",get:function(){return this.key||(this.key=this.Item._id?this.Item._id:this.Item.id,this.key||(this.key=ft())),this.key}},{key:"Index",get:function(){return this.Table.Rows.indexOf(this)}},{key:"Cells",get:function(){return this.cells||(this.cells=Qe(this)),this.cells}}]),t}(),Ye=function(t,e){var n=new Je;return n.Item=t,n.Table=e,n},Qe=function(t){return t.Table.Columns.map((function(e){return function(t,e){var n=new ye;return n.Row=t,n.Column=e,n.Table=t.Table,n}(t,e)}))},Ze=function(){function t(){var e,n=this;Object(o.a)(this,t),this.CanHandleItem=!0,this.CanAddItem=!0,this.CanDeleteItem=!0,this.CanEditItem=!0,this.CanHandleColumn=!0,this.CanAddColumn=!0,this.CanDeleteColumn=!0,this.CanEditColumn=!0,this.IsShowActionColumn=!0,this.columns=void 0,this.dataSource=void 0,this.rows=void 0,this.AddItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.CanHandleItem&&n.CanAddItem){void 0===t&&(t=n.OnGetItemForAdd?n.OnGetItemForAdd():{Key:ft(),IsTypeNotDefined:!0}),n.DataSource.push(t);var i=Ye(t,n);n.Rows.push(i),e&&i.Edit()}},this.DeleteItem=function(t,e){if(n.CanHandleItem&&n.CanDeleteItem){var i=n.DataSource,s=i.indexOf(t);i.splice(s,1),n.Rows.splice(s,1),n.OnDeleteItem&&n.OnDeleteItem(t)}},this.EditItem=function(t){if(n.CanHandleItem&&n.CanEditItem){if(t.IsTypeNotDefined){var e=n.DataSource.findIndex((function(e){return e.Key===t.Key}));t=n.DataSource[e]=Object(qe.a)({},t)}n.OnEditItem&&n.OnEditItem(t)}},this.AddColumn=function(){if(n.CanHandleColumn&&n.CanDeleteColumn){var t=Ue(null,n),e=n.Columns.findIndex((function(t){return t.IsAction}));-1!==e?n.Columns.splice(e,0,t):n.Columns.push(t),t.Edit()}},this.Update=function(){n.Rows=null},this.Column_InputType=Te,this.AllColumnNames=[],this.CanShow_MoveCommand=!0,Object(g.k)(this,(e={columns:g.l,dataSource:g.l,rows:g.l,AllColumnNames:g.l,Column_InputType:g.l,CanHandleItem:g.l,CanAddItem:g.l,CanDeleteItem:g.l,CanEditItem:g.l},Object(ze.a)(e,"CanHandleItem",g.l),Object(ze.a)(e,"CanAddItem",g.l),Object(ze.a)(e,"CanDeleteItem",g.l),Object(ze.a)(e,"CanEditItem",g.l),Object(ze.a)(e,"IsShowActionColumn",g.l),e))}return Object(u.a)(t,[{key:"Columns",get:function(){return this.columns||(this.columns=[We("T\xean c\u1ea5u ki\u1ec7n","ElementName",null,this),We("\u0110\u01b0\u1eddng k\xednh","Diameter",null,this)],this.IsShowActionColumn&&this.columns.push(Be(this))),this.columns},set:function(t){this.columns=t,this.Rows=void 0}},{key:"DataSource",get:function(){return this.dataSource||(this.dataSource=[]),this.dataSource},set:function(t){this.dataSource=t,this.Rows=void 0}},{key:"Rows",get:function(){var t;return this.rows||(this.rows=(t=this).DataSource.map((function(e){return Ye(e,t)}))),this.rows},set:function(t){this.rows=t}}]),t}(),Xe=function(){function t(){Object(o.a)(this,t),this.items=[]}return Object(u.a)(t,[{key:"Project",get:function(){return this.project},set:function(t){this.project=t,this.projectId=t._id}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.TableVM.DataSource=t}},{key:"TableVM",get:function(){return this.tableVM||(this.tableVM=function(t){var e=new Ze;return e.DataSource=t.Items,e.Columns=[We("T\xean c\u1ea5u ki\u1ec7n",["Info","elementName"],[Se(ve,(function(t,e){return e.Info.elementName}))],e),We("H\u1ea1ng m\u1ee5c",["Info","workItem"],[Se(ve,(function(t,e){return e.Info.workItem}))],e),We("\u0110\u01b0\u1eddng k\xednh",["Info","diameter"],[Se(ve,(function(t,e){return e.Info.diameter}))],e),We("Kh\u1ed1i l\u01b0\u1ee3ng",["Value"],null,e),Be(e)],e.OnGetItemForAdd=function(){return Ii(t.Project)},e.OnEditItem=function(t){t.AddDatabase()},e.OnDeleteItem=function(t){t.DeleteDatabase()},e}(this)),this.tableVM}}]),t}(),$e=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){var t=e._id;N("https://api.bimdev.vn/api/hbs/delete",{_id:t}).then((function(t){return t.data})).then((function(t){return T.b.success("Delete setting successfully")})),e.Dict.Items.splice(e.Index,1),e.OnDelete&&e.OnDelete(),e.Dict.Input.EditItemId=void 0},this.SaveDatabase=function(t){!function(t,e,n){var i=t.ApiData,s=!i._id;(s?R("".concat(e,"/add"),i):N("".concat(e,"/edit"),i)).then((function(t){return t.data})).then((function(e){s&&(t._id=e._id),n(e,s)}))}(e,e.Url,(function(n,i){var s=e.Dict.Items;if(i)s.push(e);else{var r=s.indexOf((function(t){return t._id===e._id}));s[r]=e}t&&t(n,i)}))}}return Object(u.a)(t,[{key:"Name",get:function(){return this.name},set:function(t){this.name=t,this.OnNameChanged&&this.OnNameChanged(t)}},{key:"Description",get:function(){return this.description},set:function(t){this.description=t,this.OnDescriptionChanged&&this.OnDescriptionChanged(t)}},{key:"Data",get:function(){return this.data},set:function(t){this.data=t,this.OnDataChanged&&this.OnDataChanged(t)}},{key:"DisplayContent",get:function(){return this.Name}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}},{key:"ApiData",get:function(){var t;return{_id:this._id,projectId:null===(t=this.Project)||void 0===t?void 0:t._id,settingType:this.SettingType,name:this.Name,description:this.Description,data:this.Data.ApiData}}}]),t}(),tn=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.LevelGroups.splice(e.Index,1)},this.OnGetLevelStorageList_Func_Dict=[]}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=pt()),this._id}},{key:"Index",get:function(){return this.Dict.LevelGroups.indexOf(this)}},{key:"ApiData",get:function(){return{levels:this.Levels?this.Levels:[],primary:this.Primary}}},{key:"Count",get:function(){return this.Levels.length}},{key:"GetLevelStorageList",get:function(){return this.getLevelStorageList},set:function(t){this.getLevelStorageList=t,this.OnGetLevelStorageList_Func_Dict.forEach((function(t){return t.Value()}))}},{key:"LevelStorageList",get:function(){var t=this,e=this.Dict.LevelStorageList;return e||this.IsGet_LevelStorageList||(this.IsGet_LevelStorageList=!0,this.Setting.OnGetLevelStorageList_Funcs.push((function(){t.GetLevelStorageList=!0}))),e}},{key:"Setting",get:function(){return this.Dict.Setting}},{key:"LevelIndexs",get:function(){var t=this;return this.Levels.map((function(e){return t.LevelStorageList.indexOf(e)}))}},{key:"MinLevel",get:function(){return this.LevelStorageList[Math.min.apply(Math,this.LevelIndexs)]}},{key:"MaxLevel",get:function(){return this.LevelStorageList[Math.max.apply(Math,this.LevelIndexs)]}},{key:"Description",get:function(){if(this.LevelStorageList)return"Typ: ".concat(this.MinLevel," - ").concat(this.MaxLevel," (").concat(this.Count,")")}},{key:"FullDescription",get:function(){if(this.Description)return"".concat(this.Dict.FilterDescription," (").concat(this.Description,")")}},{key:"Primary",get:function(){return this.primary||(this.primary=sn(this)),this.primary},set:function(t){this.primary=t}},{key:"Primary_Values",get:function(){return rn(this)}}]),t}(),en=function(t,e){var n=new tn;return Array.isArray(t)?n.Levels=t:(n.Levels=t.levels,n.Primary=t.primary),n.Dict=e,n},nn=function(t){var e=new tn;return e.Dict=t,e},sn=function(t){if(t.Levels&&0!==t.Levels.length)return t.Levels[0]},rn=function(t){var e=t.Primary,n=t.Setting.Binding.Items,i=n.findIndex((function(t){return t.Name===e}));return-1!==i?n[i].Values:[]},an="input",cn="select",on=function(){function t(){Object(o.a)(this,t),this.Value=void 0,this.InputType=cn}return Object(u.a)(t,[{key:"ApiData",get:function(){return{value:this.Value,inputType:this.InputType}}}]),t}(),un=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.Filters.splice(e.Index,1)},this.Items=[],this.AddItem=function(){var t=new on;return e.Items.push(t),t}}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=pt()),this._id}},{key:"Index",get:function(){return this.Dict.Filters.indexOf(this)}},{key:"Values",get:function(){return this.Items.filter((function(t){return t.Value})).map((function(t){return t.Value}))}},{key:"Field",get:function(){return this.field||(this.field=this.FieldStorageList[0]),this.field},set:function(t){this.field=t}},{key:"FieldStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"ApiData",get:function(){return{field:this.Field,items:this.Items.filter((function(t){return t.Value})).map((function(t){return t.ApiData}))}}},{key:"Description",get:function(){var t=this.Values.reduce((function(t,e,n,i){return 0!==i.indexOf(e)&&(t+=", "),t+=e}),"");return"".concat(this.Field,": ").concat(t)}}]),t}(),ln=function(t){var e=new un;return e.Dict=t,e},hn=function(){function t(){var e=this;Object(o.a)(this,t),this.Name="t\xean setting",this.Delete=function(){e.Dict.PageItems.splice(e.Index,1)},this.AddLevelGroup=function(){var t=nn(e);return e.LevelGroups.push(t),t},this.AddFilter=function(){var t=ln(e);return e.Filters.push(t),t}}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=pt()),this._id}},{key:"Index",get:function(){return this.Dict.PageItems.indexOf(this)}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"Setting",get:function(){return this.Dict.Setting}},{key:"LevelStorageList",get:function(){return this.Dict.LevelStorageList}},{key:"LevelGroups",get:function(){return this.levelGroups||(this.levelGroups=pn(this)),this.levelGroups},set:function(t){this.levelGroups=t}},{key:"Filters",get:function(){return this.filters||(this.filters=mn(this)),this.filters},set:function(t){this.filters=t}},{key:"FilterDescription",get:function(){return this.Filters.reduce((function(t,e,n,i){return 0!==i.indexOf(e)&&(t+="; "),t+=e.Description}),"")}},{key:"ApiData",get:function(){return{name:this.Name,levelGroups:this.LevelGroups.map((function(t){return t.ApiData})).filter((function(t){return 0!==t.levels.length})),filters:this.Filters.map((function(t){return t.ApiData}))}}}]),t}(),dn=function(t,e){var n=new hn;return n.Name=t.name,n.Filters=t.filters.map((function(t){return function(t,e){var n=new un;return n.Field=t.field,t.items?n.Items=t.items.map((function(t){var e=new on;return e.Value=t.value,e.InputType=t.inputType,e})):n.Items=t.values.map((function(t){var e=new on;return e.Value=t,e})),n.Dict=e,n}(t,n)})),n.LevelGroups=t.levelGroups?t.levelGroups.map((function(t){return en(t,n)})):t.levels.map((function(t){return en(t,n)})),n.Dict=e,n},fn=function(t){var e=new hn;return e.Name="setting 1",e.Dict=t,e},pn=function(t){return[nn(t)]},mn=function(t){return[ln(t)]},vn=function(){function t(){var e=this;Object(o.a)(this,t),this.AddPageItem=function(){var t=fn(e);return e.PageItems.push(t),t.Name="setting ".concat(t.Index+1),t}}return Object(u.a)(t,[{key:"Setting",get:function(){return this.Dict}},{key:"LevelStorageList",get:function(){return this.Dict.LevelStorageList}},{key:"PageItems",get:function(){return this.pageItems||(this.pageItems=bn(this)),this.pageItems},set:function(t){this.pageItems=t}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"ApiData",get:function(){return{pageItems:this.PageItems.map((function(t){return t.ApiData}))}}}]),t}(),gn=function(t,e){var n=new vn;return n.PageItems=t.pageItems.map((function(t){return dn(t,n)})),n.Dict=e,n},In=function(t){var e=new vn;return e.Dict=t,e},bn=function(t){return[fn(t)]},_n=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.Items.splice(e.Index,1)},this.Name="",this.Values=[]}return Object(u.a)(t,[{key:"TempId",get:function(){return this.tempId||(this.tempId=pt()),this.tempId}},{key:"id",get:function(){return this._id?this._id:this.TempId}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}},{key:"ApiData",get:function(){return{name:this.Name,values:this.Values}}}]),t}(),yn=function(){function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.AddItem=function(){var t=function(t){var e=new _n;return e.Dict=t,e}(e);return e.Items.push(t),t},this.Update_LevelData=function(){e.LevelStorageList=On(e)},this.OnSet_LevelStorageList_Func_Dict=[]}return Object(u.a)(t,[{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=On(this)),this.levelStorageList},set:function(t){var e=this;this.levelStorageList=t,yt(this.OnSet_LevelStorageList_Func_Dict,(function(t){return e.OnSet_LevelStorageList_Func_Dict=t}))}},{key:"ApiData",get:function(){return{items:this.Items.map((function(t){return t.ApiData}))}}}]),t}(),jn=function(t,e){var n=new yn;return n.Items=t.items.map((function(t){return function(t,e){var n=new _n;return n.Name=t.name,n.Values=t.values,n.Dict=e,n}(t,n)})),n},Sn=function(t){var e=new yn;return e.Items=[],e},On=function(t){return t.Items.map((function(t){return t.Name}))},Mn=function(){function t(){Object(o.a)(this,t),this.OnSet_LevelStorageList_Func_Dict=[]}return Object(u.a)(t,[{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=kn(this)),this.levelStorageList},set:function(t){var e=this;this.levelStorageList=t,yt(this.OnSet_LevelStorageList_Func_Dict,(function(t){return e.OnSet_LevelStorageList_Func_Dict=t}))}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"ApiData",get:function(){return{binding:this.Binding.ApiData,typical:this.Typical.ApiData}}}]),t}(),kn=function(t){return t.Binding.LevelStorageList},Vn=n(96),Cn=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).Save=function(){Pn(Object(Vn.a)(t))},t.OnGetLevelStorageList_Funcs=[],t}return Object(u.a)(n,[{key:"FieldFilterStorageList",get:function(){return this.fieldFilterStorageList||(this.fieldFilterStorageList=Rn()),this.fieldFilterStorageList}},{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=En(this)),this.levelStorageList},set:function(t){this.levelStorageList=t,this.GetLevelStorageList=!0}},{key:"GetLevelStorageList",set:function(t){this.OnGetLevelStorageList_Funcs.forEach((function(t){return t()}))}}]),n}($e),Dn="elementfilter",Tn="massexport",wn="massgroup",Fn="level",xn="massdetail",Gn=function(t,e,n){var i=new Cn;return i._id=t._id,i.Name=t.name,i.Description=t.description,i.SettingType=t.settingType,i.Data=function(t,e){var n,i=new Mn;return t.typical?(n=i.Binding=jn(t.binding),i.Typical=gn(t.typical,i)):(n=i.Binding=Sn(),i.Typical=gn(t,i)),i.Dict=e,_t(n.OnSet_LevelStorageList_Func_Dict,(function(){return i.LevelStorageList=kn(i)}),!1),i}(t.data,i),i.Project=e,i.Phase=n,i},Ln=function(t){var e=new Cn;return e.Name="thi\u1ebft l\u1eadp ...",e.Description="M\xf4 t\u1ea3 thi\u1ebft l\u1eadp ...",e.SettingType="typicallevel",e.Data=function(t){var e=new Mn,n=e.Binding=Sn();return e.Typical=In(e),e.Dict=t,_t(n.OnSet_LevelStorageList_Func_Dict,(function(){return e.LevelStorageList=kn(e)}),!1),e}(e),e.Project=t,e},Nn=function(t,e,n){var i={projectId:t._id,phaseId:null===e||void 0===e?void 0:e._id},s="https://api.bimdev.vn/api/hbs/".concat("tl");R("".concat(s,"/get"),i).then((function(t){return t.data})).then((function(i){var s=i?Gn(i,t,e):void 0,r=s||Ln(t);n(s,r)}))},Rn=function(){return dt()},Pn=function(t){var e=t._id,n=t.ApiData,i="https://api.bimdev.vn/api/hbs/".concat("tl"),s=!!e;(s?N("".concat(i,"/edit"),n):R("".concat(i,"/add"),n)).then((function(t){return t.data})).then((function(e){s&&(t._id=e._id),T.b.success("add setting successfully!")}))},En=function(t){var e=t.Project.Level_Dict,n=function(t){return t.map((function(t){return t.Name}))};if(e.Items)return n(e.Items);e.OnGetItemsDone_Funcs.push((function(){t.LevelStorageList=n(e.Items)}))},An=function(){function t(){Object(o.a)(this,t),this.OnGetExportSetVersions_Func=[],this.OnGetTypicalLevelSetting_Func_Dict=[]}return Object(u.a)(t,[{key:"ExportSetVersions",get:function(){return this.exportSetVersions},set:function(t){this.exportSetVersions=t,this.exportSetVersionIds=t.map((function(t){return t._id}))}},{key:"GetExportSetVersions",set:function(t){this.OnGetExportSetVersions_Func.forEach((function(t){return t()}))}},{key:"Project",get:function(){return this.project||(this.project=this.Dict.Dict),this.project},set:function(t){this.project=t}},{key:"GetTypicalLevelSetting",set:function(t){var e=this;yt(this.OnGetTypicalLevelSetting_Func_Dict,(function(t){return e.OnGetTypicalLevelSetting_Func_Dict=t}))}},{key:"TypicalLevelSetting",get:function(){var t=this;return this.typicalLevelSetting||this.IsOnGetDb_Async||(this.IsOnGetDb_Async=!0,Nn(this.Project,this,(function(e,n){t.TypicalLevelSetting=e,t.GetTypicalLevelSetting=!0}))),this.typicalLevelSetting},set:function(t){this.typicalLevelSetting=t}}]),t}(),Hn=function(t,e){if(t){var n=new An;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.Dict=e,n.CreatedDate=new Date(t.createdDate),Wn(t._id,(function(t){n.ExportSetVersions=t,n.GetExportSetVersions=!0})),n}},Wn=function(t,e){var n="https://api.bimdev.vn/api/hbesv/byphase?phaseId=".concat(t);L(n).then((function(t){return t.data})).then((function(t){e&&e(t)}))},Un=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.Add=function(t){e.Items.push(t),e.OnAdd&&e.OnAdd(t)},this.AddMassVersion=function(){var t=e.Input.ApiData,n=e.Project;N("".concat("https://api.bimdev.vn/api/hbphase","/mass/add"),t).then((function(t){return t.data})).then((function(t){var i=Hn(t,e);e.Add(i),T.b.success("create version successfully!"),function(t,e){var n={projectId:t,phaseId:e};R("".concat("https://api.bimdev.vn/api/hbs","/addphase"),n).then((function(t){return t.data})).then((function(t){T.b.success("attach phase to settings successfully!")}))}(n._id,t._id)}));var i=function(t){return t.AddVersion()},s=n.InputExportSet;s?i(s):n.OnGetInputExportSetDone_Funcs.push((function(){s=n.InputExportSet,i(s)}))},this.Get_Phase=function(t){var n=e.Items,i=n.findIndex((function(e){return e._id===t._id}));if(-1===i){var s=Hn(t,e);return n.push(s),s}return n[i]}}return Object(u.a)(t,[{key:"Project",get:function(){return this.Dict}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"Input",get:function(){return this.input||(this.input=zn(this)),this.input}}]),t}(),Bn=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"ApiData",get:function(){return{projectId:this.Dict.Dict._id,name:this.Name,description:this.Description}}}]),t}(),Kn=function(t){var e=new Un;return t?(e.Dict=t,function(t,e){var n="https://api.bimdev.vn/api/hbphase/list?projectId=".concat(t);L(n).then((function(t){return t.data})).then((function(t){e&&e(t)}))}(t._id,(function(t){e.Items=t.map((function(t){return Hn(t,e)})),e.GetItemsDone=!0}))):e.Items=[],e},zn=function(t){return function(t){var e=new Bn;return e.Dict=t,e.Name="Version 1",e.Description="m\xf4 t\u1ea3 phi\xean b\u1ea3n",e}(t)},qn=function(){function t(){Object(o.a)(this,t),this.OnGetInputExportSetDone_Funcs=[],this.OnSet_LevelDict_Func_Dict=[],this.OnSet_LevelSetting_Func_Dict=[],this.OnGetTypicalLevelSetting_Func_Dict=[]}return Object(u.a)(t,[{key:"Phase_Dict",get:function(){return this.phase_Dict||(this.phase_Dict=Kn(this)),this.phase_Dict}},{key:"RebarMass_Dict",get:function(){return this.rebarMass_Dict||(this.rebarMass_Dict=hi(this)),this.rebarMass_Dict}},{key:"InputExportSet",get:function(){return this.inputExportSet||di(this),this.inputExportSet},set:function(t){this.inputExportSet=t,this.GetInputExportSetDone=!0}},{key:"GetInputExportSetDone",get:function(){return this.getInputExportSetDone},set:function(t){this.getInputExportSetDone=t,this.OnGetInputExportSetDone_Funcs.forEach((function(t){return t()}))}},{key:"Level_Dict",get:function(){return this.level_Dict||(this.level_Dict=fi(this)),this.level_Dict}},{key:"LevelDict",get:function(){return this.levelDict||pi(this),this.levelDict},set:function(t){var e=this;this.levelDict=t,yt(this.OnSet_LevelDict_Func_Dict,(function(t){return e.OnSet_LevelDict_Func_Dict=t}))}},{key:"LevelSetting",get:function(){return this.levelSetting||mi(this),this.levelSetting},set:function(t){var e=this;this.levelSetting=t,yt(this.OnSet_LevelSetting_Func_Dict,(function(t){return e.OnSet_LevelSetting_Func_Dict=t}))}},{key:"GetTypicalLevelSetting",set:function(t){var e=this;yt(this.OnGetTypicalLevelSetting_Func_Dict,(function(t){return e.OnGetTypicalLevelSetting_Func_Dict=t}))}},{key:"TypicalLevelSetting",get:function(){var t=this;return this.typicalLevelSetting||this.IsOnGetDb_Async||(this.IsOnGetDb_Async=!0,Nn(this,null,(function(e,n){t.TypicalLevelSetting=e,t.TypicalLevelSetting_ForEdit=n,t.GetTypicalLevelSetting=!0}))),this.typicalLevelSetting},set:function(t){this.typicalLevelSetting=t}},{key:"TypicalLevelSetting_ForEdit",get:function(){return this.typicalLevelSetting_ForEdit||(this.typicalLevelSetting_ForEdit=this.TypicalLevelSetting),this.typicalLevelSetting_ForEdit},set:function(t){this.typicalLevelSetting_ForEdit=t}},{key:"Url",get:function(){if(!this.url){var t="".concat("/BIM_Database").concat("/#","/project");t="".concat(t,"/").concat(this._id),this.url=t}return this.url}}]),t}(),Jn=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetCurrentVersionDone_Func=[],this.AddVersion=function(){$n(e)}}return Object(u.a)(t,[{key:"CurrentVersion",get:function(){return this.currentVersion||Xn(this),this.currentVersion},set:function(t){this.currentVersion=t,this.GetCurrentVersionDone=t}},{key:"GetCurrentVersionDone",set:function(t){this.OnGetCurrentVersionDone_Func.forEach((function(t){return t()}))}}]),t}(),Yn=function t(){Object(o.a)(this,t)},Qn=function(t){var e=new Yn;return e._id=t._id,e},Zn=function(t){var e=new Jn;return e._id=t._id,e.Name=t.name,e.Description=t.description,e.RetrieveFrom=t.retrieveFrom,e},Xn=function(t){!function(t,e){if(t){var n="https://api.bimdev.vn/api/hbesv/last?exportSetId=".concat(t);L(n).then((function(t){return t.data})).then((function(t){var n=t?Qn(t):t;e(n)}))}}(t._id,(function(e){e?t.CurrentVersion=e:$n(t)}))},$n=function(t){!function(t,e){R("https://api.bimdev.vn/api/hbesv/add",t).then((function(t){return t.data})).then((function(t){var n=Qn(t);e(n)}))}({exportSetId:t._id},(function(e){t.CurrentVersion=e}))},ti=function(){function t(){Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[]}return Object(u.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}}]),t}(),ei=function t(){Object(o.a)(this,t)},ni=function(t,e,n){R("https://api.bimdev.vn/api/hbl/list",t).then((function(t){return t.data})).then((function(t){t||(t=[]);var i=t.map((function(t){return function(t,e){var n=new ei;return n.Name=t.name,n.Elevation=t.elevation,n.Dict=e,n}(t,e)}));n&&n(i)}))},ii=function t(){Object(o.a)(this,t)},si=function t(){Object(o.a)(this,t)},ri=function(){return"".concat(ou.Instance.ApiUrl,"/hbld")},ai=function(t,e){var n=new ii;n.Project=e;var i=t.data.items;return n.Items=i?i.map((function(t){return function(t,e){var n=new si;return n.Name=t.name,n.Elevation=t.elevation,n.Dict=e,n}(t,n)})):[],n},ci="https://api.bimdev.vn/api/hbs/lv",oi=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).SettingType=Fn,t.Url=ci,t}return n}($e),ui=function(t,e){if(t){var n=new qn;return n._id=t._id,n.Name=t.name,n.Code=t.code,n.Dict=e,n}},li=function(t,e){L("https://api.bimdev.vn/api/hbp/list").then((function(t){return t.data})).then((function(n){var i=n.map((function(e){return ui(e,t)}));e&&e(i)}))},hi=function(t){return function(t){var e=new Xe;e.Project=t;var n=e.projectId;return _i(n,(function(t){e.Items=t})),e}(t)},di=function(t){var e=t._id;!function(t,e){if(t){var n="https://api.bimdev.vn/api/hbes/input?projectId=".concat(t);L(n).then((function(t){return t.data})).then((function(t){var n=t?Zn(t):t;e(n)}))}}(e,(function(n){n?t.InputExportSet=n:function(t,e){R("https://api.bimdev.vn/api/hbes/add",t).then((function(t){return t.data})).then((function(t){var n=Zn(t);e(n)}))}({projectId:e,name:"D\u1eef li\u1ec7u kh\u1ed1i l\u01b0\u1ee3ng input",description:"m\xf4 t\u1ea3 d\u1eef li\u1ec7u",retrieveFrom:"input"},(function(e){t.InputExportSet=e}))}))},fi=function(t){return function(t){var e=new ti;return e.Project=t,ni({projectId:t._id},e,(function(t){e.Items=t.sort((function(t,e){return t.Elevation-e.Elevation})),e.GetItemsDone=!0})),e}(t)},pi=function(t){if(!t.IsGet_LevelDict){t.IsGet_LevelDict=!0;!function(t,e){var n={projectId:t},i="".concat(ri(),"/get");R(i,n).then((function(t){return t.data})).then((function(t){e&&e(t)}))}(t._id,(function(e){return t.LevelDict=ai(e,t)}))}},mi=function(t){t.IsGet_LevelSetting||(t.IsGet_LevelSetting=!0,t.LevelSetting=function(t){var e=new oi;return e.Name="thi\u1ebft l\u1eadp level",e.Description="M\xf4 t\u1ea3 thi\u1ebft l\u1eadp",e.Data=Sn(),e.Project=t,e}(t))},vi=function(){return ou.Instance},gi=function(t,e,n){var i,s=new ie;s._id=t._id,s.Value=t.value,s.Unit=t.unit,s.MassType=t.massType,s.Info=t.info,s.projectId=t.projectId,s.workpackageId=t.workpackageId,s.exportSetId=t.exportSetId,s.exportSetVersionId=t.exportSetVersionId,s.Element=t.Elements&&0!==t.Elements.length?t.Elements[0]:void 0;var r=t.Projects&&0!==t.Projects.length?t.Projects[0]:void 0;if(r){var a=vi().Project_Dict_ForMassDetail;i=s.Project=a.Get_Project(r)}e&&(s.IsDetailView=!0,n&&(s.IsHavePhase=!0,(n=(a=vi().Phase_Dict_ForMassDetail).Get_Phase(n)).Project=i,s.Phases=[n]));return s},Ii=function(t){var e=new ie;e.Unit="kg",e.MassType=A,e.Info={},e.projectId=t._id;var n=function(t){e.exportSetId=t._id;var n=t.CurrentVersion;n?e.exportSetVersionId=n._id:t.OnGetCurrentVersionDone_Func.push((function(){n=t.CurrentVersion,e.exportSetVersionId=n._id}))},i=t.InputExportSet;return i?n(i):t.OnGetInputExportSetDone_Funcs.push((function(){i=t.InputExportSet,n(i)})),e},bi=function(t){var e=vi().Project_Dict.Items,n=t.projectId,i=e.findIndex((function(t){return t._id===n}));return-1!==i?e[i]:void 0},_i=function(t,e){if(t){var n="https://api.bimdev.vn/api/hbmr/rebar?projectId=".concat(t);L(n).then((function(t){return t.data})).then((function(t){var n=void 0;if(t)n=t.map((function(t){return gi(t)}));else n=[];e&&e(n)}))}},yi=function(t){var e=vi().Workpackage_Dict.Workpackages,n=t.workpackageId,i=e.findIndex((function(t){return t._id===n}));return-1!==i?e[i]:void 0},ji=function(t){var e=[],n=vi().Phase_Dict.Items,i=t.exportSetVersionId;return n.forEach((function(t){t.exportSetVersionIds.includes(i)&&e.push(t)})),e},Si=function(t){if(t.IsDetailView)return t.Phases;var e=vi().MassResultComp.Phases,n=t.Phases,i=[];return n.forEach((function(t){e.includes(t)&&i.push(t)})),i},Oi=function(t){if(!t.IsGet_TLS_LevelGroup){t.IsGet_TLS_LevelGroup=!0;var e=t.Project,n=function(e){var n=e.Data.Typical,i=Mi(t,n);return Vi(t,i)},i=e.TypicalLevelSetting;i?t.TLS_LevelGroup=n(i):_t(e.OnGetTypicalLevelSetting_Func_Dict,(function(){return t.TLS_LevelGroup=n(e.TypicalLevelSetting)}))}},Mi=function(t,e){if(e){var n=void 0;return e.PageItems.forEach((function(e){!n&&ki(t,e)&&(n=e)})),n}},ki=function(t,e){var n=e.Filters,i=!0;return n.forEach((function(e){if(i){var n=e.Field,s=t.GetValue_Mas(n);i=e.Values.includes(s)}})),i},Vi=function(t,e){if(e){var n=void 0;return e.LevelGroups.forEach((function(e){var i=e.Primary_Values,s=t.GetValue_Mas(Y);!n&&i.includes(s)&&(n=e)})),n}},Ci=function(t){if(!t.IsGet_FullValue){t.IsGet_FullValue=!0;var e=function(e){var n=e?e.Count:1,i=t.Value*n;t.FullValue=i};t.TLS_LevelGroup||t.Get_TLS_LevelGroup?e(t.TLS_LevelGroup):bt(t.OnGet_TLS_LevelGroup_Func_Dict,(function(){e(t.TLS_LevelGroup)}))}},Di=function(t){return t.ValidPhasesByInput.map((function(e){return function(t,e){var n=new se;return n.Phase=t,n.Dict=e,n}(e,t)}))},Ti=function(t){if(!t.IsGet_Lastest_PhaseItem){t.IsGet_Lastest_PhaseItem=!0;var e=t.PhaseItems;if(e&&0!==e.length)return 1===e.length||e.sort((function(t,e){return e.Phase.CreatedDate-t.Phase.CreatedDate})),e[0]}},wi=function(t){if(t.IsDetailView&&!t.IsHavePhase)return t.OriginLevelItem;var e=t.Lastest_PhaseItem;return e?e.LevelItem:t.OriginLevelItem},Fi=function(t){return ae(t)},xi=function(){function t(){var e=this;Object(o.a)(this,t),this.SubComponents=[],this.NotIncludeValues=[],this.Items=[],this.AddNotIncludeValue=function(t){-1===e.NotIncludeValues.indexOf(t)&&e.NotIncludeValues.push(t)},this.GetItem=function(t,n){var i=e.Items.findIndex((function(e){return e.Value===t}));if(-1===i){var s=ee(e);return s.Value=t,s.Title=n,e.Items.push(s),s}return e.Items[i]},this.SupRows=[],this.CreatedByUser_Rows=[],this.On_AddSupRow_Func_Dict=[],this.AddSupRow=function(t){var n=e.SupRows;-1===n.indexOf(t)&&(e.NewRow=t,n.push(t),e.HandleCreatedByUserRows(t),yt(e.On_AddSupRow_Func_Dict,(function(t){return e.On_AddSupRow_Func_Dict=t})))},this.OnIsFirstSetSupRow_Funcs=[],this.HandleCreatedByUserRows=function(t){for(var n=e.Items.filter((function(t){return t.CreateType===$t&&!t.IsAdd_Done})),i=[],s=!0,r=function(){var t=void 0,r=[];s?(t=function(t){return void 0===t.SupItem||t.SupItem.CreateType!==$t},s=!1):t=function(t){return-1!==i.findIndex((function(e){return e.Value===t.SupValue}))},n.forEach((function(n,s,a){e.IsDebug,t(n)&&(i.push(n),r.push(s))})),r.forEach((function(t,e){n.splice(t-e,1)}))};0!==n.length;)r();i.forEach((function(t){var n,i=t.Value,s=e.SupRows.concat(e.CreatedByUser_Rows),r=!0;if(t.SupValue||0===s.length){var a=s.findIndex((function(e){return e.Name===t.SupValue}));-1!==a?n=s[a]:r=!1}else n=s[0];if(!r)return!1;t.IsAdd_Done=!0;var c=function(t){var n=e.Table.GetRow(i,t);return n.FullValue=i,n.IsCreatedByUser=!0,e.Table.CreatedByUser_Rows.push(n),e.CreatedByUser_Rows.push(n),n},o=function(t){t.MassGroupItem=e,u(t)},u=function(n){var i=e.SubComponents.findIndex((function(e){return e.Filter.Values.includes(t.Value)}));-1!==i&&e.SubComponents[i].Items[0].AddSupRow(n)},l=t.NewMGI;if(l){var h=t.SupValue;l.GetItem(i),e.Table.Handle_ReplaceMGI(l,h,c,o)}else o(c(n))}))}}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=pt()),this._id},set:function(t){this._id=t}},{key:"Index",get:function(){return this.SupComponent.Items.indexOf(this)}},{key:"OrderItems",get:function(){return this.Items}},{key:"OrderValues",get:function(){return this.Items.map((function(t){return t.Value}))}},{key:"ApiData",get:function(){var t=this.Items.map((function(t){return t.ApiData}));return{_id:this.id,field:this.Field,subComponents:this.SubComponents.map((function(t){return t.ApiData})),valueOrders:this.ValueOrders,notIncludeValues:this.NotIncludeValues,items:t}}},{key:"IsFirstSetSupRow",get:function(){return this.isFirstSetSupRow},set:function(t){this.isFirstSetSupRow=t,this.OnIsFirstSetSupRow_Funcs.forEach((function(t){return t()}))}},{key:"HaveMassItemSubComponents",get:function(){return this.SubComponents.filter((function(t){return t.IsHaveMassItem}))}},{key:"Table",get:function(){return this.table||(this.table=Hi(this)),this.table},set:function(t){this.table=t}}]),t}(),Gi=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"OriginComponent",get:function(){return this.originComponent||(this.originComponent=Ri(this)),this.originComponent}},{key:"ApiData",get:function(){return{filter:this.Filter?this.Filter.ApiData:void 0,items:this.Items.map((function(t){return t.ApiData}))}}},{key:"AllItems",get:function(){return this.OriginComponent.AllSubItems}},{key:"AllSubItems",get:function(){var t=Object(O.a)(this.Items);return this.Items.forEach((function(e){return e.SubComponents.forEach((function(e){return t.push.apply(t,e.AllSubItems)}))})),t}}]),t}(),Li=function(t,e){var n=new Gi;return n.Filter=t.filter?Yt(t.filter):void 0,n.Items=t.items.map((function(t){return Ei(t,n)})),n.SupItem=e,n},Ni=function(t,e){if(!t)return t;var n=new Gi;return n.Filter=function(t){if(!t)return t;var e=new Xt;return e.ValueType=t.ValueType,e.NumberFilterType=t.NumberFilterType,e.StringFilterType=t.StringFilterType,e.Values=Object(O.a)(t.Values),e.CategoryType=t.CategoryType,e}(t.Filter),n.Items=t.Items.map((function(t){return Ai(t,n)})),n.SupItem=e,n},Ri=function(t){return t.SupItem?t.SupItem.SupComponent.OriginComponent:t},Pi=function(t,e,n){var i=new xi;return i.Field=t,i.SupComponent=n,e&&(i.SubComponents=e),i},Ei=function(t,e){var n=new xi;return n._id=t._id,n.Field=t.field,n.SupComponent=e,n.SubComponents=t.subComponents?t.subComponents.map((function(t){return Li(t,n)})):[],t.items?(n.Items=t.items.map((function(t){return function(t,e){var n=new ne;return n.Value=t.value,n.SupValue=t.supValue,n.Title=t.title,n.newMGI_id=t.newMGI_id,n.MassGroupItem=e,n.CreateType=t.createType?t.createType:te,n}(t,n)})).filter((function(t){return t.Value})),n.IsHaveValueOrder=!0):(n.Items=[],n.IsHaveValueOrder=!1),n.NotIncludeValues=t.notIncludeValues?t.notIncludeValues:[],n},Ai=function(t,e){if(!t)return t;var n=new xi;return n.id=t.id,n.Field=t.Field,n.Items=t.Items.map((function(t){return function(t,e){var n=new ne;return n.Value=t.Value,n.SupValue=t.SupValue,n.Title=t.Title,n.newMGI_id=t.newMGI_id,n.MassGroupItem=e,n.CreateType=t.CreateType,n}(t,n)})),n.NotIncludeValues=Object(O.a)(t.NotIncludeValues),n.IsHaveValueOrder=t.IsHaveValueOrder,n.SupComponent=e,n.SubComponents=t.SubComponents.map((function(t){return Ni(t,n)})),n},Hi=function(t){return t.SupComponent.SupItem.Table},Wi=n(61),Ui=n.n(Wi),Bi=function(t,e){var n=new Ki;return n.Items=t,n.InitialItems=e,n},Ki=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.GetInitialIndexs=function(){var t=e.InitialItems;return t?t.map((function(t){return e.Items.indexOf(t)})).filter((function(t){return-1!==t})):[]},this.selectedIndexs=[],this.GetSelectedItems=function(){return e.SelectedIndexs.map((function(t){return e.Items[t]}))},this.open=!1,this.canOpen=!0,Object(g.k)(this,{items:g.l,selectedIndexs:g.l,open:g.l,canOpen:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t}},{key:"InitialItems",get:function(){return this.initialItems},set:function(t){this.initialItems=t,this.InitialIndexs=this.GetInitialIndexs(),this.SelectedIndexs=this.InitialIndexs}},{key:"InitialIndexs",get:function(){return this.initialIndexs||(this.initialIndexs=this.GetInitialIndexs()),this.initialIndexs},set:function(t){this.initialIndexs=t}},{key:"SelectedIndexs",get:function(){return this.selectedIndexs},set:function(t){this.selectedIndexs=t,this.SelectedItems=this.GetSelectedItems()}},{key:"SelectedItems",get:function(){return this.selectedItems||(this.selectedItems=this.GetSelectedItems()),this.selectedItems},set:function(t){this.selectedItems=t,this.OnSelectedItemChanged&&this.OnSelectedItemChanged(t)}},{key:"Placeholder",get:function(){return this.placeholder||(this.placeholder="ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng ..."),this.placeholder},set:function(t){this.placeholder=t}},{key:"TitleRender",get:function(){return this.titleRender||(this.titleRender=function(t){return t.DisplayContent?t.DisplayContent:"".concat(t)}),this.titleRender},set:function(t){this.titleRender=t}},{key:"Open",get:function(){return this.open},set:function(t){this.open=t,this.OnSetOpen&&this.OnSetOpen(t)}},{key:"CanOpen",get:function(){return this.canOpen},set:function(t){this.canOpen=t}}]),t}(),zi=f.a.Option,qi=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndexs=t},i.onDropdownVisibleChange=function(t){i.state.Open=t};var s=i.props.store;return i.state=s||new Ki,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=this.props.style?this.props.style:{width:"100%"},n=t.Placeholder,s=t.Items,r=t.SelectedIndexs,a=t.InitialIndexs;0===r.length&&(r=a,t.InitialIndexs=[]);var c=s?s.map((function(e,n){var s=t.TitleRender(e),r=void 0;return r=void 0===e?ft():"string"!==typeof e&&isNaN(e)?e._id?e._id:e.id:e,Object(i.jsx)(zi,{value:n,children:s},r)})):"";return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(f.a,{style:e,mode:"multiple",placeholder:n,optionFilterProp:"children",onChange:this.onValueChange,value:r,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},open:t.CanOpen&&t.Open,onDropdownVisibleChange:this.onDropdownVisibleChange,children:c})})}}]),n}(s.Component),Ji=Object(d.a)(qi),Yi=n(338),Qi=n(336),Zi=n(339),Xi=n(335),$i=function t(){var e=this;Object(o.a)(this,t),this.IsElementVisible=!1,this.ShowElement=function(){e.IsElementVisible=!0},this.HideElement=function(){e.IsElementVisible=!1},Object(g.k)(this,{IsElementVisible:g.l})},ts=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new $i,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=this.props.className;if(!t.style){var n=this.props.style?this.props.style:{};n.minWidth||(n.minWidth=150),t.style=n}return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:e,style:t.style,onMouseEnter:t.ShowElement,onMouseLeave:t.HideElement,children:t.IsElementVisible?t.Element:""})})}}]),n}(s.Component),es=Object(d.a)(ts),ns=n(342),is="inside",ss="lower",rs=function(){function t(){var e=this;Object(o.a)(this,t),this.Location=is,this.ToggleLocation=function(){switch(e.Location){case is:e.Location=ss;break;case ss:e.Location=is}},Object(g.k)(this,{Location:g.l})}return Object(u.a)(t,[{key:"Color",get:function(){return function(t){switch(t.Location){case is:return"#52c41a";case ss:return"#faad14"}}(this)}},{key:"ButtonStyle",get:function(){return{width:50,backgroundColor:this.Color,border:"none"}}}]),t}(),as="input",cs="select",os=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.inputTitle=void 0,this.outputTitle=void 0,this.availableItems=void 0,this.selectedItems=[],this.GetKey=function(t){return"string"===typeof t?t:t.id?t.id:pt()},this.Select=function(t){var n=e.AvailableItems.indexOf(t);e.AvailableItems.splice(n,1),e.SelectedItems.push(t),e.IsChanged=!0},this.Unselect=function(t){var n=e.SelectedItems.indexOf(t);e.SelectedItems.splice(n,1);var i=e.Items.indexOf(t);i<e.AvailableItems.length?e.AvailableItems.splice(i,0,t):e.AvailableItems.push(t),e.IsChanged=!0},Object(g.k)(this,{items:g.l,availableItems:g.l,selectedItems:g.l,inputTitle:g.l,outputTitle:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.AvailableItems=Object(O.a)(this.Items),this.SelectedItems=[]}},{key:"InputTitle",get:function(){return this.inputTitle||(this.inputTitle="D\u1eef li\u1ec7u input"),this.inputTitle},set:function(t){this.inputTitle=t}},{key:"OutputTitle",get:function(){return this.outputTitle||(this.outputTitle="D\u1eef li\u1ec7u output"),this.outputTitle},set:function(t){this.outputTitle=t}},{key:"AvailableItems",get:function(){return this.availableItems},set:function(t){this.availableItems=t}},{key:"SelectedItems",get:function(){return this.selectedItems},set:function(t){this.selectedItems=t}},{key:"IsChanged",set:function(t){this.OnSelectedItemChanged&&this.OnSelectedItemChanged(this.SelectedItems)}},{key:"Render",get:function(){return this.render||(this.render=ls(this)),this.render},set:function(t){this.render=t}}]),t}(),us=function(t,e,n,i){var s=new os;return s.Items=t,s.Render=e,s.InputTitle=n,s.OutputTitle=i,s},ls=function(t){return function(t){return t}},hs=(n(253),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndexs=t},i.onDropdownVisibleChange=function(t){i.state.Open=t};var s=i.props.store;return i.state=s||us(["a","b","c","d","e","f","g","h","i","j","k","q","r","s","t"]),i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;this.props.style;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("table",{className:"tc_table",children:[Object(i.jsx)("thead",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{children:Object(i.jsx)("div",{className:"tc_table__title",children:Object(i.jsx)("span",{children:t.InputTitle})})}),Object(i.jsx)("th",{children:Object(i.jsx)("div",{className:"tc_table__title",children:t.OutputTitle})})]})}),Object(i.jsx)("tbody",{children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{children:Object(i.jsx)("span",{className:"tc_select__partition__items",children:t.AvailableItems.map((function(e){return Object(i.jsx)("span",{onClick:function(){return t.Select(e)},children:t.Render(e)},t.GetKey(e))}))})}),Object(i.jsx)("td",{children:Object(i.jsx)("span",{className:"tc_select__partition__items",children:t.SelectedItems.map((function(e){return Object(i.jsx)("span",{onClick:function(){return t.Unselect(e)},children:t.Render(e)},t.GetKey(e))}))})})]})})]})})}}]),n}(s.Component)),ds=Object(d.a)(hs),fs=function(){function t(){var e=this;Object(o.a)(this,t),this.editable_TitleVM_RenderState=void 0,this.Method=function(t){return e.Dict[t]},Object(g.k)(this,{editable_TitleVM_RenderState:g.l})}return Object(u.a)(t,[{key:"Editable_TitleVM",get:function(){return this.Dict.Editable_TitleVM}},{key:"Editable_TitleVM_RenderState",get:function(){return void 0===this.editable_TitleVM_RenderState&&(this.editable_TitleVM_RenderState=this.Editable_TitleVM.RenderState),this.editable_TitleVM_RenderState},set:function(t){this.editable_TitleVM_RenderState=t,this.Editable_TitleVM.RenderState=t}}]),t}(),ps=n(340),ms=n(341),vs=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new fs,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[t.Editable_TitleVM_RenderState===Dt?Object(i.jsx)(m.a,{size:"small",type:"primary",className:"btn-warning",onClick:function(){return t.Editable_TitleVM_RenderState=Tt},children:"e"}):"",Object(i.jsx)(m.a,{size:"small",type:"primary",className:"btn-success",onClick:t.Method("MoveUp"),children:Object(i.jsx)(ps.a,{})}),Object(i.jsx)(m.a,{size:"small",type:"primary",className:"btn-success",onClick:t.Method("MoveDown"),children:Object(i.jsx)(ms.a,{})}),Object(i.jsx)(m.a,{type:"primary",size:"small",className:"btn-warning",onClick:t.Method("OpenModal"),children:"..."}),Object(i.jsx)(m.a,{size:"small",type:"primary",className:"btn-success",onClick:t.Method("AddSub"),children:"+"}),Object(i.jsx)(m.a,{type:"primary",size:"small",danger:!0,onClick:t.Method("Delete"),children:"x"})]})}}]),n}(s.Component),gs=Object(d.a)(vs),Is=function(){function t(){var e=this;Object(o.a)(this,t),this.subItems=[],this.UpdateCells=function(){e.Cells.forEach((function(t){return t.UpdateData()}))},this.isShowSub=!0,this.rank=void 0,this.isHaveSub=void 0,this.IsToolVisible=!1,this.FieldInputType=cs,this.Toggle_FieldInputType=function(){switch(e.FieldInputType){case cs:e.TempField=e.FieldInputVM.Content,e.FieldInputType=as;break;case as:e.FieldSelectVM.InitialItem=e.TempField,e.FieldInputType=cs}},this.title=void 0,this.GetCellByColumn=function(t){var n=e.Cells.findIndex((function(e){return e.Column===t}));return-1!==n?e.Cells[n]:void 0},this.UpdateData=function(){if(e.Is_Original_SupRow&&0===e.SubItems.length)e.IsHidden=!0;else{e.Rank=Hs(e),e.IsHaveSub=Us(e);var t=0!==e.SubItems.length;e.SubItems=qs(e.SubItems),e.SubItems.forEach((function(t,e){t.UpdateData()})),e.SubItems.filter((function(t){return t.IsHidden})).forEach((function(t){e.SubItems.splice(t.Index,1)})),t&&0===e.SubItems.length&&(e.IsHidden=!0)}},this.ToggleSub=function(){e.IsShowSub=!e.IsShowSub},this.SetSubFields=function(){var t=e.TempSubFields?e.TempSubFields:[],n=!0;if(e.SubFields.length!==t.length?n=!1:e.SubFields.forEach((function(e,i){n&&e!==t[i]&&(n=!1)})),!n){e.SubFields=t;var i=new Xt;i.ValueType=At,i.StringFilterType=Wt,i.Values=[e.FullValue];var s=e.MassGroupItem,r=new Gi;r.SubItem=s,r.Filter=i;var a=r.Items=t.map((function(t){return Pi(t,null,r)})),c=s.SubComponents;if(e.SubMassGroupComponent){var o=c.indexOf(e.SubMassGroupComponent);c[o]=r}else c.push(r);if(e.SubMassGroupComponent=r,e.SubItems=[],e.Original_SubMassGroupItem=void 0,0!==a.length){var u=e.Table;e.Items.forEach((function(t){switch(u.ColumnField){case W:t.ValidPhasesByInput.forEach((function(n){return u.HandleItem(t,n,r,e)}));break;default:u.HandleItem(t,t.GetValue(u.ColumnField),r,e)}}))}}},this.MoveUp=function(){var t=e.CurrentList,n=e.Index;if(0!==n){var i=e.OrderMGI.OrderItems,s=e.OrderMGI.OrderValues,r=s.indexOf(t[n].FullValue),a=s.indexOf(t[n-1].FullValue);vt(t,n,n-1),vt(i,r,a)}},this.MoveDown=function(){var t=e.CurrentList,n=e.Index;if(t.length-1!==n){var i=e.OrderMGI.OrderItems,s=e.OrderMGI.OrderValues,r=s.indexOf(t[n].FullValue),a=s.indexOf(t[n+1].FullValue);vt(t,n,n+1),vt(i,r,a)}},this.AddSub=function(){$s(e,e.Table)},this.Delete=function(){var t=e.SupItem,n=e.CurrentList;(e.IsCreatedByUser?e.MassGroupItem.GetItem(e.FullValue).Delete():e.MassGroupItem.AddNotIncludeValue(e.FullValue),n.splice(e.Index,1),t)&&(0===n.length?(t?e.Table.MainRows:t.CurrentList).splice(t.Index,1):t.Cells.forEach((function(t){t.UpdateData(!0)})))},this.ReplaceOK=function(){var t=e.ReplaceFactory,n=t.ReferenceRow;if(n){var i=t.Location;n===e&&i===ss||n===e.SupItem&&i===is||(e.Replace(n,i),t.Location=is)}},this.Replace_SubItems=function(){e.Temp_SelectSubItems.forEach((function(t){t.Replace(e,is)}))},this.Replace=function(t,n){var i;e.IsReplaced=!0;e.Original_SupRow;var s=e.MassGroupItem,r=void 0;switch(n){case is:r=t;break;case ss:r=t.SupItem}if(e.SupItem!==r){var a=r?r.Replace_SubMassGroupItem?r.Replace_SubMassGroupItem:Xs(r):e.Table.MainMGI,c=s.GetItem(e.FullValue);c.NewMGI=a,c.SupValue=null===(i=r)||void 0===i?void 0:i.Name,e.ReplaceMGI=a;var o=e.CurrentList;o.splice(e.Index,1);for(var u=e.SupItem;0===o.length;)(o=u?u.CurrentList:e.Table.MainRows).splice(u.Index,1),u=u.SupItem;u&&u.Cells.forEach((function(t){t.UpdateData(!0)})),e.SupItem=r,e.CurrentList.push(e),r&&r.Cells.forEach((function(t){t.UpdateData(!0)})),e.IsShowSubFieldSelect=!1}},this.IsModalVisible=!1,this.OpenModal=function(){e.IsModalVisible=!0,e.TitleVM.Content=e.Title,e.FieldInputVM.Content=e.Field,e.FieldSelectVM.InitialItem=e.Field,e.TempField=e.Field,e.SubFieldSelectVM.InitialItems=e.SubFields,e.Temp_SelectSubItems=void 0,e.SelectSubItemsVM.Items=e.LocationStorageList;var t=e.LocationSelectVM;t.Items=e.LocationStorageList,t.InitialItem=void 0},this.ModalOK=function(){e.IsModalVisible=!1;var t=e.TitleVM.Content;e.Title=t,e.MassGroupItem.GetItem(e.FullValue).Title=t,e.Field!==e.TempField&&(e.Field=e.TempField),e.IsCreatedByUser||e.SetSubFields(),e.Temp_SelectSubItems?e.Replace_SubItems():e.ReplaceOK()},this.ModalCancel=function(){e.IsModalVisible=!1},this.PMS_WorkPackages=["THI C\xd4NG CH\xcdNH (HBC)","C\xd4NG T\xc1C CHU\u1ea8N B\u1eca PH\u1ea6N NG\u1ea6M","C\xd4NG T\xc1C CHU\u1ea8N B\u1eca PH\u1ea6N NG\u1ea6M (PH\u01af\u01a0NG ...)","K\u1ebft th\xfac th\xf4 - B\xe0n giao"],this.AddHandleTotal_Cell=function(t){e.HandleTotal_Cells||(e.HandleTotal_Cells=[]);var n=e.HandleTotal_Cells;n.push(t),n.length===e.Cells.length&&(e.HandleTotal_Cells=void 0,e.Is_HandleTotal_Cells_Done=!0,e.IsCreatedByUser&&e.Table.Add_Handled_CreatedByUser_Row(e))},this.IsHaveAdditionInformation=!1,this.AdditionInformation=void 0,this.Is_SelectSubItems_ModalOpen=!1,this.Open_SelectSubItems_Modal=function(){e.Is_SelectSubItems_ModalOpen=!0},this.SelectSubItems_ModalCancel=function(){e.Is_SelectSubItems_ModalOpen=!1},this.SelectSubItems_ModalOK=function(){e.Is_SelectSubItems_ModalOpen=!1},this.Temp_SelectSubItems=void 0,this.isShow_RawValue=void 0,Object(g.k)(this,{rank:g.l,isShowSub:g.l,isHaveSub:g.l,IsToolVisible:g.l,subItems:g.l,IsModalVisible:g.l,title:g.l,FieldInputType:g.l,IsHaveAdditionInformation:g.l,AdditionInformation:g.l,Is_SelectSubItems_ModalOpen:g.l,Temp_SelectSubItems:g.l,isShow_RawValue:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=ft()),this._id}},{key:"Index",get:function(){return this.CurrentList.indexOf(this)}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t,this.CurrentList=void 0,this.Rank=void 0}},{key:"CurrentList",get:function(){return this.currentList||(this.currentList=this.SupItem?this.SupItem.SubItems:this.Table.MainRows),this.currentList},set:function(t){this.currentList=t}},{key:"Table",get:function(){return this.Dict}},{key:"SubItems",get:function(){return this.subItems},set:function(t){this.subItems=t}},{key:"AllItems",get:function(){var t=[];return t.push(this),this.SubItems.forEach((function(e){t.push.apply(t,e.AllItems)})),t}},{key:"Cells",get:function(){return this.cells||(this.cells=ar(this)),this.cells}},{key:"Items",get:function(){var t=this.Cells.reduce((function(t,e){return t.concat(e.Items)}),[]);return t=t.filter((function(t,e,n){return n.indexOf(t)===e}))}},{key:"MassGroupItem",get:function(){return this.massGroupItem},set:function(t){if(this.massGroupItem=t,t){var e=t.GetItem(this.FullValue).Title;this.Title=e}}},{key:"ReplaceMGI",get:function(){return this.replaceMGI},set:function(t){this.replaceMGI=t}},{key:"Original_SubMassGroupItem",get:function(){return this.original_SubMassGroupItem||(this.original_SubMassGroupItem=Ys(this)),this.original_SubMassGroupItem},set:function(t){this.original_SubMassGroupItem=t}},{key:"Replace_SubMassGroupItem",get:function(){return this.replace_SubMassGroupItem||(this.replace_SubMassGroupItem=Qs(this)),this.replace_SubMassGroupItem},set:function(t){this.replace_SubMassGroupItem=t}},{key:"SubMassGroupItem",get:function(){return this.Replace_SubMassGroupItem?this.Replace_SubMassGroupItem:this.Original_SubMassGroupItem},set:function(t){this.Replace_SubMassGroupItem=t}},{key:"Field",get:function(){return this.field||(this.field=this.MassGroupItem?this.MassGroupItem.Field:void 0),this.field},set:function(t){this.field=t}},{key:"IsReplaced",get:function(){return this.isReplaced},set:function(t){this.isReplaced=t,(this.IsHaveAdditionInformation=ir(this))&&(this.AdditionInformation=sr(this))}},{key:"Original_SupRow",get:function(){return this.original_SupRow||(this.original_SupRow=er(this)),this.original_SupRow},set:function(t){this.original_SupRow=t}},{key:"Original_Full_SupRows",get:function(){return nr(this)}},{key:"OrderMGI",get:function(){return this.ReplaceMGI?this.ReplaceMGI:this.MassGroupItem}},{key:"SubFields",get:function(){return this.subFields||(this.subFields=Zs(this)),this.subFields},set:function(t){this.subFields=t}},{key:"IsShowSub",get:function(){return this.isShowSub},set:function(t){this.isShowSub=t,this.ToggleButtonContentVM.Content=Bs(this)}},{key:"ToggleButtonContent",get:function(){return this.toggleButtonContent||(this.toggleButtonContent=Bs(this)),this.toggleButtonContent},set:function(t){this.toggleButtonContent=t}},{key:"ToggleButtonContentVM",get:function(){var t=this;this.toggleButtonContentVM||((this.toggleButtonContentVM=y(this.ToggleButtonContent)).OnSetContent=function(e){return t.ToggleButtonContent=e});return this.toggleButtonContentVM}},{key:"Rank",get:function(){return void 0===this.rank&&(this.rank=Hs(this)),this.rank},set:function(t){this.rank=t,this.SubItems.forEach((function(t){return t.Rank=void 0}))}},{key:"IsHaveSub",get:function(){return this.isHaveSub||(this.isHaveSub=Us(this)),this.isHaveSub},set:function(t){this.isHaveSub=t}},{key:"Style",get:function(){return Ws(this)}},{key:"FieldInputVM",get:function(){var t=this;this.fieldInputVM||((this.fieldInputVM=y()).onSetContent=function(e){return t.TempField=e});return this.fieldInputVM}},{key:"FieldSelectVM",get:function(){return this.fieldSelectVM||(this.fieldSelectVM=Ks(this)),this.fieldSelectVM}},{key:"FieldInputElement",get:function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"massrow__fieldinput_wrapper",children:[Object(i.jsx)("div",{className:"massrow__fieldinput",children:this.FieldInputType===cs?Object(i.jsx)(Ae,{store:this.FieldSelectVM}):Object(i.jsx)(Ct,{store:this.FieldInputVM})}),this.IsCreatedByUser?Object(i.jsx)(Yi.a,{unCheckedChildren:"inp",checkedChildren:"sel",checked:this.FieldInputType===cs,onChange:this.Toggle_FieldInputType}):""]})})}},{key:"SubFieldSelectVM",get:function(){return this.subFieldSelectVM||(this.subFieldSelectVM=zs(this)),this.subFieldSelectVM}},{key:"Title",get:function(){return this.title},set:function(t){this.title=t,this.TitleVM.Content=t,this.Editable_TitleVM.Content=t}},{key:"TitleVM",get:function(){return this.titleVM||(this.titleVM=y(this.Title,"ti\xeau \u0111\u1ec1")),this.titleVM}},{key:"Editable_TitleVM",get:function(){var t=this;if(!this.editable_TitleVM){var e=this.editable_TitleVM=Lt(this.Title,!0,!0);e.Is_Edit_Visible=!1,bt(e.OnSet_RenderState_Func_Dict,(function(){if(e.RenderState===Dt){var n=t.title=e.Content;t.IsShow_RawValue=cr(t),t.MassGroupItem.GetItem(t.FullValue).Title=n,t.ToolElement.editable_TitleVM_RenderState=e.RenderState}}),!1)}return this.editable_TitleVM}},{key:"LocationStorageList",get:function(){return this.Table.AllRows}},{key:"LocationSelectVM",get:function(){return this.locationSelectVM||(this.locationSelectVM=Js(this)),this.locationSelectVM}},{key:"ReplaceFactory",get:function(){return this.replaceFactory||(this.replaceFactory=new rs),this.replaceFactory}},{key:"PMS_WorkPackages_SelectVM",get:function(){return this.pms_WorkPackages_SelectVM||(this.pms_WorkPackages_SelectVM=Fe(this.PMS_WorkPackages)),this.pms_WorkPackages_SelectVM}},{key:"ModalElement",get:function(){var t=this.ReplaceFactory,e="180px";return Object(i.jsxs)(Ui.a,{title:this.Title,visible:this.IsModalVisible,width:700,onOk:this.ModalOK,onCancel:this.ModalCancel,children:[Object(i.jsxs)(Qi.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(Zi.a,{flex:e,children:Object(i.jsx)("b",{children:" Ti\xeau \u0111\u1ec1:"})}),Object(i.jsx)(Zi.a,{flex:"auto",children:Object(i.jsx)(S,{store:this.TitleVM})})]}),Object(i.jsxs)(Qi.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(Zi.a,{flex:e,children:Object(i.jsx)("b",{children:" Nh\xf3m hi\u1ec7n t\u1ea1i:"})}),Object(i.jsx)(Zi.a,{flex:"auto",children:this.FieldInputElement})]}),this.IsCreatedByUser?"":Object(i.jsxs)(Qi.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(Zi.a,{flex:e,children:Object(i.jsx)("b",{children:" Thi\u1ebft l\u1eadp ph\xe2n nh\xf3m:"})}),Object(i.jsx)(Zi.a,{flex:"auto",children:Object(i.jsx)(Ji,{store:this.SubFieldSelectVM})})]}),Object(i.jsxs)(Qi.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsxs)(Zi.a,{flex:e,className:"mass__modal__title__wrapper",children:[Object(i.jsx)("b",{children:"\u0110\u1ed5i v\u1ecb tr\xed /"}),Object(i.jsx)(m.a,{type:"primary",size:"small",className:this.Temp_SelectSubItems?"mass__modal__title__selectsubitems__button":"",onClick:this.Open_SelectSubItems_Modal,children:"ch\u1ecdn t\u1eadp con"}),this.SelectSubItems_ModalElement]}),Object(i.jsx)(Zi.a,{flex:"auto",children:Object(i.jsxs)(Qi.a,{children:[Object(i.jsx)(Zi.a,{flex:"auto",children:Object(i.jsx)(Ae,{store:this.LocationSelectVM})}),Object(i.jsx)(Zi.a,{children:Object(i.jsx)(m.a,{type:"primary",size:"small",style:t.ButtonStyle,onClick:t.ToggleLocation,children:t.Location})})]})})]})]})}},{key:"HoverToolElement",get:function(){var t=new $i;return t.Element=Object(i.jsx)(gs,{store:this.ToolElement}),Object(i.jsx)(es,{className:"mass__row__hovertool",store:t})}},{key:"ToolElement",get:function(){return this.toolElement||(this.toolElement=rr(this)),this.toolElement}},{key:"AdditionInfomation_Element",get:function(){return Object(i.jsx)(i.Fragment,{children:this.IsHaveAdditionInformation?Object(i.jsx)(Xi.a,{trigger:"hover",content:Object(i.jsx)("span",{className:"info",children:this.AdditionInformation}),children:Object(i.jsx)(ns.a,{className:"info"})}):""})}},{key:"ExportInfo",get:function(){var t,e={Key:this.Field,Value:this.Title};return this.SupItem?(t=Object(O.a)(this.SupItem.ExportInfo)).push(e):t=[e],t}},{key:"ExportValue",get:function(){var t=[];return this.Cells.forEach((function(e){t.push({Key:e.Column.Name,Value:e.TotalValue})})),t}},{key:"ExportData",get:function(){return{Infos:this.ExportInfo,Values:this.ExportValue}}},{key:"On_HandleTotal_Cells_Done_Dict_Funcs",get:function(){return this.on_HandleTotal_Cells_Done_Dict_Funcs||(this.on_HandleTotal_Cells_Done_Dict_Funcs=tr(this)),this.on_HandleTotal_Cells_Done_Dict_Funcs}},{key:"Is_HandleTotal_Cells_Done",set:function(t){this.On_HandleTotal_Cells_Done_Dict_Funcs.forEach((function(t){return t.Value()}))}},{key:"IsHave_Addition_Wrapper",get:function(){return this.IsHaveAdditionInformation||this.IsShow_RawValue}},{key:"SelectSubItems_ModalElement",get:function(){return Object(i.jsx)(Ui.a,{title:"Ch\u1ecdn t\u1eadp h\u1ee3p \u0111\u1ea7u m\u1ee5c con",visible:this.Is_SelectSubItems_ModalOpen,onOk:this.SelectSubItems_ModalOK,onCancel:this.SelectSubItems_ModalCancel,children:Object(i.jsx)("div",{className:"mass__subitemmodal__wrapper",children:Object(i.jsx)(ds,{store:this.SelectSubItemsVM})})})}},{key:"SelectSubItemsVM",get:function(){var t=this;this.selectSubItemsVM||((this.selectSubItemsVM=us([],(function(t){var e=15*t.Rank;return Object(i.jsx)("div",{style:{marginLeft:e},children:t.Title})}),"T\u1eadp h\u1ee3p v\u1ecb tr\xed","V\u1ecb tr\xed \u0111\u01b0\u1ee3c ch\u1ecdn")).OnSelectedItemChanged=function(e){return t.Temp_SelectSubItems=e});return this.selectSubItemsVM}},{key:"IsShow_RawValue",get:function(){return this.isShow_RawValue||(this.isShow_RawValue=cr(this)),this.isShow_RawValue},set:function(t){this.isShow_RawValue=t}},{key:"RawValue_Element",get:function(){return Object(i.jsx)(i.Fragment,{children:this.IsShow_RawValue?Object(i.jsx)(Xi.a,{trigger:"hover",content:Object(i.jsx)("span",{className:"success",children:this.RawValue}),children:Object(i.jsx)(ns.a,{className:"success"})}):""})}}]),t}(),bs=function(){function t(){var e=this;Object(o.a)(this,t),this.items=[],this.OnGet_TotalValue_Func_Dict=[],this.totalValue=void 0,this.AsString=function(){console.log("".concat(e.Column.Name," - ").concat(e.Row.Name," - ").concat(e.TotalValue))},this.UpdateData=function(t){var n=e.TotalValue;e.SubCells=Ns(e),e.Unit=Ds(e),ws(e),e.MassType=Vs(e),e.IsHaveVCS_Item=Ss(e),t&&n!==e.TotalValue&&e.SupItem&&e.SupItem.UpdateData(t)},this.ShowDetail=function(){var t="".concat("/BIM_Database").concat("/#","/massdetail"),n=function(e){return window.open(function(e){return"".concat(t,"/").concat(e)}(e),"_blank")};e.viewDetailId?n(e.viewDetailId):e.GetViewDetailId((function(t){var i=e.viewDetailId=t._id;n(i)}))},this.vcs_Item=void 0,this.valueColor="#1890ff",this.tdBgColor=void 0,this.ApiData=function(){var t;e.Table.ColumnField===W&&(t=e.Column.Data._id);var n=e.AllItems.map((function(t){return t._id}));return{massType:e.MassType,massIds:n,phaseId:t}},this.GetViewDetailId=function(t){var n=e.ApiData();N("https://api.bimdev.vn/api/hbdv/updatemass",n).then((function(t){return t.data})).then((function(e){return t(e)}))},this.OnGet_TLS_LevelGroups_Func_Dict=[],this.isHaveWarning=void 0,this.tls_LevelGroup_Descriptions=void 0,Object(g.k)(this,{valueColor:g.l,tdBgColor:g.l,isHaveWarning:g.l,tls_LevelGroup_Descriptions:g.l,vcs_Item:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=ft()),this._id}},{key:"Table",get:function(){return this.Dict}},{key:"ColumnIndex",get:function(){return this.Column.Index}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t}},{key:"Unit",get:function(){return this.unit||(this.unit=Ts(this)),this.unit},set:function(t){this.unit=t}},{key:"UnitVM",get:function(){var t=this;return this.unitVM||(this.unitVM=y(this.Unit),this.unitVM.OnSetContent=function(e){return t.Unit=e}),this.unitVM}},{key:"CanHave_TotalValue",get:function(){return void 0!==this.Unit}},{key:"Get_TotalValue",set:function(t){var e=this;yt(this.OnGet_TotalValue_Func_Dict,(function(t){return e.OnGet_TotalValue_Func_Dict=t}))}},{key:"TotalValue",get:function(){return void 0===this.totalValue&&Fs(this),this.totalValue},set:function(t){this.totalValue=t,this.Row.AddHandleTotal_Cell(this),this.Get_TotalValue=!0,this.IsHaveVCS_Item&&ks(this),this.ContentVM.Content=this.ValueString}},{key:"ContentVM",get:function(){return this.contentVM||(this.contentVM=y(this.ValueString)),this.contentVM}},{key:"ValueObject",get:function(){return this.valueObject||(this.valueObject=Rs(this)),this.valueObject}},{key:"ValueString",get:function(){return Ps(this)}},{key:"SupItem",get:function(){return this.supItem||(this.supItem=Ls(this)),this.supItem},set:function(t){this.supItem=t}},{key:"SubCells",get:function(){return this.subCells||(this.subCells=Ns(this)),this.subCells},set:function(t){this.subCells=t}},{key:"MassType",get:function(){return this.massType||(this.massType=Vs(this)),this.massType},set:function(t){this.massType=t}},{key:"AllItems",get:function(){return this.SubCells?this.SubCells.map((function(t){return t.Items})).reduce((function(t,e){return t.concat(e)}),[]):this.Items}},{key:"IsHaveVCS_Item",get:function(){return this.isHaveVCS_Item||(this.isHaveVCS_Item=Ss(this)),this.isHaveVCS_Item},set:function(t){this.isHaveVCS_Item=t}},{key:"VCS_Item",get:function(){return this.vcs_Item},set:function(t){this.vcs_Item=t,this.ValueColor=Os(this),this.TDBgColor=Ms(this)}},{key:"ValueColor",get:function(){return this.valueColor},set:function(t){this.valueColor=t}},{key:"TDBgColor",get:function(){return this.tdBgColor},set:function(t){this.tdBgColor=t}},{key:"AStyle",get:function(){return{color:this.ValueColor,fontWeight:"bold"}}},{key:"TDStyle",get:function(){return{backgroundColor:this.TDBgColor}}},{key:"Get_TLS_LevelGroups",set:function(t){this.OnGet_TLS_LevelGroups_Func_Dict.forEach((function(t){return t.Value()}))}},{key:"TLS_LevelGroups",get:function(){return this.tls_LevelGroups||Cs(this),this.tls_LevelGroups},set:function(t){this.tls_LevelGroups=t,this.Get_TLS_LevelGroups=!0}},{key:"IsHaveWarning",get:function(){return void 0===this.isHaveWarning&&(this.isHaveWarning=xs(this)),this.isHaveWarning},set:function(t){this.isHaveWarning=t}},{key:"TLS_LevelGroup_Descriptions",get:function(){return this.tls_LevelGroup_Descriptions||Gs(this),this.tls_LevelGroup_Descriptions},set:function(t){this.tls_LevelGroup_Descriptions=t}}]),t}(),_s=function t(){Object(o.a)(this,t),this.Value=void 0,Object(g.k)(this,{Value:g.l})},ys=function(){return ou.Instance},js=function(t,e,n){var i=new bs;return i.Column=t,i.Row=e,i.Dict=n,t.Cells.push(i),e.Cells.push(i),i},Ss=function(t){return t.Dict.ColumnField===W&&2===ys().MassResultComp.Phases.length&&1===t.ColumnIndex},Os=function(t){return t.IsHaveVCS_Item&&t.VCS_Item?"#FFFFFF":"#1890ff"},Ms=function(t){return t.IsHaveVCS_Item&&t.VCS_Item?t.VCS_Item.Color:"#FFFFFF"},ks=function(t){var e=ys().VersionCompareSetting.Items,n=t.Row.Cells,i=n.findIndex((function(t){return 0===t.ColumnIndex}));if(-1!==i){var s=n[i],r=function(){var n=t.TotalValue/s.TotalValue,i=e.findIndex((function(t){return Zt(t.Filter,n)}));return-1!==i?e[i]:void 0};void 0!==s.TotalValue?t.VCS_Item=r():bt(s.OnGet_TotalValue_Func_Dict,(function(){return t.VCS_Item=r()}))}else t.VCS_Item=void 0},Vs=function(t){var e=void 0;if(t.SubCells){var n=!0;t.SubCells.forEach((function(t){n&&t.MassType&&(e=t.MassType,n=!1)}))}else t.Items&&t.Items.length>0&&(e=t.Items[0].MassType);return e},Cs=function(t){if(!t.IsGet_TLS_LevelGroups){t.IsGet_TLS_LevelGroups=!0;var e=[],n=0,i=t.SubCells?t.SubCells.length:t.Items.length,s=function(t,e){-1===e.findIndex((function(e){return e.id===t.id}))&&e.push(t)},r=function(r){n++,r&&(Array.isArray(r)?r.forEach((function(t){return s(t,e)})):s(r,e)),n===i&&(t.TLS_LevelGroups=e)};t.SubCells?t.SubCells.forEach((function(t){t.TLS_LevelGroups?r(t.TLS_LevelGroups):bt(t.OnGet_TLS_LevelGroups_Func_Dict,(function(){return r(t.TLS_LevelGroup)}))})):t.Items.forEach((function(e){var n=e;t.Dict.ColumnField===W&&(n=e.GetPhaseItem(t.Column.Name)),n.TLS_LevelGroup||n.Get_TLS_LevelGroup?r(n.TLS_LevelGroup):bt(n.OnGet_TLS_LevelGroup_Func_Dict,(function(){return r(n.TLS_LevelGroup)}))}))}},Ds=function(t){return t.IsGet_Unit=!1,Ts(t)},Ts=function(t){if(!t.IsGet_Unit){var e;t.IsGet_Unit=!0;var n=!0;return(t.SubCells?t.SubCells:t.Items).forEach((function(t,i,s){if(n)if(0==i)e=t.Unit;else if(e!==t.Unit)return n=!1,!1})),n||(e=void 0),e}},ws=function(t){t.IsGet_TotalValue=!1,Fs(t)},Fs=function(t){if(!t.IsGet_TotalValue&&(t.IsGet_TotalValue=!0,t.CanHave_TotalValue)){var e=[],n=0,i=0,s=[],r=(t.SubCells?t.SubCells:t.Items).length,a=function(a,c){-1===s.indexOf(c)&&(s.push(c),i++,Number.isNaN(a)||(n+=a),e.push(a),i===r&&(t.TotalValue=n))};t.SubCells?t.SubCells.forEach((function(t){t.TotalValue?a(t.TotalValue,t):_t(t.OnGet_TotalValue_Func_Dict,(function(){a(t.TotalValue,t)}))})):t.Items.forEach((function(e){var n=e;t.Dict.ColumnField===W&&(n=e.GetPhaseItem(t.Column.Name)),void 0!==n.FullValue?a(n.FullValue,e):_t(n.OnGet_FullValue_Func_Dict,(function(){a(n.FullValue,e)}))}))}},xs=function(t){if(t.Row.Field!==Y)return!1;var e=function(t){return 0!==t.length};if(t.TLS_LevelGroups)return e(t.TLS_LevelGroups);bt(t.OnGet_TLS_LevelGroups_Func_Dict,(function(){t.IsHaveWarning=e(t.TLS_LevelGroups)}))},Gs=function(t){if(!t.IsGet_TLS_LevelGroup_Descriptions){t.IsGet_TLS_LevelGroup_Descriptions=!0;var e=function(e,n,i,s){i++,-1===n.indexOf(e)&&n.push(e),i===s&&(t.TLS_LevelGroup_Descriptions=n)},n=function(t){var n=[],i=t.length;t.forEach((function(t){t.FullDescription?e(t.FullDescription,n,0,i):bt(t.OnGetLevelStorageList_Func_Dict,(function(){e(t.FullDescription,n,0,i)}),!1)}))};t.TLS_LevelGroups?n(t.TLS_LevelGroups):t.OnGet_TLS_LevelGroups_Funcs.push((function(){n(t.TLS_LevelGroups)}))}},Ls=function(t){if(!t.IsGet_SupItem){t.IsGet_SupItem=!0;var e=t.Row.SupItem;if(e){var n=e.Cells,i=n.findIndex((function(e){return e.Column===t.Column}));return-1!==i?n[i]:void 0}}},Ns=function(t){var e=t.Row.SubItems;if(e&&0!==e.length){var n=t.Column;return e.map((function(t,e,i){return t.GetCellByColumn(n)})).filter((function(t){return void 0!==t}))}},Rs=function(t){var e=new _s;return e.Dict=t,e},Ps=function(t){if(!t.CanHave_TotalValue)return"";var e=t.TotalValue;if(!e)return"";var n=2,i=t.Unit;switch(i){case"each":i="c\xe1i",n=0;break;default:n=2}var s=e.toLocaleString("en-US",{maximumFractionDigits:n});return"".concat(s," ").concat(i)},Es=function(){return ou.Instance},As=function(t,e){var n=new Is;return n.Name=t,n.Dict=e,n},Hs=function(t){return t.SupItem?t.SupItem.Rank+1:0},Ws=function(t){return{marginLeft:20*t.Rank}},Us=function(t){return 0!==t.SubItems.length},Bs=function(t){return t.IsShowSub?"-":"+"},Ks=function(t){var e=Es().MIFs_ForMassGroup,n=Fe(e,t.Field);return n.Placeholder="ch\u1ecdn nh\xf3m",n.IsDisabled=!t.IsCreatedByUser,n.OnSelectedItemChanged=function(e){return t.TempField=e},n},zs=function(t){var e=Es().MIFs_ForMassGroup,n=Bi(e,void 0);return n.Placeholder="ch\u1ecdn ph\xe2n nh\xf3m",n.OnSelectedItemChanged=function(e){return t.TempSubFields=e},n},qs=function(t){if(0===t.length)return t;var e=t[0].OrderMGI;if(!e.IsHaveValueOrder)return t;var n=e.OrderValues;return t.sort((function(t,e){return n.indexOf(t.FullValue)-n.indexOf(e.FullValue)}))},Js=function(t){var e=Fe([],void 0);return e.Placeholder="ch\u1ecdn v\u1ecb tr\xed",e.TitleRender=function(t){var e=15*t.Rank;return Object(i.jsx)("div",{style:{marginLeft:e},children:t.Title})},e.OnSelectedItemChanged=function(e){t.ReplaceFactory.ReferenceRow=e},e},Ys=function(t){var e=t.SubItems;if(0!==e.length)return e[0].MassGroupItem},Qs=function(t){var e=t.SubItems;if(0!==e.length)return e[0].ReplaceMGI},Zs=function(t){var e=t.SubMassGroupItem;if(!e)return[];var n=e.SupComponent.Items,i=-1,s=!0;n.forEach((function(t,e){s&&0===t.HaveMassItemSubComponents.length?i=e:s=!1}));var r=n.indexOf(t.MassGroupItem);return-1===i?[e.Field]:n.filter((function(t,e){return(-1===r||r<e)&&e<=i})).map((function(t){return t.Field}))},Xs=function(t){var e=new Xt;e.ValueType=At,e.StringFilterType=Wt,e.Values=[t.FullValue];var n=t.MassGroupItem,i=void 0,s=n.SubComponents.findIndex((function(t){return gt(t.Filter.Values,e.Values)}));-1!==s?i=n.SubComponents[s]:((i=new Gi).SubItem=n,i.Filter=e,n.SubComponents.push(i));var r=Pi(null,null,i);return i.Items=[r],t.SubMassGroupItem=r,r},$s=function(t,e){var n=t?t.SubMassGroupItem?t.SubMassGroupItem:Xs(t):e.MainMGI,i=ee(n,$t);i.SupValue=null===t||void 0===t?void 0:t.Name,n.Items.push(i);var s=As(i.Value,e);s.FullValue=i.Value,s.IsCreatedByUser=!0;s.Cells;return s.MassGroupItem=n,s.SupItem=t,s.CurrentList.push(s),s.Editable_TitleVM.RenderState=Tt,s},tr=function(t){return[]},er=function(t){if(!t.IsGet_Original_SupRow)return t.IsGet_Original_SupRow=!0,t.SupItem},nr=function(t){for(var e=[],n=t.Original_SupRow;n;)e.push(n),n=n.Original_SupRow;return e.reverse(),e},ir=function(t){return!!t.IsReplaced},sr=function(t){return t.Original_Full_SupRows.reduce((function(t,e,n){return 0!=n&&(t+=" > "),t+=e.Title}),"")},rr=function(t){var e=new fs;return e.Dict=t,e},ar=function(t){if(!t.IsCreatedByUser)return[];var e=t.Table;return e.Columns.map((function(n){var i=new bs;return i.Column=n,i.Row=t,i.Dict=e,e.Cells.push(i),i}))},cr=function(t){return!t.IsCreatedByUser&&t.RawValue!==t.Title},or=function(t){return t.MassGroupSetting?t.MassGroupSetting.Name:""},ur=function(t){var e,n=null===(e=t.MainMGC)||void 0===e?void 0:e.Items[0];return n.Table=t,n.SupRow=void 0,n},lr=function(){function t(){var e=this;Object(o.a)(this,t),this.AddNewField=function(){var t=ou.Instance.MassPropertyNames[0];return e.Fields.push(t),t}}return Object(u.a)(t,[{key:"Fields",get:function(){return this.fields||(this.fields=dr(this)),this.fields},set:function(t){this.fields=t}}]),t}(),hr="Category",dr=function(){return[hr]},fr=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}($e),pr=function(t,e){var n=new fr;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=function(t){var e=new lr;return e.MassGroupComponent=Li(t.massGroupComponent),e}(t.data),n.Dict=e,n},mr=function(){function t(){var e=this;Object(o.a)(this,t),this.code=void 0,this.name=void 0,this.description=void 0,this.fullName=void 0,this.Delete=function(){e.Dict.WorkpackageVMs.splice(e.Index,1)},this.AsString=function(){console.log(e.Name,e.Code,e.Description)},Object(g.k)(this,{fullName:g.l})}return Object(u.a)(t,[{key:"_id",get:function(){return this.Workpackage._id}},{key:"Index",get:function(){return this.Dict.WorkpackageVMs.indexOf(this)}},{key:"M2VM",get:function(){return this.Workpackage.M2VM},set:function(t){this.Workpackage.M2VM=t}},{key:"SupItem",get:function(){return this.supItem||(this.supItem=gr(this)),this.supItem}},{key:"Code",get:function(){return this.code||(this.code=this.Workpackage.Code),this.code},set:function(t){this.code=t,this.M2VM||(this.Workpackage.Code=t)}},{key:"Name",get:function(){return this.name||(this.name=this.Workpackage.Name),this.name},set:function(t){this.name=t,this.M2VM||(this.Workpackage.Name=t)}},{key:"Description",get:function(){return this.description||(this.description=this.Workpackage.Description),this.description},set:function(t){this.description=t,this.M2VM||(this.Workpackage.Description=t)}},{key:"FullName",get:function(){return this.fullName||(this.fullName=this.Workpackage.FullName),this.fullName},set:function(t){this.fullName=t}},{key:"SearchName",get:function(){return this.FullName}},{key:"DisplayContent",get:function(){return this.FullName}},{key:"CodeVM",get:function(){var t=this;this.codeVM||((this.codeVM=y(this.Code,"m\xe3 code")).onSetContent=function(e){return t.Code=e});return this.codeVM}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=y(this.Name,"t\xean c\xf4ng t\xe1c")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=y(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}}]),t}(),vr=function(t,e){var n=new mr;return n.Workpackage=t,n.Dict=e,t.OnCodeChanged=function(e){t.M2VM&&(n.Code=e)},t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnFullNameChanged=function(e){t.M2VM&&(n.FullName=e)},t.OnDelete=function(){n.Delete()},n},gr=function(t){var e=t.Workpackage.SupItem,n=Pc.Instance.Workpackage_DictVM.WorkpackageVMs,i=n.findIndex((function(t){return t.Workpackage===e}));return-1!==i?n[i]:void 0},Ir=function(){function t(){Object(o.a)(this,t),this.Cancel=!1,this.ischecked=void 0,this.isDisable=!1,Object(g.k)(this,{ischecked:g.l,isDisable:g.l,Cancel:g.l})}return Object(u.a)(t,[{key:"Ischecked",set:function(t){this.ischecked=t,this.onCheckChange&&this.onCheckChange(t)}}]),t}(),br=function(t,e){var n=new Ir;return n.ischecked=e,n.name=t,n},_r=function(){function t(){var e=this;Object(o.a)(this,t),this.code=void 0,this.name=void 0,this.description=void 0,this.supItem=void 0,this.workpackageVMStorageList=void 0,this.isNew=void 0,this.commandName=void 0,this.AsString=function(){return"".concat(e.Code," ").concat(e.Name," ").concat(e.Description," ").concat(e.IsNew)},this.AddDatabase=function(){e.WorkpackageInput.AddDatabase()},this.DeleteFunc=function(){e.WorkpackageVM.Workpackage.Delete(),e.WorkpackageVM=void 0},this.Clear=function(){e.CodeVM.Content=null,e.NameVM.Content=null,e.DescriptionVM.Content=null,e.IsNewVM.Ischecked=!0},Object(g.k)(this,{isNew:g.l})}return Object(u.a)(t,[{key:"Code",get:function(){return this.code||(this.code=this.WorkpackageInput.Code),this.code},set:function(t){this.code=t,this.WorkpackageInput.Code=t}},{key:"Name",get:function(){return this.name||(this.name=this.WorkpackageInput.Name),this.name},set:function(t){this.name=t,this.WorkpackageInput.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.WorkpackageInput.Description),this.description},set:function(t){this.description=t,this.WorkpackageInput.Description=t}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t;var e=this.WorkpackageInput;e.SupItem=t?t.Workpackage:t}},{key:"WorkpackageVMStorageList",get:function(){return this.workpackageVMStorageList||(this.workpackageVMStorageList=Sr(this)),this.workpackageVMStorageList},set:function(t){this.workpackageVMStorageList=t;var e=this.SupItemSelectVM;e.Items=t,e.InitialItem=this.SupItem}},{key:"SupItemSelectVM",get:function(){var t=this;if(!this.supItemSelectVM){var e=this.supItemSelectVM=Fe(this.WorkpackageVMStorageList,this.SupItem);e.Placeholder="c\xf4ng t\xe1c cha",e.CanClear=!0,e.OnSelectedItemChanged=function(e){return t.SupItem=e}}return this.supItemSelectVM}},{key:"IsNew",get:function(){return void 0===this.isNew&&(this.isNew=this.WorkpackageInput.IsNew),this.isNew},set:function(t){this.isNew=t,this.CommandVM.Content=jr(this),this.WorkpackageInput.IsNew=t}},{key:"CommandName",get:function(){return this.commandName||(this.commandName=jr(this)),this.commandName},set:function(t){this.commandName=t}},{key:"WorkpackageVM",get:function(){return this.workpackageVM},set:function(t){if(this.workpackageVM=t,t){this.WorkpackageInput.Workpackage=t.Workpackage;var e=t.Code,n=t.Name,i=t.Description,s=t.SupItem;this.CodeVM.Content=e,this.NameVM.Content=n,this.DescriptionVM.Content=i,this.SupItemSelectVM.InitialItem=s,this.IsNewVM.Ischecked=!1}else this.WorkpackageInput.Workpackage=t,this.IsNewVM.Ischecked=!0}},{key:"CodeVM",get:function(){var t=this;this.codeVM||((this.codeVM=y(this.Code,"m\xe3 code")).onSetContent=function(e){return t.Code=e});return this.codeVM}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=y(this.Name,"t\xean c\xf4ng t\xe1c")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=y(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}},{key:"IsNewVM",get:function(){var t=this;if(!this.isNewVM){var e=this.isNewVM=br("C\xf4ng t\xe1c m\u1edbi",this.IsNew);e.isDisable=!0,e.onCheckChange=function(n){t.IsNew=n,e.isDisable=!!n}}return this.isNewVM}},{key:"CommandVM",get:function(){var t=this;this.commandVM||((this.commandVM=y(this.CommandName)).onSetContent=function(e){return t.CommandName=e});return this.commandVM}},{key:"DeleteView",get:function(){return this.IsNew?"":Object(i.jsx)(m.a,{onClick:this.DeleteFunc,children:"Delete"})}}]),t}(),yr=function(){return Pc.Instance},jr=function(t){return t.IsNew?"Create":"Edit"},Sr=function(t){return yr().Workpackage_DictVM.WorkpackageVMs},Or=function(t){return function(t,e){var n=new _r;return n.WorkpackageInput=t,n.Dict=e,yr().Workpackage_DictVM.OnGetItemsDone_Funcs.push((function(){n.WorkpackageVMStorageList=Sr(n)})),t.OnAddDatabaseDone=function(t){var e=n.CommandName;T.b.success("".concat(e," workpackage successfully"))},e.OnAdd=function(t){n.WorkpackageVM=t},n}(t.Workpackage_Dict.WorkpackageInput,t)},Mr=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"M2VM",get:function(){return this.ModelItem.M2VM},set:function(t){this.ModelItem.M2VM=t}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Items",get:function(){return this.items||(this.items=Nr(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,t?(this.ModelItem.CurrentItem=t.ModelItem,this.Input.EditItem=t):this.ModelItem.CurrentItem=t}},{key:"Input",get:function(){return this.input||(this.input=Rr(this)),this.input}}]),t}(),kr=function(){function t(){var e=this;Object(o.a)(this,t),this.name=void 0,this.GetDataVM=function(){if(e.OnGetDataVM)return e.OnGetDataVM()},this.Delete=function(){e.Dict.Items.splice(e.Index,1)},Object(g.k)(this,{name:g.l})}return Object(u.a)(t,[{key:"_id",get:function(){return this.ModelItem._id}},{key:"M2VM",get:function(){return this.ModelItem.M2VM},set:function(t){this.ModelItem.M2VM=t}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.M2VM||(this.ModelItem.Name=t)}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=y(this.Name,"t\xean thi\u1ebft l\u1eadp ...")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.M2VM||(this.ModelItem.Description=t)}},{key:"SettingType",get:function(){return this.settingType||(this.settingType=this.ModelItem.SettingType),this.settingType},set:function(t){this.settingType=t,this.ModelItem.SettingType=t}},{key:"SearchName",get:function(){return this.Name}},{key:"DisplayContent",get:function(){return this.Name}},{key:"Data",get:function(){return this.data||(this.data=this.ModelItem.Data),this.data},set:function(t){this.data=t,this.M2VM||(this.ModelItem.Data=t)}},{key:"DataVM",get:function(){return this.dataVM||(this.dataVM=this.GetDataVM()),this.dataVM},set:function(t){this.dataVM=t,t&&this.OnInitialSetDataVM&&this.OnInitialSetDataVM(t),this.M2VM||(this.Data=t?t.ModelItem:t)}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}}]),t}(),Vr=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){var e=t.CategoryFilterVM;e&&e.OnInitialData();var n=t.FamilyFilterVM;n&&n.OnInitialData()},t}return n}(kr),Cr=function(){function t(){var e=this;Object(o.a)(this,t),this.SetData=function(t){if(t){var n=t.ValueType,i=(t.NumberFilterType,t.StringFilterType),s=t.Values;e.ValueTypeSelectVM.InitialItem=n,e.StringFilterTypeSelectVM.InitialItem=i,e.ValuesSelectVM.InitialItems=s}},this.OnInitialData=function(){e.ValueType,e.NumberFilterType,e.StringFilterType,e.Values},Object(g.k)(this,{})}return Object(u.a)(t,[{key:"pmDataVM",get:function(){return Pc.Instance}},{key:"ValueType",get:function(){return this.valueType||(this.valueType=this.ModelItem.ValueType),this.valueType},set:function(t){this.valueType=t,this.ModelItem.ValueType=t}},{key:"NumberFilterType",get:function(){return this.numberFilterType||(this.numberFilterType=this.ModelItem.NumberFilterType),this.numberFilterType},set:function(t){this.numberFilterType=t,this.ModelItem.NumberFilterType=t}},{key:"StringFilterType",get:function(){return this.stringFilterType||(this.stringFilterType=this.ModelItem.StringFilterType),this.stringFilterType},set:function(t){this.stringFilterType=t,this.ModelItem.StringFilterType=t}},{key:"Values",get:function(){return this.values||(this.values=this.ModelItem.Values),this.values},set:function(t){this.values=t,this.ModelItem.Values=t}},{key:"ValueStorageList",get:function(){return this.valueStorageList||(this.valueStorageList=this.ModelItem.ValueStorageList),this.valueStorageList}},{key:"ValueTypeSelectVM",get:function(){var t=this;this.valueTypeSelectVM||((this.valueTypeSelectVM=Fe(this.pmDataVM.FilterValueTypes,this.ValueType)).OnSelectedItemChanged=function(e){t.ValueType=e});return this.valueTypeSelectVM}},{key:"StringFilterTypeSelectVM",get:function(){var t=this;this.stringFilterTypeSelectVM||((this.stringFilterTypeSelectVM=Fe(this.pmDataVM.StringFilterTypes,this.StringFilterType)).OnSelectedItemChanged=function(e){t.StringFilterType=e});return this.stringFilterTypeSelectVM}},{key:"ValuesSelectVM",get:function(){var t=this;if(!this.valuesSelectVM){var e=this.valuesSelectVM=Bi(this.ValueStorageList,this.Values);this.ValueSelectPlaceholder&&(e.Placeholder=this.ValueSelectPlaceholder),e.OnSelectedItemChanged=function(e){t.Values=e}}return this.valuesSelectVM}}]),t}(),Dr=function(t){if(t){var e=new Cr;return e.ModelItem=t,e}},Tr=function(){function t(){var e=this;Object(o.a)(this,t),this.GetCategoryFilterVM=function(){var t=e.ModelItem.CategoryFilter;return Dr(t)},this.isHaveFamilyFilter=void 0,this.GetFamilyFilterVM=function(){var t=e.ModelItem.FamilyFilter;return Dr(t)},this.SetData=function(t){e.CategoryFilterVM.SetData(t.CategoryFilterVM);var n=!0===t.IsHaveFamilyFilter;e.IsHaveFamilyFilterVM.Ischecked=n,e.FamilyFilterVM.SetData(t.FamilyFilterVM)},Object(g.k)(this,{isHaveFamilyFilter:g.l})}return Object(u.a)(t,[{key:"CategoryFilterVM",get:function(){return!this.categoryFilterVM&&this.ModelItem&&(this.categoryFilterVM=this.GetCategoryFilterVM()),this.categoryFilterVM}},{key:"IsHaveFamilyFilter",get:function(){return this.isHaveFamilyFilter||(this.isHaveFamilyFilter=this.ModelItem.IsHaveFamilyFilter),this.isHaveFamilyFilter},set:function(t){this.isHaveFamilyFilter=t,this.ModelItem.IsHaveFamilyFilter=t}},{key:"FamilyFilterVM",get:function(){return!this.familyFilterVM&&this.ModelItem&&(this.familyFilterVM=this.GetFamilyFilterVM()),this.familyFilterVM}},{key:"IsHaveFamilyFilterVM",get:function(){var t=this;this.isHaveFamilyFilterVM||((this.isHaveFamilyFilterVM=br("Thi\u1ebft l\u1eadp l\u1ecdc Family",this.IsHaveFamilyFilter)).onCheckChange=function(e){t.IsHaveFamilyFilter=e});return this.isHaveFamilyFilterVM}}]),t}(),wr=function(t){var e=new Tr;return e.ModelItem=t,e},Fr=function(t,e){var n=new Vr;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){var e=t.Data;return wr(e)},n},xr=function(t){return t.IsNew?"Create":"Edit"},Gr=function(){function t(){var e=this;Object(o.a)(this,t),this.dataVM=void 0,this.GetDataVM=function(){if(e.OnGetDataVM)return e.OnGetDataVM()},this.isNew=void 0,this.commandName=void 0,this.DeleteFunc=function(){e.EditItem.ModelItem.Delete(),e.EditItem.Delete(),e.EditItem=void 0},this.AddDatabase=function(){e.ModelItem.AddDatabase()},Object(g.k)(this,{dataVM:g.l,isNew:g.l})}return Object(u.a)(t,[{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"SettingType",get:function(){return this.settingType||(this.settingType=this.ModelItem.SettingType),this.settingType},set:function(t){this.settingType=t,this.ModelItem.SettingType=t}},{key:"SearchName",get:function(){return this.Name}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=y(this.Name,"t\xean b\u1ed9 l\u1ecdc")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=y(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}},{key:"SettingTypeVM",get:function(){var t=this;this.settingTypeVM||((this.settingTypeVM=y(this.SettingType,"lo\u1ea1i thi\u1ebft l\u1eadp")).onSetContent=function(e){return t.SettingType=e});return this.settingTypeVM}},{key:"DataVM",get:function(){return this.dataVM||(this.dataVM=this.GetDataVM()),this.dataVM},set:function(t){this.DataVM.SetData&&this.DataVM.SetData(t)}},{key:"EditItem",get:function(){return this.editItem},set:function(t){this.editItem=t;var e=this.ModelItem;if(t){e.EditItem=t.ModelItem;var n=t.Name,i=t.Description,s=t.SettingType;this.NameVM.Content=n,this.DescriptionVM.Content=i,this.SettingTypeVM.Content=s,this.DataVM=t.DataVM,this.IsNewVM.Ischecked=!1}else e.EditItem=t,this.IsNewVM.Ischecked=!0}},{key:"IsNew",get:function(){return void 0===this.isNew&&(this.isNew=this.ModelItem.IsNew),this.isNew},set:function(t){this.isNew=t,this.CommandVM.Content=xr(this),this.ModelItem.IsNew=t}},{key:"IsNewVM",get:function(){var t=this;if(!this.isNewVM){var e=this.isNewVM=br("Thi\u1ebft l\u1eadp m\u1edbi",this.IsNew);e.isDisable=!0,e.onCheckChange=function(n){t.IsNew=n,e.isDisable=!!n}}return this.isNewVM}},{key:"CommandName",get:function(){return this.commandName||(this.commandName=xr(this)),this.commandName},set:function(t){this.commandName=t}},{key:"CommandVM",get:function(){var t=this;this.commandVM||((this.commandVM=y(this.CommandName)).onSetContent=function(e){return t.CommandName=e});return this.commandVM}},{key:"DeleteView",get:function(){return this.IsNew?"":Object(i.jsx)(m.a,{onClick:this.DeleteFunc,children:"Delete"})}}]),t}(),Lr=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Gr),Nr=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Fr(e,t)}))},Rr=function(t){return function(t,e){var n=new Lr;return n.ModelItem=t,n.Dict=e,t.OnAddDatabaseDone=function(t){var e=n.CommandName;T.b.success("".concat(e," element filter setting successfully"))},n.OnGetDataVM=function(){var e=t.Data;return wr(e)},n}(t.ModelItem.Input,t)},Pr=function(){function t(){var e=this;Object(o.a)(this,t),this.workpackageVMStorageList=void 0,this.Delete=function(){e.ModelItem.Delete(),e.Dict.ValueSettingVMs.splice(e.Index,1)},this.SetData=function(t){e.RetrieveTypeSelectVM.InitialItem=t.RetrieveType,e.ValueFilterVM.SetData(t.ValueFilterVM),e.WorkpackageSelectVM.InitialItem=t.WorkpackageVM,e.MassTypeSelectVM.InitialItem=t.MassType}}return Object(u.a)(t,[{key:"Index",get:function(){return this.Dict.ValueSettingVMs.indexOf(this)}},{key:"RetrieveType",get:function(){return this.retrieveType||(this.retrieveType=this.ModelItem.RetrieveType),this.retrieveType},set:function(t){this.retrieveType=t,this.ModelItem.RetrieveType=t}},{key:"RetrieveTypeStorageList",get:function(){return Hr(this)}},{key:"RetrieveTypeSelectVM",get:function(){var t=this;this.retrieveTypeSelectVM||((this.retrieveTypeSelectVM=Fe(this.RetrieveTypeStorageList,this.RetrieveType)).OnSelectedItemChanged=function(e){return t.RetrieveType=e});return this.retrieveTypeSelectVM}},{key:"ValueFilterVM",get:function(){this.valueFilterVM||((this.valueFilterVM=Dr(this.ModelItem.ValueFilter)).ValueSelectPlaceholder="gi\xe1 tr\u1ecb parameter");return this.valueFilterVM},set:function(t){this.valueFilterVM=t,this.ModelItem.ValueFilter=t?t.ModelItem:t}},{key:"WorkpackageVM",get:function(){return this.workpackageVM||(this.workpackageVM=Wr(this)),this.workpackageVM},set:function(t){this.workpackageVM=t;var e=this.ModelItem;t?this.ModelItem.Workpackage=t.Workpackage:e.Workpackage=t}},{key:"WorkpackageVMStorageList",get:function(){return this.workpackageVMStorageList||(this.workpackageVMStorageList=Ur(this)),this.workpackageVMStorageList},set:function(t){this.workpackageVMStorageList=t;var e=this.WorkpackageSelectVM;e.Items=t,e.SelectedIndex=-1}},{key:"WorkpackageSelectVM",get:function(){var t=this;if(!this.workpackageSelectVM){var e=this.WorkpackageVMStorageList?this.WorkpackageVMStorageList:[],n=this.workpackageSelectVM=Fe(e,this.WorkpackageVM);n.Placeholder="ch\u1ecdn c\xf4ng t\xe1c",n.OnSelectedItemChanged=function(e){return t.WorkpackageVM=e}}return this.workpackageSelectVM}},{key:"MassType",get:function(){return this.massType||(this.massType=this.ModelItem.MassType),this.massType},set:function(t){this.massType=t,this.ModelItem.MassType=t}},{key:"MassTypeStorageList",get:function(){return Br(this)}},{key:"MassTypeSelectVM",get:function(){var t=this;if(!this.massTypeSelectVM){var e=this.massTypeSelectVM=Fe(this.MassTypeStorageList,this.MassType);e.Placeholder="lo\u1ea1i kh\u1ed1i l\u01b0\u1ee3ng",e.OnSelectedItemChanged=function(e){return t.MassType=e}}return this.massTypeSelectVM}}]),t}(),Er=function(){return Pc.Instance},Ar=function(t,e){var n=new Pr;return n.ModelItem=t,n.Dict=e,Er().Workpackage_DictVM.OnGetItemsDone_Funcs.push((function(t){n.WorkpackageVMStorageList=Ur(n)})),n},Hr=function(t){return Er().ValueRetrieveTypes},Wr=function(t){var e=t.ModelItem.Workpackage;if(e){var n=Er().Workpackage_DictVM.WorkpackageVMs;if(n){var i=n.findIndex((function(t){return t.Workpackage===e}));return-1!==i?n[i]:void 0}}},Ur=function(t){return Er().Workpackage_DictVM.WorkpackageVMs},Br=function(t){return Er().MassTypes},Kr=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.ValueSettings.splice(e.Index,1)}}return Object(u.a)(t,[{key:"Index",get:function(){return this.Dict.ValueSettings.indexOf(this)}},{key:"Workpackage",get:function(){return this.workpackage||(this.workpackage=Yr(this)),this.workpackage},set:function(t){this.workpackage=t,this.workpackageId=t?t._id:void 0}},{key:"ApiData",get:function(){return Qr(this)}}]),t}(),zr="byparameter",qr=function(t,e){var n=new Kr;return n.RetrieveType=t.RetrieveType,n.MassType=t.MassType,n.ValueFilter=t.ValueFilter,n.Workpackage=t.Workpackage,n.Dict=e,n},Jr=function(t){var e=new Kr;e.RetrieveType=zr,e.Dict=t;var n=new Xt;return n.CategoryType=Et,n.ValueType=At,n.StringFilterType=Wt,n.Values=["Volume"],e.ValueFilter=n,e},Yr=function(t){var e=t.workpackageId;if(e){var n=ou.Instance.Workpackage_Dict.Workpackages;if(n){var i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}},Qr=function(t){return{retrieveType:t.RetrieveType,massType:t.MassType,valueFilter:t.ValueFilter.ApiData,workpackageId:t.workpackageId}},Zr=function(){function t(){var e=this;Object(o.a)(this,t),this.elementFilterVMStorageList=void 0,this.valueSettingVMs=void 0,this.AddNewValueSettingVM=function(){var t=e.ModelItem.AddNewValueSetting(),n=Ar(t,e);return e.ValueSettingVMs.push(n),n},this.SetData=function(t){e.ElementFilterSelectVM.InitialItem=t.ElementFilterVM,e.ValueSettingVMs=t.ValueSettingVMs},Object(g.k)(this,{valueSettingVMs:g.l})}return Object(u.a)(t,[{key:"ElementFilterVM",get:function(){return this.elementFilterVM||(this.elementFilterVM=ta(this)),this.elementFilterVM},set:function(t){this.elementFilterVM=t;var e=this.ModelItem;e.ElementFilter=t?t.ModelItem:t}},{key:"ElementFilterVMStorageList",get:function(){return this.elementFilterVMStorageList||(this.elementFilterVMStorageList=ea(this)),this.elementFilterVMStorageList},set:function(t){this.elementFilterVMStorageList=t;var e=this.ElementFilterSelectVM;e.Items=t,e.SelectedIndex=0}},{key:"ElementFilterSelectVM",get:function(){var t=this;if(!this.elementFilterSelectVM){var e=this.ElementFilterVMStorageList?this.ElementFilterVMStorageList:[],n=this.elementFilterSelectVM=Fe(e,this.ElementFilterVM);n.Placeholder="ch\u1ecdn b\u1ed9 l\u1ecdc",n.OnSelectedItemChanged=function(e){return t.ElementFilterVM=e}}return this.elementFilterSelectVM}},{key:"ValueSettingVMs",get:function(){return this.valueSettingVMs||(this.valueSettingVMs=na(this)),this.valueSettingVMs},set:function(t){var e=this.valueSettingVMs,n=this.ModelItem.ValueSettings,i=e.length,s=t.length;e.forEach((function(e,n){n>=s||e.SetData(t[n])}));var r=Math.abs(i-s);if(i>s)e.splice(s,r),n.splice(s,r);else if(i<s)for(var a=0;a<r;a++){var c=t[i+a],o=qr(c.ModelItem,this.ModelItem);n.push(o);var u=Ar(o,this);e.push(u)}}}]),t}(),Xr=function(){return Pc.Instance},$r=function(t){var e=new Zr;return e.ModelItem=t,Xr().ElementFilterSetting_DictVM.OnGetItemsDone=function(t){e.ElementFilterVMStorageList=ea(e)},e},ta=function(t){var e=t.ModelItem.ElementFilter;if(e){var n=Xr().ElementFilterSetting_DictVM.Items;if(n){var i=n.findIndex((function(t){return t.ModelItem===e}));return-1!==i?n[i]:void 0}}},ea=function(t){return Xr().ElementFilterSetting_DictVM.Items},na=function(t){return t.ModelItem.ValueSettings.map((function(e){return Ar(e,t)}))},ia=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){t.ValueSettingVMs},t}return n}(kr),sa=function(t,e){var n=new ia;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){var e=t.Data;return $r(e)},n},ra=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Gr),aa=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=ca(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,t?(this.ModelItem.CurrentItem=t.ModelItem,this.Input.EditItem=t):this.ModelItem.CurrentItem=t}},{key:"Input",get:function(){return this.input||(this.input=oa(this)),this.input}}]),t}(),ca=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return sa(e,t)}))},oa=function(t){return function(t,e){var n=new ra;return n.ModelItem=t,n.Dict=e,t.OnAddDatabaseDone=function(t){var e=n.CommandName;T.b.success("".concat(e," setting successfully"))},n.OnGetDataVM=function(){var e=t.Data;return $r(e)},n}(t.ModelItem.Input,t)},ua=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=la(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,this.ModelItem.CurrentItem=t?t.ModelItem:t}}]),t}(),la=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Kc(e,t)}))},ha=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"_id",get:function(){return this.ModelItem._id}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"DisplayContent",get:function(){return"".concat(this.Name)}}]),t}(),da=function(t,e){if(t){var n=new ha;return n.ModelItem=t,n.Dict=e,n}},fa="addversion",pa=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.OnGetItemsDone_Funcs=[],this.state=void 0,this.Add=function(t){e.Items.push(t)},this.AddVersion=function(){e.State=fa},this.Cancel=function(){e.State=void 0},this.OK=function(){var t=e.Input.Name;-1===e.Items.findIndex((function(e){return e.Name===t}))?(e.State=void 0,e.ModelItem.AddMassVersion()):T.b.warning("version name already exists!")},Object(g.k)(this,{items:g.l,state:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=va(this)),this.items}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"Input",get:function(){return this.input||(this.input=ga(this)),this.input}},{key:"State",get:function(){return this.state},set:function(t){this.state=t}}]),t}(),ma=function(){function t(){Object(o.a)(this,t),this.name=void 0}return Object(u.a)(t,[{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=y(this.Name,"t\xean version")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=y(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}}]),t}(),va=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return da(e,t)}))},ga=function(t){return function(t,e){var n=new ma;return n.ModelItem=t,n.Dict=e,n}(t.ModelItem.Input,t)},Ia=function(){function t(){Object(o.a)(this,t),this.OnSet_LevelSetting_Func_Dict=[],this.typicalLevelSetting=void 0,this.typicalLevelSetting_ForEdit=void 0,Object(g.k)(this,{typicalLevelSetting:g.l,typicalLevelSetting_ForEdit:g.l})}return Object(u.a)(t,[{key:"_id",get:function(){return this.ModelItem._id}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Code",get:function(){return this.code||(this.code=this.ModelItem.Code),this.code},set:function(t){this.code=t,this.ModelItem.Code=t}},{key:"Phase_DictVM",get:function(){return this.phase_DictVM||(this.phase_DictVM=sc(this)),this.phase_DictVM}},{key:"RebarMass_Dict",get:function(){return this.rebarMass_Dict||(this.rebarMass_Dict=this.ModelItem.RebarMass_Dict),this.rebarMass_Dict}},{key:"InputExportSet",get:function(){return this.ModelItem.InputExportSet}},{key:"DisplayContent",get:function(){return"".concat(this.Code," - ").concat(this.Name)}},{key:"Level_Dict",get:function(){return this.ModelItem.Level_Dict}},{key:"LevelSetting",get:function(){return this.levelSetting||rc(this),this.levelSetting},set:function(t){var e=this;this.levelSetting=t,yt(this.OnSet_LevelSetting_Func_Dict,(function(t){return e.OnSet_LevelSetting_Func_Dict=t}))}},{key:"TypicalLevelSetting",get:function(){return this.typicalLevelSetting||(this.typicalLevelSetting=cc(this)),this.typicalLevelSetting},set:function(t){this.typicalLevelSetting=t}},{key:"TypicalLevelSetting_ForEdit",get:function(){return this.typicalLevelSetting_ForEdit||(this.typicalLevelSetting_ForEdit=oc(this)),this.typicalLevelSetting_ForEdit},set:function(t){this.typicalLevelSetting_ForEdit=t}},{key:"Url",get:function(){return this.ModelItem.Url}}]),t}(),ba=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(kr),_a=function(){function t(){var e=this;Object(o.a)(this,t),this.Is_ShowValue_Delete=void 0,this.ShowValue_Delete=function(){e.Is_ShowValue_Delete=!0},this.HideValue_Delete=function(){e.Is_ShowValue_Delete=!1},this.Delete=function(){e.ModelItem.Delete();var t=e.Dict;t.Items.splice(e.Index,1),t.Table.DeleteItem(e)},Object(g.k)(this,{Is_ShowValue_Delete:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this.ModelItem.id}},{key:"Name",get:function(){return this.ModelItem.Name},set:function(t){this.ModelItem.Name=t}},{key:"NameVM",get:function(){var t=this;if(!this.nameVM){var e=this.nameVM=Lt(this.Name);bt(e.OnSet_RenderState_Func_Dict,(function(){e.RenderState===Dt&&(t.Name=e.Content)}),!1)}return this.nameVM}},{key:"Values",get:function(){return this.ModelItem.Values},set:function(t){this.ModelItem.Values=t}},{key:"Value_StorageList",get:function(){return this.value_StorageList||ja(this),this.value_StorageList},set:function(t){this.value_StorageList=t;var e=this.ValueVM;e.Items=t,e.InitialItems=this.Values}},{key:"ValueVM",get:function(){var t=this;if(!this.valueVM){var e=this.Value_StorageList?this.Value_StorageList:[],n=this.valueVM=Bi(e,this.Values);n.Placeholder="Cho\u0323n d\u01b0\u0303 li\xea\u0323u",n.OnSelectedItemChanged=function(e){return t.Values=e}}return this.valueVM}},{key:"Value_Element",get:function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"ls_item__value__wrapper",onMouseEnter:this.ShowValue_Delete,onMouseLeave:this.HideValue_Delete,children:[Object(i.jsx)(Ji,{store:this.ValueVM}),Object(i.jsx)("div",{className:"ls_item__value__delete",children:this.Is_ShowValue_Delete?Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:this.Delete,children:"x"}):Object(i.jsx)("div",{})})]})})}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}},{key:"IsLast",get:function(){return this.Dict.Items.length-1===this.Index}},{key:"Project",get:function(){return this.Dict.Project}}]),t}(),ya=function(t,e){var n=new _a;return n.ModelItem=t,n.Dict=e,n},ja=function(t){if(!t.IsGet_Value_StorageList){t.IsGet_Value_StorageList=!0;var e=t.Project.ModelItem,n=function(e){t.Value_StorageList=e.Items.map((function(t){return t.Name}))};e.LevelDict?n(e.LevelDict):_t(e.OnSet_LevelDict_Func_Dict,(function(){n(e.LevelDict)}),!1)}},Sa=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.AddItem=function(){var t=ya(e.ModelItem.AddItem(),e);return t.NameVM.RenderState=Tt,e.Items.push(t),e.Table.AddItem(t),t},this.Update_LevelData=function(){e.ModelItem.Update_LevelData(),T.b.success("save successfully!")},Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=Va(this)),this.items},set:function(t){this.items=t}},{key:"Project",get:function(){return this.Dict.Project}},{key:"Table",get:function(){return this.table||(this.table=Ca(this)),this.table}}]),t}(),Oa=(n(291),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Gt,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:t.Render()})}}]),n}(s.Component)),Ma=Object(d.a)(Oa),ka=function(t,e){var n=new Sa;return n.ModelItem=t,n.Dict=e,n},Va=function(t){return t.ModelItem.Items.map((function(e){return ya(e,t)}))},Ca=function(t){var e=new Ze,n=new He;n.Title="T\xean",n.DataIndex=["name"],n.Key=ft(),n.Table=e,n.ClassName="ls__title-column";var s=new He;return s.Title="T\u01b0\u01a1ng \u0111\u01b0\u01a1ng v\u01a1\u0301i",s.DataIndex=["value"],s.Key=ft(),s.Table=e,s.ClassName="ls__value-column",e.Columns=[n,s],e.CanShow_MoveCommand=!1,e.CanHandleColumn=!1,e.Override_Get_CellRender=function(t,e,n,s,r,a){switch(a.DataIndex[0]){case"name":return Object(i.jsx)(Ma,{store:e.NameVM});case"value":return e.Value_Element}},e.DataSource=Object(O.a)(t.Items),e},Da=function(){function t(){Object(o.a)(this,t),this.OnSet_LevelStorageList_Func_Dict=[]}return Object(u.a)(t,[{key:"Binding",get:function(){return this.binding||(this.binding=Xa(this)),this.binding}},{key:"Typical",get:function(){return this.typical||(this.typical=$a(this)),this.typical}},{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=tc(this)),this.levelStorageList},set:function(t){var e=this;this.levelStorageList=t,yt(this.OnSet_LevelStorageList_Func_Dict,(function(t){return e.OnSet_LevelStorageList_Func_Dict=t}))}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"SettingVM",get:function(){return this.Dict}},{key:"Project",get:function(){return this.Dict.Project}}]),t}(),Ta="text",wa="input",Fa=(n(292),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onCheckedChange=function(t){var e=i.state,n=t.target.checked;e.OnCheckChanging&&e.OnCheckChanging(n),e.Cancel||(e.Ischecked=n)};var s=i.props.store;return i.state=s||br(!1),i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.ischecked,n=t.name,s=t.isDisable;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",checked:e,onChange:this.onCheckedChange,disabled:s}),Object(i.jsx)("span",{className:"checkbox__title",children:n})]})})}}]),n}(s.Component)),xa=Object(d.a)(Fa),Ga=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.ModelItem.Delete(),e.Dict.LevelGroups.splice(e.Index,1),e.Primary=Na(e)},this.primary=void 0,this.isSelectOpen=void 0,Object(g.k)(this,{primary:g.l,isSelectOpen:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this.ModelItem.id}},{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=Ra(this)),this.levelStorageList},set:function(t){this.levelStorageList=t;var e=this.LevelSelectVM;e.Items=t,e.InitialItems=this.Levels}},{key:"Levels",get:function(){return this.ModelItem.Levels},set:function(t){this.ModelItem.Levels=t}},{key:"SettingVM",get:function(){return this.Dict.SettingVM}},{key:"LevelSelectVM",get:function(){var t=this;if(!this.levelSelectVM){var e=this.LevelStorageList;e||this.SettingVM.ModelItem.OnGetLevelStorageList_Funcs.push((function(){var e=t.levelSelectVM;e.Items=t.LevelStorageList,e.InitialItems=t.Levels})),e=e||[];var n=this.levelSelectVM=Bi(e,this.Levels);n.Placeholder="ch\u1ecdn level ...",n.TitleRender=function(e){var n=y(t.IsSelectOpen||t.Primary===e?"click":"hover"),s=y(t.Primary===e?"primary":"dashed"),r=y(t.Primary===e?"":"Set");return Object(i.jsx)(Xi.a,{trigger:n.Content,content:Object(i.jsxs)("span",{children:[t.Primary!==e?Object(i.jsx)("span",{className:"levelgroup__addtext",children:r.Content}):"",Object(i.jsx)(m.a,{size:"small",type:s.Content,onClick:function(){t.Primary=e},children:"Primary"})]}),children:Object(i.jsx)("span",{className:t.Primary===e?"levelgroup__primary":"",children:e})})},n.OnSetOpen=function(e){return t.IsSelectOpen=e},n.OnSelectedItemChanged=function(e){t.Levels=e,-1===t.Levels.indexOf(t.Primary)&&(t.Primary=Na(t))}}return this.levelSelectVM}},{key:"Index",get:function(){return this.Dict.LevelGroups.indexOf(this)}},{key:"Primary",get:function(){return this.primary||(this.primary=this.ModelItem.Primary),this.primary},set:function(t){this.primary=this.ModelItem.Primary=t}},{key:"IsSelectOpen",get:function(){return this.isSelectOpen},set:function(t){this.isSelectOpen=t}}]),t}(),La=function(t,e){var n=new Ga;return n.ModelItem=t,n.Dict=e,_t(e.OnSet_LevelStorageList_Func_Dict,(function(){return n.LevelStorageList=Ra(n)}),!1),n},Na=function(t){if(t.Levels&&0!==t.Levels.length)return t.Levels[0]},Ra=function(t){return t.Dict.LevelStorageList},Pa=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.ModelItem.Items.splice(e.Index,1),e.Dict.Items.splice(e.Index,1)},this.inputType=void 0,this.ToggleInputType=function(){switch(e.InputType){case an:e.SelectVM.InitialItem=e.Value,e.Value=e.SelectVM.SelectedItem,e.InputType=cn;break;case cn:e.Value?e.ValueVM.Content=e.Value:(e.ValueVM.Content||(e.ValueVM.Content="value"),e.Value=e.ValueVM.Content),e.InputType=an}},this.SwitchChecked_Funcs=function(){return e.InputType===cn},Object(g.k)(this,{inputType:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this._id||(this._id=pt()),this._id}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}},{key:"Values",get:function(){return this.Dict.ModelItem.Items}},{key:"Value",get:function(){return this.Values[this.Index].Value},set:function(t){this.Values[this.Index].Value=t}},{key:"ValueVM",get:function(){var t=this;this.valueVM||((this.valueVM=y(this.Value)).onSetContent=function(e){t.Value=e});return this.valueVM}},{key:"SelectVM",get:function(){var t=this;if(!this.selectVM){var e=this.selectVM=Fe(["C\u1ed9t","V\xe1ch","D\u1ea7m","S\xe0n"],this.Value);e.Placeholder="...",e.OnSetOpen=function(e){return t.SelectOpen=e},e.OnSelectedItemChanged=function(e){return t.Value=e}}return this.selectVM}},{key:"InputType",get:function(){return this.inputType||(this.inputType=this.ModelItem.InputType),this.inputType},set:function(t){this.inputType=this.ModelItem.InputType=t}},{key:"InputElement",get:function(){switch(this.InputType){case an:return Object(i.jsx)(Ct,{store:this.ValueVM,className:"tls_filter__value__input"});case cn:return Object(i.jsx)(Ae,{store:this.SelectVM,className:"tls_filter__value__select"})}}},{key:"SelectOpen",get:function(){return void 0===this.selectOpen&&(this.selectOpen=this.SelectVM.Open),this.selectOpen},set:function(t){this.selectOpen=t,this.PopoverState.Content=Aa(this)}},{key:"PopoverState",get:function(){return this.popoverState||(this.popoverState=y(Aa(this))),this.popoverState}}]),t}(),Ea=function(t,e){var n=new Pa;return n.ModelItem=t,n.Dict=e,n},Aa=function(t){return t.SelectOpen?"none":"hover"},Ha=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.ModelItem.Delete(),e.Dict.Filters.splice(e.Index,1)},this.items=void 0,this.AddItem=function(){var t=Ea(e.ModelItem.AddItem(),e);return e.Items.push(t),t},Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this.ModelItem.id}},{key:"Field",get:function(){return this.ModelItem.Field},set:function(t){this.ModelItem.Field=t}},{key:"FieldStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"FieldSelectVM",get:function(){var t=this;if(!this.fieldSelectVM){var e=this.fieldSelectVM=Fe(this.FieldStorageList,this.Field);e.Placeholder="ch\u1ecdn b\u1ed9 l\u1ecdc ...",e.OnSelectedItemChanged=function(e){return t.Field=e}}return this.fieldSelectVM}},{key:"Index",get:function(){return this.Dict.Filters.indexOf(this)}},{key:"Items",get:function(){return this.items||(this.items=Ua(this)),this.items}}]),t}(),Wa=function(t,e){var n=new Ha;return n.ModelItem=t,n.Dict=e,n},Ua=function(t){return t.ModelItem.Items.map((function(e){return Ea(e,t)}))},Ba=function(){function t(){var e=this;Object(o.a)(this,t),this.name=void 0,this.State=Ta,this.ToggleState=function(){switch(e.State){case Ta:e.State=wa;break;case wa:e.NameVM.Content=e.Name,e.State=Ta}},this.NameOK=function(){e.State=Ta,e.Name=e.NameVM.Content},this.NameCancel=function(){e.State=Ta},this.Delete=function(){e.ModelItem.Delete();var t=e.Index,n=e.IsLast,i=e.Dict,s=i.PageItems;s.splice(t,1),i.AllTabs.splice(t,1),0!==s.length&&(i.IsModelChangePageKey=!0,i.CurrentPageKey=(n?s[t-1]:s[t]).id)},this.OnSet_LevelStorageList_Func_Dict=[],this.levelGroups=void 0,this.AddLevelGroup=function(){var t=La(e.ModelItem.AddLevelGroup(),e);return e.LevelGroups.push(t),t},this.filters=void 0,this.AddFilter=function(){var t=Wa(e.ModelItem.AddFilter(),e);return e.Filters.push(t),t},Object(g.k)(this,{name:g.l,State:g.l,levelGroups:g.l,filters:g.l})}return Object(u.a)(t,[{key:"id",get:function(){var t;return null===(t=this.ModelItem)||void 0===t?void 0:t.id},set:function(t){this._id=t}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=this.ModelItem.Name=t}},{key:"DeleteMarginCss",get:function(){return this.State===wa?"tls_pageItem__deletemargin":""}},{key:"NameVM",get:function(){return this.nameVM||(this.nameVM=y(this.Name)),this.nameVM}},{key:"InputToolElement",get:function(){return Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:this.NameOK,children:"ok"}),Object(i.jsx)(m.a,{type:"dashed",size:"small",onClick:this.NameCancel,children:"cancel"})]})}},{key:"InputElement",get:function(){return Object(i.jsx)(Ct,{className:"tls_pageItem_input",store:this.NameVM})}},{key:"TitleElement",get:function(){var t=Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:this.Delete,className:"tls_pageItem__delete",children:"x"});switch(this.State){case Ta:return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("span",{children:this.Name}),Object(i.jsx)(m.a,{type:"primary",size:"small",className:"tls_pageItem__edit",onClick:this.ToggleState,children:"e"}),t]});case wa:return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Xi.a,{content:this.InputToolElement,trigger:"focus",children:Object(i.jsx)("span",{children:this.InputElement})}),t]})}}},{key:"Index",get:function(){return this.Dict.PageItems.indexOf(this)}},{key:"IsLast",get:function(){return this.Dict.PageItems.length-1===this.Index}},{key:"SettingVM",get:function(){return this.Dict.SettingVM}},{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=Ja(this)),this.levelStorageList},set:function(t){var e=this;this.levelStorageList=t,yt(this.OnSet_LevelStorageList_Func_Dict,(function(t){return e.OnSet_LevelStorageList_Func_Dict=t}))}},{key:"LevelGroups",get:function(){return this.levelGroups||(this.levelGroups=za(this)),this.levelGroups}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"Filters",get:function(){return this.filters||(this.filters=qa(this)),this.filters}}]),t}(),Ka=function(t,e){var n=new Ba;return n.ModelItem=t,n.Dict=e,_t(e.OnSet_LevelStorageList_Func_Dict,(function(){return n.LevelStorageList=Ja(n)}),!1),n},za=function(t){return t.ModelItem.LevelGroups.map((function(e){return La(e,t)}))},qa=function(t){return t.ModelItem.Filters.map((function(e){return Wa(e,t)}))},Ja=function(t){return t.Dict.LevelStorageList},Ya=function(){function t(){var e=this;Object(o.a)(this,t),this.OnSet_LevelStorageList_Func_Dict=[],this.pageItems=void 0,this.AddPageItem=function(){var t=Ka(e.ModelItem.AddPageItem(),e);e.PageItems.push(t);var n=e.IsHaveAddCommandTab?1:0;return e.AllTabs.splice(e.AllTabs.length-n,0,t),e.CurrentPageKey=t.id,t},this.IsHaveAddCommandTab=!1,this.allTabs=void 0,this.currentPageKey=void 0,this.IsModelChangePageKey=!1,this.ChangePageKey=function(t){e.IsModelChangePageKey?e.IsModelChangePageKey=!1:e.CurrentPageKey=t},this.Save=function(){e.SettingVM.Save()},Object(g.k)(this,{pageItems:g.l,currentPageKey:g.l,allTabs:g.l})}return Object(u.a)(t,[{key:"SettingVM",get:function(){return this.Dict.SettingVM}},{key:"LevelStorageList",get:function(){return this.levelStorageList||(this.levelStorageList=Za(this)),this.levelStorageList},set:function(t){var e=this;this.levelStorageList=t,yt(this.OnSet_LevelStorageList_Func_Dict,(function(t){return e.OnSet_LevelStorageList_Func_Dict=t}))}},{key:"FieldFilterStorageList",get:function(){return this.Dict.FieldFilterStorageList}},{key:"PageItems",get:function(){return this.pageItems||(this.pageItems=Qa(this)),this.pageItems}},{key:"AddCommandTab",get:function(){return this.addCommandTab||(this.addCommandTab={id:"add",TitleElement:Object(i.jsx)(m.a,{className:"tls__tabs__add",type:"text",size:"small",onClick:this.AddPageItem,children:"+"})}),this.addCommandTab}},{key:"AllTabs",get:function(){if(!this.allTabs){var t=Object(O.a)(this.PageItems);this.IsHaveAddCommandTab&&t.push(this.AddCommandTab),this.allTabs=t}return this.allTabs}},{key:"CurrentPageKey",get:function(){return this.currentPageKey||(this.currentPageKey=this.PageItems[0].id),this.currentPageKey},set:function(t){this.currentPageKey=t}}]),t}(),Qa=function(t){return t.ModelItem.PageItems.map((function(e){return Ka(e,t)}))},Za=function(t){return t.Dict.LevelStorageList},Xa=function(t){return ka(t.ModelItem.Binding,t)},$a=function(t){return function(t,e){var n=new Ya;return n.ModelItem=t,n.Dict=e,_t(e.OnSet_LevelStorageList_Func_Dict,(function(){return n.LevelStorageList=Za(n)}),!1),n}(t.ModelItem.Typical,t)},tc=function(t){return t.ModelItem.LevelStorageList},ec=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).Save=function(){t.ModelItem.Save()},t}return Object(u.a)(n,[{key:"LevelStorageList",get:function(){return this.ModelItem.LevelStorageList}},{key:"FieldFilterStorageList",get:function(){return this.ModelItem.FieldFilterStorageList}}]),n}(kr),nc=function(t,e){if(t){var n=new ec;return n.ModelItem=t,n.Project=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){return function(t,e){var n=new Da;return n.ModelItem=t,n.Dict=e,_t(t.OnSet_LevelStorageList_Func_Dict,(function(){return n.LevelStorageList=tc(n)}),!1),n}(t.Data,n)},n}},ic=function(t,e){if(t){var n=new Ia;return n.ModelItem=t,n.Dict=e,n}},sc=function(t){return function(t){var e=new pa;return e.ModelItem=t,t.OnGetItemsDone_Funcs.push((function(t){e.Items,e.GetItemsDone=!0})),t.OnAdd=function(t){e.Add(da(t,e))},e}(t.ModelItem.Phase_Dict)},rc=function(t){if(!t.IsGet_LevelSetting){t.IsGet_LevelSetting=!0;var e=function(e){t.LevelSetting=function(t,e){if(t){var n=new ba;return n.ModelItem=t,n.Project=e,n.OnGetDataVM=function(){var e=t.Data;return ka(e,n)},n}}(e,t)},n=t.ModelItem;n.LevelSetting?e(n.LevelSetting):_t(n.OnSet_LevelSetting_Func_Dict,(function(){e(n.LevelSetting)}),!1)}},ac=function(t,e){return nc(t,e)},cc=function(t){var e=t.ModelItem,n=e.TypicalLevelSetting;if(n)return ac(n,t);_t(e.OnGetTypicalLevelSetting_Func_Dict,(function(){return t.TypicalLevelSetting=ac(e.TypicalLevelSetting,t)}),!1)},oc=function(t){var e=t.ModelItem,n=e.TypicalLevelSetting_ForEdit;if(n)return ac(n,t);_t(e.OnGetTypicalLevelSetting_Func_Dict,(function(){return t.TypicalLevelSetting_ForEdit=ac(e.TypicalLevelSetting_ForEdit,t)}),!1)},uc=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||lc(this),this.items},set:function(t){this.items=t,this.GetItemsDone=!0}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}}]),t}(),lc=function(t){if(!t.IsGet_Items){t.IsGet_Items=!0;var e=function(e){t.Items=e.map((function(e){return ic(e,t)}))},n=t.ModelItem;n.Items&&0!==n.Items.length?e(n.Items):n.OnGetItemsDone=function(){return e(n.Items)}}},hc=function(){function t(){var e=this;Object(o.a)(this,t),this.IsShowProjectSelect=!0,this.CanHavePhase=!1,this.isHavePhase=void 0,this.massGroupSettingStorageList=void 0,this.IsDataPending=!1,this.handledRatio=0,this.GetMassData=function(){e.IsDataPending=!0,e.HandledRatio=0,e.ModelItem.GetMassData()},Object(g.k)(this,{IsShowProjectSelect:g.l,CanHavePhase:g.l,isHavePhase:g.l,IsDataPending:g.l})}return Object(u.a)(t,[{key:"Projects",get:function(){return this.projects||(this.projects=this.ModelItem.Projects),this.projects},set:function(t){this.projects=t,this.ModelItem.Projects=t}},{key:"ProjectVMs",get:function(){return this.projectVMs||(this.projectVMs=mc(this)),this.projectVMs},set:function(t){this.projectVMs=t,this.Projects=t.map((function(t){return t.ModelItem}))}},{key:"ProjectVMStorageList",get:function(){return this.projectVMStorageList||(this.projectVMStorageList=pc(this)),this.projectVMStorageList},set:function(t){this.projectVMStorageList=t,this.projectVMs=mc(this);var e=this.ProjectSelectVM;e.Items=t,e.InitialItems=this.projectVMs}},{key:"ProjectSelectOpen",get:function(){return void 0===this.projectSelectOpen&&(this.projectSelectOpen=this.ProjectSelectVM.Open),this.projectSelectOpen},set:function(t){this.projectSelectOpen=t,this.ProjectPopoverState.Content=Ic(this)}},{key:"ProjectPopoverState",get:function(){return this.projectPopoverState||(this.projectPopoverState=y(Ic(this))),this.projectPopoverState}},{key:"ProjectSelectVM",get:function(){var t=this;if(!this.projectSelectVM){var e=this.ProjectVMStorageList?this.ProjectVMStorageList:[],n=this.projectSelectVM=Bi(e,this.ProjectVMs);n.Placeholder="ch\u1ecdn d\u1ef1 \xe1n",n.TitleRender=function(e){return Object(i.jsx)(Xi.a,{trigger:t.ProjectPopoverState.Content,placement:"topLeft",content:Object(i.jsx)("a",{target:"_blank",rel:"noreferrer",href:e.Url,children:"View project"}),children:e.DisplayContent})},n.OnSelectedItemChanged=function(e){return t.ProjectVMs=e},n.OnSetOpen=function(e){return t.ProjectSelectOpen=e}}return this.projectSelectVM}},{key:"Phases",get:function(){return this.phases||(this.phases=this.ModelItem.Phases),this.phases},set:function(t){this.phases=t,this.ModelItem.Phases=t}},{key:"PhaseVMs",get:function(){return this.phaseVMs||(this.phaseVMs=vc(this)),this.phaseVMs},set:function(t){this.phaseVMs=t,this.Phases=t.map((function(t){return t.ModelItem}))}},{key:"MassItem_Dict",get:function(){return this.massItem_Dict||(this.massItem_Dict=this.ModelItem.MassItem_Dict),this.massItem_Dict}},{key:"PhaseVMStorageList",get:function(){return this.phaseVMStorageList},set:function(t){this.phaseVMStorageList=t,this.phaseVMs=vc(this);var e=this.PhaseSelectVM;e.Items=t,e.InitialItems=this.phaseVMs}},{key:"PhaseSelectVM",get:function(){var t=this;if(!this.phaseSelectVM){var e=this.PhaseVMStorageList?this.PhaseVMStorageList:[],n=this.phaseSelectVM=Bi(e,this.PhaseVMs);n.Placeholder="ch\u1ecdn version",n.OnSelectedItemChanged=function(e){return t.PhaseVMs=e}}return this.phaseSelectVM}},{key:"IsHavePhase",get:function(){return this.isHavePhase||(this.isHavePhase=this.ModelItem.IsHavePhase),this.isHavePhase},set:function(t){this.isHavePhase=t,this.ModelItem.IsHavePhase=t}},{key:"IsShowPhaseSelectVM",get:function(){var t=this;this.isShowPhaseSelectVM||((this.isShowPhaseSelectVM=br("So s\xe1nh c\xe1c version",this.IsHavePhase)).onCheckChange=function(e){t.IsHavePhase=e});return this.isShowPhaseSelectVM}},{key:"MassGroupSetting",get:function(){return this.ModelItem.MassGroupSetting},set:function(t){this.ModelItem.MassGroupSetting=t}},{key:"MassGroupSettingStorageList",get:function(){this.massGroupSettingStorageList||(this.massGroupSettingStorageList=gc(this))},set:function(t){this.massGroupSettingStorageList=t,this.MassGroupSettingSelectVM.Items=t}},{key:"MassGroupSettingSelectVM",get:function(){var t=this;if(!this.massGroupSettingSelectVM){var e=this.MassGroupSettingStorageList?this.MassGroupSettingStorageList:[],n=this.massGroupSettingSelectVM=Fe(e);n.TitleRender=function(t){return t.DisplayContent},n.CanClear=!0,n.Placeholder="ch\u1ecdn b\u1ed9 set kh\u1ed1i l\u01b0\u1ee3ng",n.OnSelectedItemChanged=function(e){return t.MassGroupSetting=e}}return this.massGroupSettingSelectVM}},{key:"LoadingSpinTip",get:function(){return"loading data ... (".concat((100*this.HandledRatio).toFixed(1),"%)")}},{key:"LoadingSpinTipVM",get:function(){return this.loadingSpinTipVM||(this.loadingSpinTipVM=y(this.LoadingSpinTip)),this.loadingSpinTipVM}},{key:"HandledRatio",get:function(){return this.handledRatio},set:function(t){this.handledRatio=t,this.LoadingSpinTipVM.Content=this.LoadingSpinTip}}]),t}(),dc=function(){return Pc.Instance},fc=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new hc;n.ModelItem=t,t.ViewItem=n,e&&(dc().Project_DictVM.OnGetItemsDone=function(t){n.ProjectVMStorageList=pc(n)}),t.OnGetItemsDone_Funcs.push((function(){T.b.success("get mass data successfully")}));var i=t.MassItem_Dict.MassTable;return i.OnIsUpdateDataDone_Funcs.push((function(){n.IsDataPending=!1})),i.OnSetHandledRatio_Funcs.push((function(t){n.HandledRatio=t})),n},pc=function(t){return dc().Project_DictVM.Items},mc=function(t){var e=t.ProjectVMStorageList;if(!e)return[];var n=[];return t.Projects.forEach((function(t){var i=e.findIndex((function(e){return e.ModelItem===t}));-1!==i&&n.push(e[i])})),n},vc=function(t){var e=t.PhaseVMStorageList;if(!e)return[];var n=[];return t.Phases.forEach((function(t){var i=e.findIndex((function(e){return e.ModelItem===t}));-1!==i&&n.push(e[i])})),n},gc=function(t){var e=ou.Instance.MassGroupSetting_Dict,n=e.Items;return n||e.OnGetItemsDone_Funcs.push((function(){t.MassGroupSettingStorageList=e.Items})),n},Ic=function(t){return t.ProjectSelectOpen?"none":"hover"},bc=function t(){Object(o.a)(this,t),Object(g.k)(this,{})},_c=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).IsCategoryChecked=!0,t}return Object(u.a)(n,[{key:"CategoryCheckboxVM",get:function(){if(!this.categoryCheckboxVM)this.categoryCheckboxVM=br(void 0,this.IsCategoryChecked);return this.categoryCheckboxVM}}]),n}(kr),yc=function(t,e){var n=new _c;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){return function(t){var e=new bc;return e.ModelItem=t,e}(t.Data)},n},jc=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}($e),Sc=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=[yc(new jc)]),this.items}},{key:"TableVM",get:function(){return this.tableVM||(this.tableVM=Oc(this)),this.tableVM}}]),t}(),Oc=function(t){var e=new Ze;e.DataSource=t.Items;var n=We("T\xean thi\u1ebft l\u1eadp",["Name"],null,e),s=We("Category",null,[Se(ve,(function(t,e){e.CategoryCheckboxVM;return Object(i.jsx)(xa,{store:e.CategoryCheckboxVM})}))],e),r=We("H\u1ea1ng m\u1ee5c ph\u1ee5",null,[Se(ve,(function(t,e){return Object(i.jsx)(xa,{})}))],e);return e.Columns=[n,s,r,Be(e)],e.OnGetItemForAdd=function(){return new _c},e},Mc=function(){return ou.Instance},kc=function(t){return function(t){var e=new Iu;return e.Workpackage_Dict=t,t.OnGetWorkpackagesDone=function(t){e.WorkpackageVMs,e.GetItemsDone=!0},t.OnAdd=function(t){var n=vr(t,e);e.Add(n)},e}(Mc().Workpackage_Dict)},Vc=function(t){return function(t){var e=new Mr;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items,e.GetItemsDone=!0},t.OnAdd=function(t){e.Add(Fr(t,e))},e}(Mc().ElementFilterSetting_Dict)},Cc=function(t){return function(t){var e=new aa;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items},t.OnAdd=function(t){e.Add(sa(t,e))},e}(Mc().MassExportSetting_Dict)},Dc=function(t){return function(t){var e=new ua;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items},t.OnAdd=function(t){e.Add(Kc(t,e))},e}(Mc().MassGroupSetting_Dict)},Tc=function(t){return function(t){var e=new uc;return e.ModelItem=t,e}(Mc().Project_Dict)},wc=function(t){return function(t){var e=new Sc;return e.ModelItem=t,t.OnGetItemsDone_Funcs.push((function(t){e.Items})),e}(Mc().WorkItemExportSetting_Dict)},Fc="mass",xc="typicallevel",Gc="phase",Lc="inputdata",Nc="mepsetting",Rc="document",Pc=function(){function t(){Object(o.a)(this,t),this.isDebug=void 0,this.OnSet_ProjectViewType_Func_Dict=[],this.projectViewType=Fc,this.OnSet_CurrentProject_Func_Dict=[],this.currentProject=void 0,this.main_Classname="projectcomp__main",Object(g.k)(this,{isDebug:g.l,projectViewType:g.l,currentProject:g.l,main_Classname:g.l})}return Object(u.a)(t,[{key:"pmData",get:function(){return ou.Instance}},{key:"Workpackage_DictVM",get:function(){return this.workpackage_DictVM||(this.workpackage_DictVM=kc()),this.workpackage_DictVM}},{key:"ElementFilterSetting_DictVM",get:function(){return this.elementFilterSetting_DictVM||(this.elementFilterSetting_DictVM=Vc()),this.elementFilterSetting_DictVM}},{key:"MassExportSetting_DictVM",get:function(){return this.massExportSetting_DictVM||(this.massExportSetting_DictVM=Cc()),this.massExportSetting_DictVM}},{key:"MassGroupSetting_DictVM",get:function(){return this.massGroupSetting_DictVM||(this.massGroupSetting_DictVM=Dc()),this.massGroupSetting_DictVM}},{key:"Project_DictVM",get:function(){return this.project_DictVM||(this.project_DictVM=Tc()),this.project_DictVM}},{key:"MassResultCompVM",get:function(){return this.massResultCompVM||(this.massResultCompVM=fc(Mc().MassResultComp)),this.massResultCompVM},set:function(t){this.massResultCompVM=t,this.pmData.MassResultComp=t?t.ModelItem:t}},{key:"FilterValueTypes",get:function(){return this.filterValueTypes||(this.filterValueTypes=this.pmData.FilterValueTypes),this.filterValueTypes}},{key:"StringFilterTypes",get:function(){return this.stringFilterTypes||(this.stringFilterTypes=this.pmData.StringFilterTypes),this.stringFilterTypes}},{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=this.pmData.CategoryNames),this.categoryNames}},{key:"ValueRetrieveTypes",get:function(){return this.valueRetrieveTypes||(this.valueRetrieveTypes=this.pmData.ValueRetrieveTypes),this.valueRetrieveTypes}},{key:"ParameterNames",get:function(){return this.parameterNames||(this.parameterNames=this.pmData.ParameterNames),this.parameterNames}},{key:"MassPropertyNames",get:function(){return this.massPropertyNames||(this.massPropertyNames=this.pmData.MassPropertyNames),this.massPropertyNames}},{key:"MassTypes",get:function(){return this.massTypes||(this.massTypes=this.pmData.MassTypes),this.massTypes}},{key:"WorkItemExportSetting_Dict",get:function(){return this.workItemExportSetting_Dict||(this.workItemExportSetting_Dict=wc()),this.workItemExportSetting_Dict}},{key:"IsDebug",get:function(){return void 0===this.isDebug&&(this.isDebug=this.pmData.IsDebug),this.isDebug},set:function(t){this.isDebug=this.pmData.IsDebug=t}},{key:"ProjectViewType",get:function(){return this.projectViewType},set:function(t){this.projectViewType=t,this.OnSet_ProjectViewType_Func_Dict.forEach((function(t){return t.Value()}))}},{key:"CurrentProject",get:function(){return this.currentProject},set:function(t){this.currentProject=t,this.OnSet_CurrentProject_Func_Dict.forEach((function(t){return t.Value()})),this.pmData.CurrentProject=null===t||void 0===t?void 0:t.ModelItem}},{key:"UpdatedDate",get:function(){return this.pmData.UpdatedDate}},{key:"Main_Classname",get:function(){return this.main_Classname},set:function(t){this.main_Classname=t}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),Ec=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){var t=e.Index;e.Fields.splice(t,1),e.Dict.FieldVMs.splice(t,1)},this.SetData=function(t){e.FieldSelectVM.InitialItem=t.Field}}return Object(u.a)(t,[{key:"Index",get:function(){return this.Dict.FieldVMs.indexOf(this)}},{key:"Fields",get:function(){return this.Dict.ModelItem.Fields}},{key:"Field",get:function(){return this.Fields[this.Index]},set:function(t){this.Fields[this.Index]=t}},{key:"FieldStorageList",get:function(){return Hc()}},{key:"FieldSelectVM",get:function(){var t=this;this.fieldSelectVM||((this.fieldSelectVM=Fe(this.FieldStorageList,this.Field)).OnSelectedItemChanged=function(e){return t.Field=e});return this.fieldSelectVM}}]),t}(),Ac=function(t,e){var n=new Ec;return n.Dict=e,n},Hc=function(){return Pc.Instance.MassPropertyNames},Wc=function(){function t(){var e=this;Object(o.a)(this,t),this.fieldVMs=void 0,this.AddNewFieldVM=function(){e.ModelItem.AddNewField();var t=Ac(0,e);return e.FieldVMs.push(t),t},this.SetData=function(t){e.FieldVMs=t.FieldVMs},Object(g.k)(this,{fieldVMs:g.l})}return Object(u.a)(t,[{key:"FieldVMs",get:function(){return this.fieldVMs||(this.fieldVMs=Uc(this)),this.fieldVMs},set:function(t){var e=this.fieldVMs,n=this.ModelItem.Fields,i=e.length,s=t.length;e.forEach((function(e,n){n>=s||e.SetData(t[n])}));var r=Math.abs(i-s);if(i>s)e.splice(s,r),n.splice(s,r);else if(i<s)for(var a=0;a<r;a++){var c=t[i+a].Field;n.push(c);var o=Ac(0,this);e.push(o)}}}]),t}(),Uc=function(t){return t.ModelItem.Fields.map((function(e){return Ac(0,t)}))},Bc=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){},t}return n}(kr),Kc=function(t,e){var n=new Bc;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){return function(t){var e=new Wc;return e.ModelItem=t,e}(t.Data)},n},zc=n(88),qc=n(84),Jc=function(){function t(){var e=this;Object(o.a)(this,t),this.data=[],this.Export=function(){var t={Sheets:{data:qc.utils.json_to_sheet(e.Data,e.Headers)},SheetNames:["data"]},n=qc.write(t,{bookType:"xlsx",type:"array"}),i=new Blob([n],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});zc.saveAs(i,e.FileName+".xlsx")},this.ExportTest=function(){var t={Name:"Title","!ref":"A1:E5",A1:{t:"n",v:100}},n={Name:"Raw Data","!ref":"A1:E5",B2:{t:"n",v:200},B3:{v:200,f:"B2"},C1:{v:300,f:"Title!A1"},C2:{v:300,f:"sum(Title!A1, B2)"}},i={Sheets:{},SheetNames:[t.Name,n.Name]};i.Sheets[t.Name]=t,i.Sheets[n.Name]=n;var s=qc.write(i,{bookType:"xlsx",type:"array"}),r=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});zc.saveAs(r,e.FileName+".xlsx")}}return Object(u.a)(t,[{key:"Data",get:function(){return this.Override_Get_Data?this.Override_Get_Data():this.data},set:function(t){this.data=t}},{key:"FileName",get:function(){return this.Override_Get_FileName?this.Override_Get_FileName():this.fileName},set:function(t){this.fileName=t}}]),t}(),Yc=n(176),Qc=n.n(Yc),Zc=function(){function t(){var e=this;Object(o.a)(this,t),this.Export=function(){var t=qc.write(e.Workbook,{bookType:"xlsx",type:"array"}),n=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});zc.saveAs(n,e.FileName+".xlsx")}}return Object(u.a)(t,[{key:"Workbook",get:function(){return this.Override_Get_Workbook?this.Override_Get_Workbook():this.workbook},set:function(t){this.workbook=t}},{key:"FileName",get:function(){return this.Override_Get_FileName?this.Override_Get_FileName():this.fileName},set:function(t){this.fileName=t}}]),t}(),Xc=function(){function t(){Object(o.a)(this,t),this.row=0,this.column=0}return Object(u.a)(t,[{key:"Row",get:function(){return this.Override_Get_Row?this.Override_Get_Row():this.row},set:function(t){this.row=t,this.Override_Get_Row=void 0}},{key:"Column",get:function(){return this.Override_Get_Column?this.Override_Get_Column():this.column},set:function(t){this.column=t,this.Override_Get_Column=void 0}},{key:"Formula",get:function(){return this.Override_Get_Formula?this.Override_Get_Formula():this.formula},set:function(t){this.formula=t,this.Override_Get_Formula=void 0}},{key:"Address",get:function(){return jt(this.Row,this.Column)}},{key:"SubItems",get:function(){return this.subItems||(this.subItems=function(t){var e=t.Column;return t.Dict.SubItems.map((function(t){var n=t.Cells,i=n.findIndex((function(t){return t.Column===e}));return-1!==i?n[i]:void 0})).filter((function(t){return void 0!==t}))}(this)),this.subItems}},{key:"IsContinueSubRows",get:function(){return void 0===this.isContinueSubRows&&(this.isContinueSubRows=function(t){var e=!0;return t.SubItems.forEach((function(t){e&&0!==t.SubItems.length&&(e=!1)})),e}(this)),this.isContinueSubRows}},{key:"ResultData",get:function(){return{t:this.Type,v:this.Value,f:this.Formula,z:this.Format,s:this.Style}}}]),t}(),$c=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Rank",get:function(){return this.Row.Rank}},{key:"SubItems",get:function(){return this.subItems||(this.subItems=no(this)),this.subItems}},{key:"FullItems",get:function(){return ro(this)}},{key:"Cells",get:function(){return this.cells||(this.cells=so(this)),this.cells}},{key:"FullIndex",get:function(){return this.Worksheet.FullRows.indexOf(this)}},{key:"Title",get:function(){return this.title||(this.title=io(this)),this.title}}]),t}(),to="s",eo=function(t,e,n){var i=new $c;return i.Row=t,i.Worksheet=e,i.SupItem=n,i},no=function(t){return t.Row.SubItems.map((function(e){return eo(e,t.Worksheet,t)}))},io=function(t){for(var e=t.Row,n="",i=0;i<e.Rank;i++)n+="  ";return n+=e.Title},so=function(t){var e=t.ValueCell_Dict=[],n=t.Worksheet.First_ValueColumn,i=t.Worksheet.First_ValueRow,s=t.Row,r=[],a=function(){return t.FullIndex+i},c=new Xc;c.Dict=t,c.Type=to,c.Value=t.Title,c.Column=0+n,c.Override_Get_Row=a,r.push(c);var o=s.Table.Columns;return s.Cells.forEach((function(i){var s=new Xc;s.Dict=t,s.Type="n",s.Value=i.TotalValue,s.Format="0.00",s.Column=o.indexOf(i.Column)+1+n,s.Override_Get_Row=a,s.Override_Get_Formula=function(){var t,e=s.SubItems,n=e.length;if(0!==n)return s.IsContinueSubRows?t="SUM(".concat(e[0].Address,":").concat(e[n-1].Address,")"):(t=e.reduce((function(t,e,n){return 0!==n&&(t+=","),t+=e.Address}),"SUM("),t+=")"),t};var c=i.Column.Name;r.push(s),e.push({Key:c,Value:s})})),r},ro=function(t){var e=[t];return t.SubItems.forEach((function(t){e.push.apply(e,t.FullItems)})),e},ao=function(){function t(){Object(o.a)(this,t),this.First_TitleColumn=0,this.First_TitleRow=0,this.First_ValueColumn=0,this.First_ValueRow=1}return Object(u.a)(t,[{key:"Table",get:function(){return this.Workbook.Table}},{key:"MainRows",get:function(){var t;return this.mainRows||(this.mainRows=(t=this).Table.MainRows.map((function(e){return eo(e,t)}))),this.mainRows}},{key:"FullRows",get:function(){return this.fullRows||(this.fullRows=function(t){var e=[];return t.MainRows.forEach((function(t){e.push.apply(e,t.FullItems)})),e}(this)),this.fullRows}},{key:"ValueCells",get:function(){return this.valueCells||(this.valueCells=function(t){var e=[];return t.FullRows.forEach((function(t){e.push.apply(e,t.Cells)})),e}(this)),this.valueCells}},{key:"TitleCells",get:function(){return this.titleCells||(this.titleCells=function(t){var e=t.First_TitleColumn,n=t.First_TitleRow,i=[];return t.Table.Columns.forEach((function(t,s){var r=new Xc;r.Type=to,r.Value=t.Name,r.Column=s+e+1,r.Row=n,r.Style={font:{bold:!0}},i.push(r)})),i}(this)),this.titleCells}},{key:"AllCells",get:function(){return this.allCells||(this.allCells=this.TitleCells.concat(this.ValueCells)),this.allCells}},{key:"RangeName",get:function(){return function(t){var e=t.AllCells,n=e.reduce((function(t,e){var n=t.minRow,i=t.minCol,s=t.maxRow,r=t.maxCol;return{minRow:n<e.Row?n:e.Row,minCol:i<e.Column?i:e.Column,maxRow:s>e.Row?s:e.Row,maxCol:r>e.Column?r:e.Column}}),Object(ze.a)({minRow:e[0].Row,minCol:e[0].Column,maxRow:e[0].Row},"maxRow",e[0].Column));return St(n.minRow,n.minCol,n.maxRow,n.maxCol)}(this)}},{key:"ResultData",get:function(){var t={"!ref":this.RangeName};return this.AllCells.forEach((function(e){t[e.Address]=e.ResultData})),t}}]),t}(),co=function(){function t(){Object(o.a)(this,t),this.InfoFields=[],this.First_TitleColumn=0,this.First_TitleRow=0,this.First_ValueColumn=0,this.First_ValueRow=1}return Object(u.a)(t,[{key:"Table",get:function(){return this.Workbook.Table}},{key:"DataRows",get:function(){return this.dataRows||(this.dataRows=this.Workbook.Data_WS.FullRows.filter((function(t){return 0===t.SubItems.length}))),this.dataRows}},{key:"TableRows",get:function(){return this.tableRows||(this.tableRows=this.DataRows.map((function(t){return t.Row}))),this.tableRows}},{key:"Records",get:function(){var t;return this.records||(this.records=(t=this).DataRows.map((function(e){e.Cells;var n=e.Row.ExportData,i=t.InfoFields;return n.Infos.map((function(t){return t.Key})).forEach((function(t){i.includes(t)||i.push(t)})),{Binding_DataRow:e,Value:n}}))),this.records}},{key:"ValueFields",get:function(){return this.valueFields||(this.valueFields=this.Table.Columns.map((function(t){return t.Name}))),this.valueFields}},{key:"ValueCells",get:function(){return this.valueCells||(this.valueCells=function(t){var e=t.First_ValueColumn,n=t.First_ValueRow,i=t.Records,s=[],r=t.InfoFields,a=r.length,c=t.ValueFields;return i.forEach((function(t,i){var o,u=t.Binding_DataRow.ValueCell_Dict,l=t.Value,h=i+n;l.Infos.forEach((function(t){(o=new Xc).Type=to,o.Value=t.Value,o.Column=r.indexOf(t.Key)+e,o.Row=h,s.push(o)})),l.Values.forEach((function(t){var n=t.Key,i=t.Value;(o=new Xc).Type="n",o.Value=i,o.Format="0.00",o.Column=c.indexOf(n)+e+a,o.Row=h,s.push(o);var r=u.findIndex((function(t){return t.Key===n})),l=u[r].Value;i&&(l.Formula="raw_data!".concat(o.Address))}))})),s}(this)),this.valueCells}},{key:"TitleCells",get:function(){return this.titleCells||(this.titleCells=function(t){t.Records;var e=t.First_TitleColumn,n=t.First_TitleRow,i=t.InfoFields.concat(t.ValueFields),s=[];return i.forEach((function(t,i){var r=new Xc;r.Type=to,r.Value=t,r.Column=i+e,r.Row=n,s.push(r)})),s}(this)),this.titleCells}},{key:"AllCells",get:function(){return this.allCells||(this.allCells=this.TitleCells.concat(this.ValueCells)),this.allCells}},{key:"RangeName",get:function(){return function(t){var e=t.AllCells,n=e.reduce((function(t,e){var n=t.minRow,i=t.minCol,s=t.maxRow,r=t.maxCol;return{minRow:n<e.Row?n:e.Row,minCol:i<e.Column?i:e.Column,maxRow:s>e.Row?s:e.Row,maxCol:r>e.Column?r:e.Column}}),Object(ze.a)({minRow:e[0].Row,minCol:e[0].Column,maxRow:e[0].Row},"maxRow",e[0].Column));return St(n.minRow,n.minCol,n.maxRow,n.maxCol)}(this)}},{key:"ResultData",get:function(){var t={"!ref":this.RangeName};return this.AllCells.forEach((function(e){t[e.Address]=e.ResultData})),t}}]),t}(),oo=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"All_WS",get:function(){return[this.RawData_WS,this.Data_WS]}},{key:"Data_WS",get:function(){return this.data_WS||(this.data_WS=uo(this)),this.data_WS}},{key:"RawData_WS",get:function(){return this.rawData_WS||(this.rawData_WS=lo(this)),this.rawData_WS}},{key:"ResultData",get:function(){var t={Sheets:{},SheetNames:[]};return this.All_WS.forEach((function(e){t.Sheets[e.Title]=e.ResultData,t.SheetNames.push(e.Title)})),t}}]),t}(),uo=function(t){var e=new ao;return e.Workbook=t,e.Title="data",e},lo=function(t){var e=new co;return e.Workbook=t,e.Title="raw_data",e},ho="input",fo="select",po=function(){return ou.Instance},mo=function(){function t(){var e=this;Object(o.a)(this,t),this.IsValidTable=!1,this.columnField=H,this.Columns=void 0,this.FullRows=void 0,this.MainRows=void 0,this.Cells=void 0,this.Init=function(){e.Columns=[],e.MainRows=[],e.FullRows=[],e.Cells=[],e.CreatedByUser_Rows=[],e.Handled_CreatedByUser_Rows=[]},this.GetColumn=function(t,n){var i=e.Columns,s=void 0,r=i.findIndex((function(e){return e.Name===t}));return-1===r?(s=function(t,e,n){var i=new Ot;return i.Name=t,i.Dict=e,i.Data=n,i}(t,e,n),i.push(s),s):i[r]},this.GetRow=function(t,n){var i=void 0,s=void 0,r=(i=n?n.SubItems:e.MainRows).findIndex((function(e){return e.Name===t}));return-1===r?((s=As(t,e)).SupItem=n,i.push(s),e.FullRows.push(s),s):i[r]},this.GetCell=function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=e.Cells,r=void 0,a=s.findIndex((function(e){return e.Column===t&&e.Row===n}));if(-1===a){if(!i)return;return r=js(t,n,e),s.push(r),r}return s[a]},this.Build=function(){var t=e.ColumnField;t===W&&po().MassResultComp.Phases.forEach((function(n){var i=ht(n,t),s=n;e.GetColumn(i,s)})),e.Items.forEach((function(n){switch(t){case W:n.ValidPhasesByInput.forEach((function(t){e.HandleItem(n,t)}));break;default:var i=n.GetValue(t).Value;e.HandleItem(n,i)}}))},this.IsOnSaveMassGroup=!1,this.HandledItems=[],this.HandledItemPhases=[],this.OnSetHandledRatio_Funcs=[],this.AddHandledItems=function(t){if(e.ColumnField!==W)e.HandledItems.push(t);else{var n=e.HandledItemPhases,i=n.findIndex((function(e){return e.Item===t})),s=void 0;-1===i?(s={Item:t,Count:0},n.push(s)):s=n[i],s.Count++,s.Count===t.ValidPhasesByInput.length&&e.HandledItems.push(t)}e.HandledRatio=e.HandledItems.length/e.Items.length,e.HandledItems.length===e.Items.length&&(e.UpdateData(),e.HandledItems=[])},this.UpdateData=function(){e.MainRows.forEach((function(t){return t.UpdateData()})),e.MainRows=qs(e.MainRows),e.Cells.forEach((function(t){return t.UpdateData()})),e.IsUpdateDataDone=!0},this.OnIsUpdateDataDone_Funcs=[],this.HandleItem=function(t,n,i,s){var r=ht(n,e.ColumnField),a=n,c=e.GetColumn(r,a),o=s?[s]:[];i=i||e.MainMGC;e.HandleRowFieldIndex(t,c,o,i,0)},this.GetRow_Value_FieldIndex=function(t,n,i,s,r,a,c){var o=r.Items,u=o.length,l=o[a],h=0!==i.length?i[i.length-1]:void 0;l.AddSupRow(h);var d=l.Field;if(d){var f=ht(s,d),p=h?"".concat(h.FullValue,"__").concat(f):f;if(l.NotIncludeValues.includes(p))e.AddHandledItems(t);else{var m=function(t){return e.Handle_AddRow(p,t)},v=function(s){s.RawValue=f,s.MassGroupItem=l,i.push(s);var c=l.SubComponents,o=c.findIndex((function(t){return Zt(t.Filter,p)}));-1!==o&&((r=c[o]).IsHaveMassItem=!0,a=-1,u=r.Items.length,s.SubMassGroupComponent=r),e.GetCell(n,s).Items.push(t),a===u-1?e.AddHandledItems(t):e.HandleRowFieldIndex(t,n,i,r,a+1)},g=l.GetItem(p,f),I=g.NewMGI;if(I){var b=g.SupValue;I.GetItem(p,f),h&&(h.Is_Original_SupRow=!0),e.Handle_ReplaceMGI(I,b,m,v,h,t)}else v(m(h))}}else e.AddHandledItems(t)},this.Handle_AddRow=function(t,n){var i=e.GetRow(t,n);return i.FullValue=t,i},this.Handle_ReplaceMGI=function(t,e,n,i,s,r){var a,c=function(){var r,c=function(){var n=t.SupRows,i=n.findIndex((function(t){return t.Name===e}));if(-1!==i)return a=!0,n[i]}();if(c){var o=function(e){var i=n(e);return i.ReplaceMGI=t,i}(c);(r=o).Original_SupRow=s,r.IsReplaced=!0,i(o)}};c(),_t(t.On_AddSupRow_Func_Dict,(function(){var n;a||(null===(n=t.NewRow)||void 0===n?void 0:n.Name)!==e||c()}),!1)},this.HandleRowFieldIndex=function(t,n,i,s,r){var a=s.Items[r].Field;if(a){var c=t.GetValue(a,(function(a){return e.GetRow_Value_FieldIndex(t,n,i,a,s,r,!0)}));if(!c.IsHandle){var o=c.Value;e.GetRow_Value_FieldIndex(t,n,i,o,s,r)}}else e.GetRow_Value_FieldIndex(t,n,i,void 0,s,r)},this.SaveMassGroup=function(){var t=e.Reference_MassGroupSetting_SelectVM,n=e.MassGroupSelectVM;n.Items=Object(O.a)(t.Items),n.InitialItem=t.SelectedItem,e.MassGroupInput_State=fo,e.IsOnSaveMassGroup=!0},this.MassGroupInput_State=void 0,this.Toggle_MassGroupInput_State=function(){switch(e.MassGroupInput_State){case fo:e.MassGroupInput_State=ho;break;case ho:e.MassGroupInput_State=fo}},this.massGroupName=void 0,this.MassGroupInputOK=function(){if(!e.MassGroupName||0===e.MassGroupName.length)switch(e.MassGroupInput_State){case fo:return void T.b.warning("Vui l\xf2ng ch\u1ecdn b\u1ed9 thi\u1ebft l\u1eadp!");case ho:return void T.b.warning("Vui l\xf2ng nh\u1eadp t\xean thi\u1ebft l\u1eadp!")}var t=!0,n=po().MassGroupSetting_Dict.Items,i=n.findIndex((function(t){return t.Name===e.MassGroupName})),s=void 0;-1!==i&&(s=n[i]._id,e.MassGroupInput_State===ho&&(t=!1));var r=function(){var t={_id:s,name:e.MassGroupName,settingType:wn,data:{massGroupComponent:e.MainMGC.ApiData}},n="https://api.bimdev.vn/api/hbs/mg",r=!s,a=r?"add":"edit";(r?R("".concat(n,"/").concat(a),t):N("".concat(n,"/").concat(a),t)).then((function(t){return t.data})).then((function(t){var n=e.Reference_MassGroupSetting_SelectVM,s=po().MassGroupSetting_Dict,c=pr(t,s),o=Pc.Instance.MassGroupSetting_DictVM,u=Kc(c,o);r?(s.Items.push(c),o.Items.push(u),n.Items.push(u)):(s.Items[i]=c,o.Items[i]=c,n.Items[i]=u,n.SelectedIndex===i&&(n.InitialItem=u)),T.b.success("".concat(a," massgroup successfully"))})),e.IsOnSaveMassGroup=!1,e.MassGroupNameVM.Content=or(e)};t?r():(e.Override_MassGroup_Modal_OKFunc=function(){return r()},e.Is_Override_MassGroup_Modal_Open=!0)},this.Is_Override_MassGroup_Modal_Open=!1,this.MassGroupInputCancel=function(){e.IsOnSaveMassGroup=!1,e.MassGroupNameVM.Content=or(e)},this.AddMainRow=function(){return $s(void 0,e)},this.Export=function(){e.ExcelExport.Export()},this.Add_Handled_CreatedByUser_Row=function(t){e.Handled_CreatedByUser_Rows.push(t),e.CreatedByUser_Rows.length,e.Handled_CreatedByUser_Rows.length},Object(g.k)(this,{IsValidTable:g.l,Columns:g.l,MainRows:g.l,Cells:g.l,columnField:g.l,IsOnSaveMassGroup:g.l,MassGroupInput_State:g.l,Is_Override_MassGroup_Modal_Open:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,t&&0!==t.length?(this.Build(),this.IsValidTable=!0):this.IsValidTable=!1}},{key:"ColumnField",get:function(){return this.columnField},set:function(t){this.columnField=t}},{key:"MassGroupSetting",get:function(){return this.massGroupSetting},set:function(t){this.massGroupSetting=t,this.MainMGC=t?Ni(t.Data.MassGroupComponent):t}},{key:"MainMGC",get:function(){return this.mainMGC||(this.mainMGC=function(t){var e=new Gi,n=Pi(q);return e.Items=[n],e}()),this.mainMGC},set:function(t){this.mainMGC=t,this.Init(),this.MainMGI=t?ur(this):void 0}},{key:"MainMGI",get:function(){return this.mainMGI||(this.mainMGI=ur(this)),this.mainMGI},set:function(t){this.mainMGI=t}},{key:"AllRows",get:function(){return function(t){var e=[];return t.MainRows.forEach((function(t){e.push.apply(e,t.AllItems)})),e}(this)}},{key:"HandledRatio",get:function(){return this.handledRatio},set:function(t){this.handledRatio=t,this.OnSetHandledRatio_Funcs.forEach((function(e){return e(t)}))}},{key:"IsUpdateDataDone",set:function(t){this.OnIsUpdateDataDone_Funcs.forEach((function(t){return t()}))}},{key:"Reference_MassGroupSetting_SelectVM",get:function(){return this.Dict.Dict.ViewItem.MassGroupSettingSelectVM}},{key:"MassGroupInput_Toggle_Classname",get:function(){switch(this.MassGroupInput_State){case fo:return"btn-warning";case ho:return"btn-success"}}},{key:"MassGroupInput_Toggle_Content",get:function(){switch(this.MassGroupInput_State){case fo:return"sel";case ho:return"inp"}}},{key:"MassGroupName",get:function(){return this.massGroupName||(this.massGroupName=or(this)),this.massGroupName},set:function(t){this.massGroupName=t}},{key:"MassGroupNameVM",get:function(){var t=this;this.massGroupNameVM||((this.massGroupNameVM=y(this.MassGroupName,"T\xean set kh\u1ed1i l\u01b0\u1ee3ng")).onSetContent=function(e){return t.MassGroupName=e});return this.massGroupNameVM}},{key:"MassGroupSelectVM",get:function(){var t=this;if(!this.massGroupSelectVM){var e=this.massGroupSelectVM=Fe([],void 0);e.Placeholder="B\u1ed9 set kh\u1ed1i l\u01b0\u1ee3ng",e.OnSelectedItemChanged=function(e){t.MassGroupName=null===e||void 0===e?void 0:e.Name}}return this.massGroupSelectVM}},{key:"MassGroupInput_Element",get:function(){var t=this;switch(this.MassGroupInput_State){case fo:var e=(s=this.MassGroupSelectVM).Items,n=e.findIndex((function(e){return e.Name===t.MassGroupName}));return s.InitialItem=-1!==n?e[n]:void 0,Object(i.jsx)(Ae,{store:s});case ho:var s;return(s=this.MassGroupNameVM).Content=this.MassGroupName,Object(i.jsx)(S,{store:s})}}},{key:"Override_MassGroup_ModalElement",get:function(){var t=this;return Object(i.jsx)(Ui.a,{title:"C\u1ea3nh b\xe1o",visible:this.Is_Override_MassGroup_Modal_Open,onOk:function(){t.Is_Override_MassGroup_Modal_Open=!1,t.Override_MassGroup_Modal_OKFunc()},onCancel:function(){return t.Is_Override_MassGroup_Modal_Open=!1},children:"Thi\u1ebft l\u1eadp \u0111\xe3 c\xf3 s\u1eb5n, b\u1ea1n c\xf3 mu\u1ed1n ghi \u0111\xe8 kh\xf4ng?"})}},{key:"ExportTitle",get:function(){var t,e=null===(t=po().CurrentProject)||void 0===t?void 0:t.Name;e=e?e+"_":"",this.ColumnField===W&&(e+="phase_");var n=Qc()(Date.now()).format("YYMMDD");return e+="masstable_".concat(n)}},{key:"ExcelWorkbook",get:function(){return function(t){var e=new oo;return e.Table=t,e}(this).ResultData}},{key:"ExcelExport",get:function(){var t=this;return this.excelExport||(this.excelExport=function(t,e,n,i){var s=new Zc;return s.FileName=t,s.Override_Get_FileName=n,s.Workbook=e,s.Override_Get_Workbook=i,s}(void 0,void 0,(function(){return t.ExportTitle}),(function(){return t.ExcelWorkbook}))),this.excelExport}}]),t}(),vo=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.MassTable.Items=t}},{key:"MassTable",get:function(){return this.massTable||(this.massTable=function(t){var e=new mo;return e.Dict=t,e}(this)),this.massTable}},{key:"MassGroupSetting",set:function(t){this.MassTable.MassGroupSetting=t}}]),t}(),go=function(){return ou.Instance},Io=function(){function t(){var e=this;Object(o.a)(this,t),this.Projects=[],this.Phases=[],this.OnGetItemsDone_Funcs=[],this.isHavePhase=!1,this.GetMassData=function(){void 0===go().Is_First_Get_MassTable?go().Is_First_Get_MassTable=!0:go().Is_First_Get_MassTable=!1;var t,n,i=go().Workpackage_Dict;i.IsDataChanged&&i.RefreshData(),t=e.ApiData,n=function(t){var n=e.MassItem_Dict;n.MassGroupSetting=e.MassGroupSetting?e.MassGroupSetting:void 0,n.Items=t,e.GetItemsDone=!0},R("https://api.bimdev.vn/api/hbmr/newlist",t,void 0,2e6).then((function(t){return t.data})).then((function(t){if(t){var e=t.map((function(t){return gi(t)}));n&&n(e)}else console.log("mass result undefined")}))}}return Object(u.a)(t,[{key:"ApiData",get:function(){return{projectIds:(t=this).Projects.map((function(t){return t._id})),phaseIds:t.IsHavePhase?t.Phases.map((function(t){return t._id})):void 0};var t}},{key:"MassItem_Dict",get:function(){return this.massItem_Dict||(this.massItem_Dict=function(t){var e=new vo;return e.Dict=t,e}(this)),this.massItem_Dict}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"IsHavePhase",get:function(){return this.isHavePhase},set:function(t){this.isHavePhase=t,this.MassItem_Dict.MassTable.ColumnField=t?W:H}}]),t}(),bo=function(){function t(){var e=this;Object(o.a)(this,t),this.Get_Project=function(t){var n=e.Items,i=n.findIndex((function(e){return e._id===t._id}));if(-1===i){var s=ui(t,e);return n.push(s),s}return n[i]}}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=[]),this.items},set:function(t){this.items=t,this.GetItemsDone=!0}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}}]),t}(),_o=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}($e),yo=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"ApiData",get:function(){return jo(this)}}]),t}(),jo=function(t){return{categoryFilter:t.CategoryFilter.ApiData,familyFilter:t.IsHaveFamilyFilter?t.FamilyFilter.ApiData:void 0}},So=function(t,e){var n=new _o;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=function(t){var e=new yo;return e.CategoryFilter=Yt(t.categoryFilter),e}(t.data),n.Dict=e,n},Oo=function(){function t(){var e=this;Object(o.a)(this,t),this.GetData=function(){if(e.OnGetData)return e.OnGetData()},this.isNew=!0,this.AddDatabase=function(){var t=e.EditItemId,n=e.Name,i=e.Description,s=e.SettingType,r=e.Data.ApiData,a=e.UrlPrefix,c={_id:t,name:n,description:i,settingType:s,data:r},o="https://api.bimdev.vn/api/hbs/".concat(a);(t?N("".concat(o,"/edit"),c):R("".concat(o,"/add"),c)).then((function(t){return t.data})).then((function(t){e.AddDatabaseDone=!0,e.NewItem=e.GetEditItem(t,e.Dict),e.Dict.Update()}))}}return Object(u.a)(t,[{key:"Data",get:function(){return this.data||(this.data=this.GetData()),this.data},set:function(t){this.data=t}},{key:"EditItem",get:function(){return this.editItem},set:function(t){this.editItem=t,this.EditItemId=t?t._id:void 0}},{key:"IsNew",get:function(){return this.isNew},set:function(t){this.isNew=t,t&&(this.EditItem=void 0)}},{key:"UrlPrefix",get:function(){return this.urlPrefix||(this.urlPrefix=function(t){var e=void 0;switch(t.SettingType){case Dn:e="ef";break;case Tn:e="me";break;case wn:e="mg"}return e}(this)),this.urlPrefix}},{key:"AddDatabaseDone",set:function(t){this.OnAddDatabaseDone&&this.OnAddDatabaseDone(t)}}]),t}(),Mo=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).GetEditItem=function(t,e){return So(t,e)},t}return n}(Oo),ko=function(t){var e=new Mo;return e.Dict=t,e.Name="B\u1ed9 l\u1ecdc c\u1ed9t",e.Description="m\xf4 t\u1ea3 b\u1ed9 l\u1ecdc",e.SettingType=Dn,e.OnGetData=function(){return function(){var t=new yo,e=new Xt;e.CategoryType=Rt,e.ValueType=At,e.StringFilterType=Wt,e.Values=["Floors"],t.CategoryFilter=e,t.IsHaveFamilyFilter=!1;var n=new Xt;return n.CategoryType=Pt,n.ValueType=At,n.StringFilterType=Wt,n.Values=[],t.FamilyFilter=n,t}()},e},Vo=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},this.Update=function(){var t=i.Input;if(t.IsNew)i.Add(t.NewItem);else{var e=t.EditItem;mt(e,(function(){e.Name=t.Name,e.Description=t.Description,e.Data=t.Data}))}},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},L("https://api.bimdev.vn/api/hbs/ef/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return So(t,e)}));n&&n(i)}))}return Object(u.a)(t,[{key:"GetInput",value:function(){return ko(this)}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Input",get:function(){return this.input||(this.input=this.GetInput()),this.input}}]),t}(),Co=function(){function t(){var e=this;Object(o.a)(this,t),this.AddNewValueSetting=function(){var t=e.ValueSettings,n=Jr(e);return t.push(n),n}}return Object(u.a)(t,[{key:"ElementFilter",get:function(){return this.elementFilter||(this.elementFilter=To(this)),this.elementFilter},set:function(t){this.elementFilter=t,this.elementFilterId=t?t._id:void 0}},{key:"ValueSettings",get:function(){return this.valueSettings||(this.valueSettings=wo(this)),this.valueSettings},set:function(t){this.valueSettings=t}},{key:"ApiData",get:function(){return Fo(this)}}]),t}(),Do=function(t){var e=new Co;return e.elementFilterId=t.elementFilterId,e.ValueSettings=t.exportSettings.map((function(t){return function(t,e){var n=new Kr;return n.RetrieveType=t.retrieveType,n.MassType=t.massType,n.ValueFilter=Yt(t.valueFilter,Et),n.workpackageId=t.workpackageId,n.Dict=e,n}(t,e)})),e},To=function(t){var e=t.elementFilterId;if(e){var n=ou.Instance.ElementFilterSetting_Dict.Items;if(n){var i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}},wo=function(t){return[Jr(t)]},Fo=function(t){return{elementFilterId:t.elementFilterId,exportSettings:t.ValueSettings.map((function(t){return t.ApiData}))}},xo=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}($e),Go=function(t,e){var n=new xo;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=Do(t.data),n.Dict=e,n},Lo=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).GetEditItem=function(t,e){return Go(t,e)},t}return n}(Oo),No=function(t){var e=new Lo;return e.Dict=t,e.Name="B\xeat\xf4ng s\xe0n",e.Description="m\xf4 t\u1ea3 thi\u1ebft l\u1eadp",e.SettingType=Tn,e.OnGetData=function(){return new Co},e},Ro=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},this.Update=function(){var t=i.Input;if(t.IsNew)i.Add(t.NewItem);else{var e=t.EditItem;mt(e,(function(){e.Name=t.Name,e.Description=t.Description,e.Data=t.Data}))}},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},L("https://api.bimdev.vn/api/hbs/me/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return Go(t,e)}));n&&n(i)}))}return Object(u.a)(t,[{key:"GetInput",value:function(){return No(this)}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Input",get:function(){return this.input||(this.input=this.GetInput()),this.input}}]),t}(),Po=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},L("https://api.bimdev.vn/api/hbs/mg/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return pr(t,e)}));n&&n(i)}))}return Object(u.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}}]),t}(),Eo=function t(){Object(o.a)(this,t)},Ao=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=function(t){var e=[],n=new Eo;n.Color="#1956c9";var i=new Xt;return i.ValueType=Ht,i.NumberFilterType=zt,i.Values=[.8],n.Filter=i,e.push(n),(n=new Eo).Color="#3f79d6",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualLeft=!0,i.Values=[.8,.85],n.Filter=i,e.push(n),(n=new Eo).Color="#6f9fe9",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualLeft=!0,i.Values=[.85,.9],n.Filter=i,e.push(n),(n=new Eo).Color="#a5c2f2",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualLeft=!0,i.Values=[.9,.95],n.Filter=i,e.push(n),(n=new Eo).Color="#c9d9f6",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualLeft=!0,i.Values=[.95,1],n.Filter=i,e.push(n),(n=new Eo).Color="#f3cccc",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualRight=!0,i.Values=[1,1.05],n.Filter=i,e.push(n),(n=new Eo).Color="#e9999a",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualRight=!0,i.Values=[1.05,1.1],n.Filter=i,e.push(n),(n=new Eo).Color="#de6568",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualRight=!0,i.Values=[1.1,1.15],n.Filter=i,e.push(n),(n=new Eo).Color="#c90010",(i=new Xt).ValueType=Ht,i.NumberFilterType=Jt,i.IsEqualRight=!0,i.Values=[1.15,1.2],n.Filter=i,e.push(n),(n=new Eo).Color="#980009",(i=new Xt).ValueType=Ht,i.NumberFilterType=qt,i.Values=[1.2],n.Filter=i,e.push(n),e}()),this.items}}]),t}(),Ho=function(){function t(){Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[]}return Object(u.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}}]),t}(),Wo=function t(){Object(o.a)(this,t),this.Values=[],this.Count=0},Uo=function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.AddItem=function(t){var n=e.Items,i=void 0,s=n.findIndex((function(e){return gt(e.Values,t)}));return-1===s?((i=new Wo).Values=t,n.push(i)):i=n[s],i.Count++,i}},Bo=function(){function t(){var e=this;Object(o.a)(this,t),this.Description="m\xf4 t\u1ea3 c\xf4ng t\xe1c",this.isNew=!0,this.AddDatabase=function(){var t=e.WorkpackageId,n=e.Code,i=e.Name,s=e.Description,r=e.SupId,a={_id:t,name:i,code:n,description:s,supId:r},c="https://api.bimdev.vn/api/hbwp";(t?N("".concat(c,"/edit"),a):R("".concat(c,"/add"),a)).then((function(t){return t.data})).then((function(t){e.AddDatabaseDone=!0,e.NewWorkpackage=hu(t,e.Dict),e.Dict.Update()}))}}return Object(u.a)(t,[{key:"IsNew",get:function(){return this.isNew},set:function(t){this.isNew=t,t&&(this.Workpackage=void 0)}},{key:"Workpackage",get:function(){return this.workpackage},set:function(t){this.workpackage=t,this.WorkpackageId=t?t._id:void 0}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t,this.SupId=t?t._id:void 0}},{key:"AddDatabaseDone",set:function(t){this.OnAddDatabaseDone&&this.OnAddDatabaseDone(t)}}]),t}(),Ko=function(){function t(){var e=this;Object(o.a)(this,t),this.Add=function(t){e.Workpackages.push(t),e.OnAdd&&e.OnAdd(t)},this.Update=function(){var t=e.WorkpackageInput,n=t.Workpackage;if(t.IsNew)e.Add(t.NewWorkpackage);else{mt(n,(function(){n.Code=t.Code,n.Name=t.Name,n.Description=t.Description,n.FullName=n.GetFullName()}))}e.IsDataChanged=!0},this.RefreshData=function(){e.Workpackages.forEach((function(t){t.SubItems=void 0,t.UpperList=void 0,t.LowerList=void 0,t.Rank=void 0})),e.IsDataChanged=!1},gu(this,(function(t){e.Workpackages=t,e.GetWorkpackagesDone=!0}))}return Object(u.a)(t,[{key:"GetWorkpackagesDone",set:function(t){this.OnGetWorkpackagesDone&&this.OnGetWorkpackagesDone(t)}},{key:"WorkpackageInput",get:function(){this.workpackageInput||((this.workpackageInput=new Bo).Dict=this);return this.workpackageInput}}]),t}(),zo="https://api.bimdev.vn/api/hbs/md",qo=function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"ApiData",get:function(){return{columns:this.Columns,mainMassType:this.MainMassType}}}]),t}(),Jo=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).SettingType=xn,t.Url=zo,t}return n}($e),Yo=function(){return ou.Instance},Qo=function(t,e){e||(e=Yo().MassDetailSetting_Dict);var n=new Jo;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=function(t){var e=new qo;return e.Columns=t.columns,e.MainMassType=t.mainMassType,e}(t.data),n.Dict=e,n},Zo=function(){var t=new Jo;return t.Dict=Yo().MassDetailSetting_Dict,t.Data=function(){var t=new qo;return t.Columns=[B,K],t.MainMassType=P,t}(),t},Xo=function(t){var e=new Jo;return e.Name=t.Name,e.Description=t.Description,e.SettingType=t.SettingType,e.Data=function(t){var e=new qo;return e.Columns=t.Columns,e.MainMassType=t.MainMassType,e}(t.Data),e.Dict=t.Dict,e},$o=function(){function t(){Object(o.a)(this,t),this.OnGetItemsDone_Func_Dict=[]}return Object(u.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.GetItemsDone=!0}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Func_Dict.forEach((function(t){return t.Value()}))}}]),t}(),tu=function(){var t,e,n=new $o;return t=n,e=function(t){n.Items=t},L("".concat(zo,"/list")).then((function(t){return t.data})).then((function(n){if(n){var i=n.map((function(e){return Qo(e,t)}));e&&e(i)}})),n},eu=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=new bo;return t&&li(e,(function(t){e.Items=t})),e},nu=function(t){return[At,Ht]},iu=function(t){return[Wt,Ut,Bt]},su=function(t){return[zr,"bymaterial","byrebar"]},ru=function(t){return["Discipline",hr]},au=function(t){return[q,J,Y,Z,z,Q]},cu=function(t){return[P,E,A]},ou=function(){function t(){Object(o.a)(this,t),this.DebugPoints=[],this.IsDebug=!1,this.OnSet_CurrentProject_Func_Dict=[],this.ApiUrl="https://api.bimdev.vn/api",this.UpdatedDate="14/04/2021",this.LoggingItems=[]}return Object(u.a)(t,[{key:"categoryData",get:function(){return Nt.Instance}},{key:"Workpackage_Dict",get:function(){return this.workpackage_Dict||(this.workpackage_Dict=new Ko),this.workpackage_Dict}},{key:"ElementFilterSetting_Dict",get:function(){return this.elementFilterSetting_Dict||(this.elementFilterSetting_Dict=new Vo),this.elementFilterSetting_Dict}},{key:"MassExportSetting_Dict",get:function(){return this.massExportSetting_Dict||(this.massExportSetting_Dict=new Ro),this.massExportSetting_Dict}},{key:"MassGroupSetting_Dict",get:function(){return this.massGroupSetting_Dict||(this.massGroupSetting_Dict=new Po),this.massGroupSetting_Dict}},{key:"Project_Dict",get:function(){return this.project_Dict||(this.project_Dict=eu(!0)),this.project_Dict}},{key:"Project_Dict_ForMassDetail",get:function(){return this.project_Dict_ForMassDetail||(this.project_Dict_ForMassDetail=eu()),this.project_Dict_ForMassDetail}},{key:"Phase_Dict_ForMassDetail",get:function(){return this.phase_Dict_ForMassDetail||(this.phase_Dict_ForMassDetail=Kn()),this.phase_Dict_ForMassDetail}},{key:"MassResultComp",get:function(){return this.massResultComp||(this.massResultComp=new Io),this.massResultComp},set:function(t){this.massResultComp=t}},{key:"FilterValueTypes",get:function(){return this.filterValueTypes||(this.filterValueTypes=nu()),this.filterValueTypes}},{key:"StringFilterTypes",get:function(){return this.stringFilterTypes||(this.stringFilterTypes=iu()),this.stringFilterTypes}},{key:"ValueRetrieveTypes",get:function(){return this.valueRetrieveTypes||(this.valueRetrieveTypes=su()),this.valueRetrieveTypes}},{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=this.categoryData.CategoryNames),this.categoryNames}},{key:"ParameterNames",get:function(){return this.parameterNames||(this.parameterNames=["Volume","HB_Formwork_Total"]),this.parameterNames}},{key:"MassPropertyNames",get:function(){return this.massPropertyNames||(this.massPropertyNames=ru()),this.massPropertyNames}},{key:"MassItemFields",get:function(){return this.massItemFields||(this.massItemFields=au()),this.massItemFields}},{key:"MIFs_ForMassGroup",get:function(){return this.mifs_ForMassGroup||(this.mifs_ForMassGroup=ut()),this.mifs_ForMassGroup}},{key:"MassTypes",get:function(){return this.massTypes||(this.massTypes=cu()),this.massTypes}},{key:"VersionCompareSetting",get:function(){return this.versionCompareSetting||(this.versionCompareSetting=new Ao),this.versionCompareSetting}},{key:"WorkItemExportSetting_Dict",get:function(){return this.workItemExportSetting_Dict||(this.workItemExportSetting_Dict=new Ho),this.workItemExportSetting_Dict}},{key:"MassDetailSetting_Dict",get:function(){return this.massDetailSetting_Dict||(this.massDetailSetting_Dict=tu()),this.massDetailSetting_Dict}},{key:"Tracking",get:function(){return this.tracking||(this.tracking=new Uo),this.tracking}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),uu=function(){function t(){var e=this;Object(o.a)(this,t),this.GetFullName=function(){return"".concat(e.Code," - ").concat(e.Name)},this.Delete=function(){var t=e._id;N("https://api.bimdev.vn/api/hbwp/delete",{_id:t}).then((function(t){return t.data})).then((function(t){return T.b.success("Delete workpackage successfully")}));var n=e.Dict;n.Workpackages.splice(e.Index,1),e.OnDelete&&e.OnDelete(),n.IsDataChanged=!0}}return Object(u.a)(t,[{key:"Index",get:function(){return this.Dict.Workpackages.indexOf(this)}},{key:"SupItem",get:function(){return this.supItem||(this.supItem=du(this)),this.supItem}},{key:"Code",get:function(){return this.code},set:function(t){this.code=t,this.OnCodeChanged&&this.OnCodeChanged(t)}},{key:"Name",get:function(){return this.name},set:function(t){this.name=t,this.OnNameChanged&&this.OnNameChanged(t)}},{key:"Description",get:function(){return this.description},set:function(t){this.description=t,this.OnDescriptionChanged&&this.OnDescriptionChanged(t)}},{key:"FullName",get:function(){return this.fullName||(this.fullName=this.GetFullName()),this.fullName},set:function(t){this.fullName=t,this.OnFullNameChanged&&this.OnFullNameChanged(t)}},{key:"SubItems",get:function(){return this.subItems||(this.subItems=fu(this)),this.subItems},set:function(t){this.subItems=t}},{key:"UpperList",get:function(){return this.upperList||(this.upperList=pu(this)),this.upperList},set:function(t){this.upperList=t}},{key:"LowerList",get:function(){return this.lowerList||(this.lowerList=mu(this)),this.lowerList},set:function(t){this.lowerList=t}},{key:"Rank",get:function(){return this.rank||(this.rank=vu(this)),this.rank},set:function(t){this.rank=t}},{key:"LowerIds",get:function(){return this.LowerList.map((function(t){return t._id}))}}]),t}(),lu=function(){return ou.Instance},hu=function(t,e){var n=t._id,i=t.name,s=t.code,r=t.description,a=t.supId,c=new uu;return c._id=n,c.Name=i,c.Code=s,c.Description=r,c.SupId=a,c.Dict=e,c},du=function(t){var e=t.SupId,n=lu().Workpackage_Dict.Workpackages,i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0},fu=function(t){var e=t._id;return lu().Workpackage_Dict.Workpackages.filter((function(n){return n!==t&&n.SupId===e}))},pu=function(t){var e=t.SupItem;if(e){var n=Object(O.a)(e.UpperList);return n.push(t),n}return[t]},mu=function(t){var e=[t];return t.SubItems.forEach((function(t,n){e.push.apply(e,t.LowerList)})),e},vu=function(t){var e=t.SupItem;return e?e.Rank+1:0},gu=function(t,e){L("https://api.bimdev.vn/api/hbwp/list").then((function(t){return t.data})).then((function(n){var i=n.map((function(e){return hu(e,t)}));e&&e(i)}))},Iu=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.workpackageVMs=void 0,this.Add=function(t){e.WorkpackageVMs.push(t),e.OnAdd&&e.OnAdd(t)},Object(g.k)(this,{workpackageVMs:g.l})}return Object(u.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"M2VM",get:function(){return this.Workpackage_Dict.M2VM},set:function(t){this.Workpackage_Dict.M2VM=t}},{key:"WorkpackageVMs",get:function(){return this.workpackageVMs||(this.workpackageVMs=function(t){var e=t.Workpackage_Dict.Workpackages;if(e)return e.map((function(e){return vr(e,t)}))}(this)),this.workpackageVMs}},{key:"CurrentWorkpackageVM",set:function(t){this.Workpackage_Dict=t,this.Workpackage_Dict.CurrentWorkpackage=t.Workpackage,this.WorkpackageInputVM.WorkpackageVM=t}},{key:"WorkpackageInputVM",get:function(){return this.workpackageInputVM||(this.workpackageInputVM=Or(this)),this.workpackageInputVM}}]),t}(),bu=f.a.Option,_u=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){var e=i.state,n=e.WorkpackageVMs;e.CurrentWorkpackageVM=n[t]};var s=i.props.store;return i.state=s||new Iu,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.WorkpackageVMs,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(bu,{value:e,children:n},e)})):"",s=t.WorkpackageInputVM,r=s.CommandVM;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"C\xf4ng t\xe1c"})}),Object(i.jsx)(f.a,{showSearch:!0,style:{width:"100%"},placeholder:"search c\xf4ng t\xe1c",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(S,{store:s.CodeVM}),Object(i.jsx)(S,{store:s.NameVM}),Object(i.jsx)(S,{store:s.DescriptionVM}),Object(i.jsx)(Ae,{store:s.SupItemSelectVM}),Object(i.jsxs)("div",{children:[Object(i.jsx)(xa,{store:s.IsNewVM}),Object(i.jsx)(m.a,{style:{margin:10},onClick:s.AddDatabase,children:r.Content}),s.DeleteView]})]})]})}}]),n}(s.Component),yu=(Object(d.a)(_u),f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).test=function(){console.log("test button")},i.onValueChange=function(t){var e=i.state,n=e.ItemVMs;e.CurrentItemVM=n[t]};var s=i.props.store;return i.state=s||new Cr,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{children:Object(i.jsx)(Ae,{store:t.ValueTypeSelectVM})}),Object(i.jsx)("div",{children:Object(i.jsx)(Ae,{store:t.StringFilterTypeSelectVM})}),Object(i.jsx)("div",{children:Object(i.jsx)(Ji,{store:t.ValuesSelectVM})})]})}}]),n}(s.Component)),ju=Object(d.a)(yu),Su=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Tr,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.IsHaveFamilyFilter;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:"Thi\u1ebft l\u1eadp l\u1ecdc Category"}),Object(i.jsx)(ju,{store:t.CategoryFilterVM}),Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:Object(i.jsx)(xa,{store:t.IsHaveFamilyFilterVM})}),e?Object(i.jsx)(ju,{store:t.FamilyFilterVM}):""]})}}]),n}(s.Component)),Ou=Object(d.a)(Su),Mu=f.a.Option,ku=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).test=function(){console.log("test button")},i.onValueChange=function(t){var e=i.state,n=e.Items;e.CurrentItem=n[t]};var s=i.props.store;return i.state=s||new Mr,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Items,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(Mu,{value:e,children:n},e)})):"",s=t.Input;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"B\u1ed9 l\u1ecdc \u0111\u1ed1i t\u01b0\u1ee3ng"})}),Object(i.jsx)(f.a,{showSearch:!0,style:{width:"100%"},placeholder:"search b\u1ed9 l\u1ecdc",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(S,{store:s.NameVM}),Object(i.jsx)(S,{store:s.DescriptionVM}),Object(i.jsx)(Ou,{store:s.DataVM}),Object(i.jsx)(xa,{store:s.IsNewVM}),Object(i.jsx)(m.a,{style:{margin:10},onClick:s.AddDatabase,children:s.CommandVM.Content}),s.DeleteView]})]})}}]),n}(s.Component),Vu=(Object(d.a)(ku),f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Pr,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=Le("top right");return e.wrapper=Object(i.jsx)(m.a,{size:"small",type:"primary",onClick:t.Delete,children:"x"}),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{style:{padding:"10px 35px 10px 10px",margin:"8px auto",border:"solid 0.5px",borderRadius:"10px",position:"relative"},children:[Object(i.jsx)(Re,{store:e}),Object(i.jsx)(Ae,{store:t.RetrieveTypeSelectVM}),Object(i.jsx)(Ae,{store:t.MassTypeSelectVM}),Object(i.jsx)(ju,{store:t.ValueFilterVM}),Object(i.jsx)(Ae,{store:t.WorkpackageSelectVM})]})})}}]),n}(s.Component)),Cu=Object(d.a)(Vu),Du=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Zr,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.ValueSettingVMs.map((function(t,e){return Object(i.jsx)(Cu,{store:t},e)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(Ae,{store:t.ElementFilterSelectVM}),Object(i.jsxs)(p.a,{orientation:"left",plain:!0,children:["Thi\u1ebft l\u1eadp gi\xe1 tr\u1ecb",Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddNewValueSettingVM,style:{marginLeft:15},children:"+"})]}),e]})}}]),n}(s.Component)),Tu=Object(d.a)(Du),wu=f.a.Option,Fu=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){var e=i.state,n=e.Items;e.CurrentItem=n[t]};var s=i.props.store;return i.state=s||new aa,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Items,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(wu,{value:e,children:n},e)})):"",s=t.Input;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp xu\u1ea5t kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(i.jsx)(f.a,{showSearch:!0,style:{width:"100%"},placeholder:"search thi\u1ebft l\u1eadp",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(S,{store:s.NameVM}),Object(i.jsx)(S,{store:s.DescriptionVM}),Object(i.jsx)(Tu,{store:s.DataVM}),Object(i.jsxs)("div",{children:[Object(i.jsx)(xa,{store:s.IsNewVM}),Object(i.jsx)(m.a,{style:{margin:10},onClick:s.AddDatabase,children:s.CommandVM.Content}),s.DeleteView]})]})]})}}]),n}(s.Component),xu=(Object(d.a)(Fu),n(331)),Gu=(n(155),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new _s,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;if("D\u1ea6M 6, 7"===t.Dict.Row.Title)t.Value;return Object(i.jsx)(i.Fragment,{children:t.Value})}}]),n}(s.Component)),Lu=(Object(d.a)(Gu),f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new bs,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("span",{className:"d-none",children:t.ContentVM.Content}),Object(i.jsx)("td",{style:t.TDStyle,children:Object(i.jsx)("div",{className:"masscell__div",children:Object(i.jsxs)("div",{className:"masscell__value",children:[t.IsHaveWarning?Object(i.jsx)(Xi.a,{trigger:"hover",content:Object(i.jsx)("div",{children:t.TLS_LevelGroup_Descriptions?t.TLS_LevelGroup_Descriptions.map((function(t){return Object(i.jsx)("span",{children:t},t)})):""}),children:Object(i.jsx)(ns.a,{className:"masscell__warningicon"})}):"",Object(i.jsx)("a",{style:t.AStyle,onClick:t.ShowDetail,children:t.ContentVM.Content})]})})})]})}}]),n}(s.Component)),Nu=Object(d.a)(Lu),Ru=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Is,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Dict,s=e.Columns,r=t.IsShowSub?t.SubItems.map((function(t,e){return Object(i.jsx)(n,{store:t},t.id)})):"",a=t.IsHaveSub?Object(i.jsx)(m.a,{size:"small",style:{marginRight:5,minWidth:25},type:"primary",onClick:t.ToggleSub,children:Object(i.jsx)(_e,{store:t.ToggleButtonContentVM})}):Object(i.jsx)("div",{style:{padding:"0 15.5px"}});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:Object(i.jsxs)("div",{className:"massrow__title__wrapper",style:t.Style,children:[a,Object(i.jsx)("span",{children:Object(i.jsx)(Ma,{store:t.Editable_TitleVM})}),t.IsHave_Addition_Wrapper?Object(i.jsxs)("div",{className:"massrow__addition__wrapper",children:[t.AdditionInfomation_Element,t.RawValue_Element]}):"",t.HoverToolElement,t.ModalElement]})}),s.map((function(n,s){var r=e.GetCell(n,t,!1);return r?Object(i.jsx)(Nu,{store:r},r.id):""}))]}),r]})}}]),n}(s.Component)),Pu=Object(d.a)(Ru),Eu=n(177),Au=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).Test=function(t){};var s=i.props.store;return i.state=s||new Jc,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(Eu.CSVLink,{data:t.Data,filename:t.FileName,headers:t.Headers,onClick:this.Test,children:t.Title})})}}]),n}(s.Component),Hu=(Object(d.a)(Au),n(343)),Wu=n(344),Uu=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new mo,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Columns,n=t.MainRows,s=e?e.map((function(t,e){return Object(i.jsx)("th",{scope:"col",className:"text-center masscell_th",children:t.Name},t.id)})):"",r=n?n.map((function(t,e){return Object(i.jsx)(Pu,{store:t},t.id)})):"";return Object(i.jsx)(i.Fragment,{children:t.IsValidTable?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"masstable__title__wrapper",children:[Object(i.jsx)("h4",{className:"masstable__title",children:"B\u1ea2NG T\u1ed4NG H\u1ee2P KH\u1ed0I L\u01af\u1ee2NG"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(m.a,{type:"primary",size:"small",style:{marginLeft:15},disabled:t.IsOnSaveMassGroup,onClick:t.SaveMassGroup,children:Object(i.jsx)(Hu.a,{})}),Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.Export,className:"masstable__export",children:Object(i.jsx)(Wu.a,{})})]})]}),t.IsOnSaveMassGroup?Object(i.jsx)("div",{className:"mass__groupname__wrapper",children:Object(i.jsxs)("div",{className:"mass__groupname__wrapper_dec",children:[Object(i.jsx)("div",{className:"mass__groupname__input",children:t.MassGroupInput_Element}),Object(i.jsxs)("div",{className:"mass__groupname__button_wrapper",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",className:t.MassGroupInput_Toggle_Classname,onClick:t.Toggle_MassGroupInput_State,children:t.MassGroupInput_Toggle_Content}),Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.MassGroupInputOK,children:"ok"}),Object(i.jsx)(m.a,{type:"default",size:"small",onClick:t.MassGroupInputCancel,children:"cancel"}),t.Override_MassGroup_ModalElement]})]})}):"",Object(i.jsxs)("table",{className:"table table-bordered table-sm masstable",children:[Object(i.jsx)("thead",{className:"thead-light",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",className:"masstitle__th",children:Object(i.jsx)(m.a,{onClick:t.AddMainRow,type:"primary",size:"small",style:{backgroundColor:"#52c41a",border:"none"},children:"+"})}),s]})}),Object(i.jsx)("tbody",{children:r})]})]}):""})}}]),n}(s.Component)),Bu=Object(d.a)(Uu),Ku=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||Pc.Instance.MassResultCompVM,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[t.IsShowProjectSelect?Object(i.jsx)(Ji,{store:t.ProjectSelectVM}):"",t.CanHavePhase?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(xa,{store:t.IsShowPhaseSelectVM}),t.IsHavePhase?Object(i.jsx)(Ji,{store:t.PhaseSelectVM}):""]}):"",Object(i.jsx)("div",{style:{marginTop:8},children:Object(i.jsx)(Ae,{store:t.MassGroupSettingSelectVM})}),Object(i.jsx)(m.a,{style:{marginTop:8},onClick:t.GetMassData,size:"middle",type:"primary",children:"GET DATA"}),Object(i.jsx)("div",{style:{marginTop:15},children:t.IsDataPending?Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(i.jsxs)("div",{children:[Object(i.jsx)(xu.a,{}),Object(i.jsx)(_e,{store:t.LoadingSpinTipVM})]})}):Object(i.jsx)(Bu,{store:t.MassItem_Dict.MassTable})})]})}}]),n}(s.Component)),zu=Object(d.a)(Ku),qu=(n(310),n(345)),Ju=n(346),Yu=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndex=t};var s=i.props.store;return i.state=s||new Ze,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Columns,n=t.Rows,s="";if(e&&n){var r=Object(i.jsx)("thead",{className:"thead-light",children:Object(i.jsx)("tr",{children:e.map((function(t){return Object(i.jsx)("th",{scope:"col",className:t.ClassName,children:Object(i.jsxs)("div",{className:"column__title__wrapper",onMouseEnter:t.Show_MoveCommand,onMouseLeave:t.Collapse_MoveCommand,children:[t.CanShow_MoveCommand?Object(i.jsx)("div",{className:"column__title__left",children:t.IsShow_MoveCommand?Object(i.jsx)(m.a,{type:"primary",size:"small",className:"column__title__move__button",onClick:t.MoveLeft,children:Object(i.jsx)(qu.a,{})}):Object(i.jsx)("div",{className:"column__title__move__blank"})}):"",t.TitleRender(),t.CanShow_MoveCommand?Object(i.jsx)("div",{className:"column__title__right",children:t.IsShow_MoveCommand?Object(i.jsx)(m.a,{type:"primary",size:"small",className:"column__title__move__button right",onClick:t.MoveRight,children:Object(i.jsx)(Ju.a,{})}):Object(i.jsx)("div",{className:"column__title__move__blank"})}):""]})},t.Key)}))})}),a=Object(i.jsx)("tbody",{children:n.map((function(t){return Object(i.jsx)("tr",{children:t.Cells.map((function(t){return Object(i.jsx)("td",{children:t.Render()},t.Key)}))},t.Key)}))});s=Object(i.jsxs)("table",{className:"table table-sm",children:[r,a]})}return Object(i.jsx)(i.Fragment,{children:s})}}]),n}(s.Component)),Qu=Object(d.a)(Yu),Zu=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Sc,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(p.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp xu\u1ea5t h\u1ea1ng m\u1ee5c"})}),Object(i.jsx)(Qu,{store:t.TableVM})]})}}]),n}(s.Component)),Xu=(Object(d.a)(Zu),n(78)),$u=n(33),tl=(n(311),function(){function t(){Object(o.a)(this,t)}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=il(this)),this.items},set:function(t){this.items=t}},{key:"CurrentProject",get:function(){return this.currentProject},set:function(t){this.currentProject=t,this.Items=il(this)}}]),t}()),el=function t(){Object(o.a)(this,t)},nl=function(t,e){var n=new el;return n.Title=t,n.Value=e,n},il=function(t){return t.CurrentProject?[nl("MASS",Fc),nl("LEVEL",xc),nl("PHASE",Gc),nl("INPUT DATA",Lc)]:[nl("MASS",Fc),nl("MEP SETTING",Nc),nl("DOCUMENT",Rc)]},sl=function(){return Pc.Instance},rl=function(){return function(t){var e=new ll;return e.ModelItem=t,bt(sl().OnSet_CurrentProject_Func_Dict,(function(){return e.CurrentProject=sl().CurrentProject}),!1),e}(function(){var t=new tl;return t.Title="HikariComplex",t}())},al=function(t){return t.ModelItem.Items},cl=function(t){return t.CurrentProject?"D\u1ef0 \xc1N":"C\xc1C D\u1ef0 \xc1N"},ol=function(t){return t.CurrentProject?t.CurrentProject.Name:""},ul=function(){return Pc.Instance},ll=function(){function t(){var e=this;Object(o.a)(this,t),this.preTitle=void 0,this.title=void 0,this.items=void 0,this.projectViewType=void 0,this.GetItemClass=function(t){return"leftnav__item ".concat(t.Value===e.ProjectViewType?"active":"")},this.SetView=function(t){e.ProjectViewType=t.Value},Object(g.k)(this,{projectViewType:g.l,items:g.l,title:g.l,preTitle:g.l})}return Object(u.a)(t,[{key:"PreTitle",get:function(){return this.preTitle||(this.preTitle=cl(this)),this.preTitle},set:function(t){this.preTitle=t}},{key:"Title",get:function(){return this.title||(this.title=ol(this)),this.title},set:function(t){this.title=t}},{key:"Items",get:function(){return this.items||(this.items=al(this)),this.items},set:function(t){this.items=t}},{key:"CurrentProject",get:function(){return this.currentProject},set:function(t){this.currentProject=t,this.ModelItem.CurrentProject=null===t||void 0===t?void 0:t.ModelItem,this.Items=al(this),this.PreTitle=cl(this),this.Title=ol(this)}},{key:"ProjectViewType",get:function(){return this.projectViewType||(this.projectViewType=ul().ProjectViewType),this.projectViewType},set:function(t){this.projectViewType=ul().ProjectViewType=t}},{key:"UpdatedDate",get:function(){return vi().UpdatedDate}}]),t}(),hl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||rl(),i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("nav",{className:"leftnav",children:Object(i.jsxs)("div",{className:"leftnav__wrapper",children:[Object(i.jsxs)("div",{className:"leftnav__body",children:[Object(i.jsxs)("span",{className:"leftnav__title",children:[Object(i.jsx)("span",{className:"leftnav__title__prefix",children:t.PreTitle}),Object(i.jsx)("span",{className:"leftnav__title__name",children:t.Title})]}),Object(i.jsx)("div",{className:"leftnav__items",children:t.Items.map((function(e){return Object(i.jsx)("a",{onClick:function(){return t.SetView(e)},className:t.GetItemClass(e),children:e.Title},e.Value)}))})]}),Object(i.jsxs)("div",{className:"leftnav__footer",children:[Object(i.jsx)("span",{children:"\xa9 Copyright"}),Object(i.jsx)("span",{children:"Updated Date: ".concat(t.UpdatedDate)})]})]})})})}}]),n}(s.Component),dl=Object(d.a)(hl),fl=function(t){return t.SettingData.Columns},pl=function(t){return t.InitialColumnNames.map((function(e){return Ue(e,t.Table)}))},ml=function(){function t(){var e=this;Object(o.a)(this,t),this.AddColumn=function(){e.Table.AddColumn()}}return Object(u.a)(t,[{key:"Data",get:function(){return this.data},set:function(t){this.data=t,this.Table.DataSource=t}},{key:"InitialColumnNames",get:function(){return this.initialColumnNames||(this.initialColumnNames=fl(this)),this.initialColumnNames},set:function(t){this.initialColumnNames=t,this.Columns=pl(this)}},{key:"Columns",get:function(){return this.columns||(this.columns=pl(this)),this.columns},set:function(t){this.columns=t,this.Table.Columns=t}},{key:"Table",get:function(){this.table||((this.table=function(t){var e=new Ze;return e.CanHandleItem=!1,e.AllColumnNames=ut(),e.Column_InputType=De,e.Override_Get_CellValue=function(t,e,n,i){var s=i.DataIndex[0];return t.GetValue(s,(function(t){e.ValueVM.Content=t})).Value},e.Column_Title_SelectWidth=150,e}()).Columns=this.Columns);return this.table}},{key:"ColumnNames",get:function(){return this.Table.Columns.filter((function(t){return!t.IsAction})).map((function(t){return t.Title}))}},{key:"SettingData",get:function(){var t;this.settingData||(this.settingData=null===(t=this.Dict.Setting)||void 0===t?void 0:t.Data);return this.settingData},set:function(t){this.settingData=t,this.InitialColumnNames=fl(this)}}]),t}(),vl="input",gl="select",Il=function(t){var e;return null===(e=t.Setting)||void 0===e?void 0:e.Name},bl=function(t){var e=function(e){return t.SettingStorageList=e},n=ou.Instance.MassDetailSetting_Dict;n.Items?e(n.Items):bt(n.OnGetItemsDone_Func_Dict,(function(){return e(n.Items)}))},_l=function(t){return function(t){var e=new ml;return e.Dict=t,e.Table,e}(t)},yl=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.IsGet_SettingStorageList_Done_Func_Dict=[],this.SettingOK=function(){var t=e.PreSetting;t?e.Setting=Xo(t):T.b.warning("B\u1ea1n ch\u01b0a ch\u1ecdn b\u1ed9 thi\u1ebft l\u1eadp")},this.IsOnSaveSetting=!1,this.SaveSetting=function(){var t=e.SettingSelectVM_ForInput,n=e.SettingSelectVM;n.Items=Object(O.a)(t.Items),n.InitialItem=t.SelectedItem,e.SettingInput_State=gl,e.IsOnSaveSetting=!0},this.SettingInput_State=void 0,this.Toggle_SettingInput_State=function(){switch(e.SettingInput_State){case gl:e.SettingInput_State=vl;break;case vl:e.SettingInput_State=gl}},this.settingName=void 0,this.SettingInputOK=function(){var t=e.SettingName,n=e.SettingInput_State;if(!t||0===t.length)switch(n){case gl:return void T.b.warning("Vui l\xf2ng ch\u1ecdn b\u1ed9 thi\u1ebft l\u1eadp!");case vl:return void T.b.warning("Vui l\xf2ng nh\u1eadp t\xean thi\u1ebft l\u1eadp!")}var i=!1,s=ou.Instance.MassDetailSetting_Dict.Items,r=s.findIndex((function(e){return e.Name===t})),a=e.Setting;a.Name=t,-1!==r&&(a._id=s[r]._id,n===vl&&(i=!0));var c=function(){var t=a.Data;t.MainMassType=e.MainMassType,t.Columns=e.DetailTable.ColumnNames,a.SaveDatabase((function(t,n){var i=e.SettingSelectVM_ForInput,s=i.Items,a=Qo(t);console.log(a),n?(s.push(a),i.InitialItem=a):(s[r]=a,i.SelectedIndex===r&&(i.InitialItem=a)),e.IsOnSaveSetting=!1,T.b.success("".concat(n?"add":"edit"," setting successfully"))}))};i?(e.Override_Setting_Modal_OKFunc=function(){return c()},e.Is_Override_Setting_Modal_Open=!0):c()},this.Is_Override_Setting_Modal_Open=!1,this.SettingInputCancel=function(){e.IsOnSaveSetting=!1,e.SettingInputVM.Content=Il(e)},Object(g.k)(this,{IsOnSaveSetting:g.l,SettingInput_State:g.l,Is_Override_Setting_Modal_Open:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this._id},set:function(t){var e=this;this._id=t,function(t,e){var n="https://api.bimdev.vn/api/hbdv/massdetail?id=".concat(t);L(n).then((function(t){return t.data})).then((function(t){t.viewDetail;var n=t.masses,i=t.phase,s=n.map((function(t){return gi(t,!0,i)}));e&&e(s)}))}(t,(function(t){e.Items=t}))}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.MainMassType=function(t){var e=t.Items;return 0===e.length?P:e[0].MassType}(this),function(t){var e=t.MainMassType,n=function(n){var i=n.findIndex((function(t){return t.Data.MainMassType===e}));if(-1!==i){var s=n[i];t.SettingSelectVM_ForInput.InitialItem=s,t.Setting=Xo(s)}},i=t.SettingStorageList;i?n(i):bt(t.IsGet_SettingStorageList_Done_Func_Dict,(function(){return n(t.SettingStorageList)}),!0)}(this),this.DetailTable.Data=t}},{key:"DetailTable",get:function(){return this.detailTable||(this.detailTable=_l(this)),this.detailTable}},{key:"SettingStorageList",get:function(){return this.settingStorageList||bl(this),this.settingStorageList},set:function(t){this.settingStorageList=t,this.SettingSelectVM_ForInput.Items=t,this.IsGet_SettingStorageList_Done_Func_Dict.forEach((function(t){return t.Value()}))}},{key:"SettingSelectVM_ForInput",get:function(){var t=this;if(!this.settingSelectVM_ForInput){var e=this.SettingStorageList?this.SettingStorageList:[],n=this.settingSelectVM_ForInput=Fe(e);n.TitleRender=function(t){return t.Name},n.Placeholder="Ch\u1ecdn thi\u1ebft l\u1eadp",n.OnSelectedItemChanged=function(e){t.PreSetting=e}}return this.settingSelectVM_ForInput}},{key:"Setting",get:function(){return this.setting||(this.setting=Zo()),this.setting},set:function(t){this.setting=t,this.DetailTable.SettingData=t.Data}},{key:"SettingInput_Toggle_Classname",get:function(){switch(this.SettingInput_State){case gl:return"btn-warning";case vl:return"btn-success"}}},{key:"SettingInput_Toggle_Content",get:function(){switch(this.SettingInput_State){case gl:return"sel";case vl:return"inp"}}},{key:"SettingName",get:function(){return this.settingName||(this.settingName=Il(this)),this.settingName},set:function(t){this.settingName=t}},{key:"SettingInputVM",get:function(){var t=this;this.settingInputVM||((this.settingInputVM=y(this.SettingName,"T\xean thi\u1ebft l\u1eadp")).onSetContent=function(e){return t.SettingName=e});return this.settingInputVM}},{key:"SettingSelectVM",get:function(){var t=this;if(!this.settingSelectVM){var e=this.settingSelectVM=Fe([],void 0);e.Placeholder="Ch\u1ecdn thi\u1ebft l\u1eadp",e.OnSelectedItemChanged=function(e){t.SettingName=null===e||void 0===e?void 0:e.Name}}return this.settingSelectVM}},{key:"SettingInput_Element",get:function(){var t=this;switch(this.SettingInput_State){case gl:var e=(s=this.SettingSelectVM).Items,n=e.findIndex((function(e){return e.Name===t.SettingName}));return s.InitialItem=-1!==n?e[n]:void 0,Object(i.jsx)(Ae,{store:s});case vl:var s;return(s=this.SettingInputVM).Content=this.SettingName,Object(i.jsx)(S,{store:s})}}},{key:"Override_Setting_ModalElement",get:function(){var t=this;return Object(i.jsx)(Ui.a,{title:"C\u1ea3nh b\xe1o",visible:this.Is_Override_Setting_Modal_Open,onOk:function(){t.Is_Override_Setting_Modal_Open=!1,t.Override_Setting_Modal_OKFunc()},onCancel:function(){return t.Is_Override_Setting_Modal_Open=!1},children:"Thi\u1ebft l\u1eadp \u0111\xe3 c\xf3 s\u1eb5n, b\u1ea1n c\xf3 mu\u1ed1n ghi \u0111\xe8 kh\xf4ng?"})}}]),t}(),jl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new ml,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"massdetail__wrapper",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",className:"massdetail__addcolumn",onClick:t.AddColumn,children:"+"}),Object(i.jsx)(Qu,{store:t.Table})]})})}}]),n}(s.Component),Sl=Object(d.a)(jl),Ol=(n(312),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new yl,i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this.state,e=this.props.match.params.id;t.id=e,Pc.Instance.Main_Classname="massdetail__comp"}},{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"massdetail__setting__wrapper",children:[Object(i.jsx)("b",{children:"B\u1ed9 thi\u1ebft l\u1eadp:"}),Object(i.jsx)(Ae,{className:"massdetail__setting__select",store:t.SettingSelectVM_ForInput}),Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.SettingOK,children:"ok"})]}),Object(i.jsxs)("div",{className:"massdetail__title__wrapper",children:[Object(i.jsx)("h4",{className:"massdetail__title",children:"B\u1ea2NG CHI TI\u1ebeT KH\u1ed0I L\u01af\u1ee2NG"}),Object(i.jsx)("div",{children:Object(i.jsx)(m.a,{type:"primary",size:"small",style:{marginLeft:15},disabled:t.IsOnSaveSetting,onClick:t.SaveSetting,children:Object(i.jsx)(Hu.a,{})})})]}),t.IsOnSaveSetting?Object(i.jsx)("div",{className:"massdetail__groupname__wrapper",children:Object(i.jsxs)("div",{className:"massdetail__groupname__wrapper_dec",children:[Object(i.jsx)("div",{className:"massdetail__groupname__input",children:t.SettingInput_Element}),Object(i.jsxs)("div",{className:"massdetail__groupname__button_wrapper",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",className:t.SettingInput_Toggle_Classname,onClick:t.Toggle_SettingInput_State,children:t.SettingInput_Toggle_Content}),Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.SettingInputOK,children:"ok"}),Object(i.jsx)(m.a,{type:"default",size:"small",onClick:t.SettingInputCancel,children:"cancel"}),t.Override_Setting_ModalElement]})]})}):"",Object(i.jsx)(Sl,{store:t.DetailTable})]})}}]),n}(s.Component)),Ml=Object($u.f)(Object(d.a)(Ol)),kl=(n(161),n(332)),Vl=n(347),Cl=(n(314),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ga,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"levelgroup__container",children:[Object(i.jsx)(Ji,{store:t.LevelSelectVM}),Object(i.jsx)(m.a,{size:"small",type:"text",className:"levelgroup__deletebutton",onClick:t.Delete,children:Object(i.jsx)(Vl.a,{className:"levelgroup__deleteicon"})})]})})}}]),n}(s.Component)),Dl=Object(d.a)(Cl),Tl=(n(315),n(162),n(316),n(317),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Pa,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"tls_filter__value",children:[Object(i.jsx)(Xi.a,{trigger:t.PopoverState.Content,content:Object(i.jsx)(Yi.a,{unCheckedChildren:"inp",checkedChildren:"sel",checked:t.SwitchChecked_Funcs(),onChange:t.ToggleInputType}),children:Object(i.jsx)("span",{children:t.InputElement})}),Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.Delete,className:"tls_filter__value__delete",children:"x"})]})})}}]),n}(s.Component)),wl=Object(d.a)(Tl),Fl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ha,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"tls_filter__div",children:[Object(i.jsx)(Ae,{store:t.FieldSelectVM,className:"tls_filter_fieldselect"}),Object(i.jsxs)("div",{className:"tls_filter__valuediv__wrapper",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddItem,className:"tls_filter__valuediv__addbutton",children:"+"}),Object(i.jsx)("div",{className:"tls_filter__valuediv",children:t.Items.map((function(t){return Object(i.jsx)(wl,{store:t},t.id)}))})]}),Object(i.jsx)(m.a,{size:"small",type:"text",className:"tls_filter__deletebutton",onClick:t.Delete,children:Object(i.jsx)(Vl.a,{className:"tls_filter__deleteicon"})})]})})}}]),n}(s.Component),xl=Object(d.a)(Fl),Gl=(kl.a.TabPane,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ba,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"tls__pageitem__wrapper",children:[Object(i.jsxs)("div",{className:"typicallevel__list",children:[Object(i.jsxs)("div",{className:"typicallevel__list__1",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddFilter,className:"typicallevel__addbutton",children:"+"}),Object(i.jsx)("span",{children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp b\u1ed9 l\u1ecdc"})})]}),t.Filters.map((function(t){return Object(i.jsx)(xl,{store:t},t.id)}))]}),Object(i.jsxs)("div",{className:"typicallevel__list",children:[Object(i.jsxs)("div",{className:"typicallevel__list__1",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddLevelGroup,className:"typicallevel__addbutton",children:"+"}),Object(i.jsx)("span",{children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp level"})})]}),t.LevelGroups.map((function(t){return Object(i.jsx)(Dl,{store:t},t.id)}))]})]})})}}]),n}(s.Component)),Ll=Object(d.a)(Gl),Nl=kl.a.TabPane,Rl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onKeyDown=function(t){t.stopPropagation()};var s=i.props.store;return i.state=s||new Ya,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"tls",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",className:"tls__save__button",onClick:t.Save,children:Object(i.jsx)(Hu.a,{className:"tls__save"})}),Object(i.jsx)("div",{className:"tls__tabs__wrapper",children:Object(i.jsxs)("div",{className:"tls__tabs__div",children:[t.IsHaveAddCommandTab?"":Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.AddPageItem,className:"tls__tabs__add__outside",children:"+"}),Object(i.jsx)(kl.a,{type:"card",className:"tls__tabs",onChange:t.ChangePageKey,activeKey:t.CurrentPageKey,onKeyDown:this.onKeyDown,children:t.AllTabs.map((function(t){return Object(i.jsx)(Nl,{tab:t.TitleElement,children:Object(i.jsx)(Ll,{store:t})},t.id)}))})]})})]})})}}]),n}(s.Component),Pl=Object(d.a)(Rl),El=(n(323),n(324),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Sa,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"ls__wrapper",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",className:"ls__save__button",onClick:t.Update_LevelData,children:Object(i.jsx)(Hu.a,{className:"tls__save"})}),Object(i.jsx)(m.a,{type:"primary",size:"small",className:"ls_add",onClick:t.AddItem,children:"+"}),Object(i.jsx)(Qu,{store:t.Table})]})})}}]),n}(s.Component)),Al=Object(d.a)(El),Hl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new ec,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("div",{className:"projectcomp__level",children:[Object(i.jsx)("div",{className:"projectcomp__title",children:Object(i.jsx)("h3",{children:"THI\xca\u0301T L\xc2\u0323P T\xc2\u0300NG"})}),Object(i.jsx)(Al,{store:t.DataVM.Binding})]}),Object(i.jsx)("hr",{}),Object(i.jsxs)("div",{className:"projectcomp__typicallevel",children:[Object(i.jsx)("div",{className:"projectcomp__title",children:Object(i.jsx)("h3",{children:"THI\xca\u0301T L\xc2\u0323P T\xc2\u0300NG \u0110I\xca\u0309N HI\u0300NH"})}),Object(i.jsx)(Pl,{store:t.DataVM.Typical})]})]})}}]),n}(s.Component),Wl=Object(d.a)(Hl),Ul=n(348),Bl=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new pa,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Input,n=t.State;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{children:[Object(i.jsxs)(m.a,{type:"primary",size:"middle",onClick:t.AddVersion,disabled:n===fa,children:[Object(i.jsx)(Ul.a,{})," L\u01afU K\u1ebeT QU\u1ea2 HI\u1ec6N T\u1ea0I"]}),n===fa?Object(i.jsxs)("div",{className:"mt-3",children:[Object(i.jsx)(S,{store:e.NameVM}),Object(i.jsx)(S,{store:e.DescriptionVM}),Object(i.jsxs)("div",{className:"mt-2",children:[Object(i.jsx)(m.a,{type:"primary",size:"small",onClick:t.OK,children:"OK"}),Object(i.jsx)(m.a,{type:"default",size:"small",onClick:t.Cancel,children:"Cancel"})]})]}):""]})})}}]),n}(s.Component)),Kl=Object(d.a)(Bl),zl=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Xe,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(Qu,{store:t.TableVM})})}}]),n}(s.Component)),ql=Object(d.a)(zl),Jl=function(){return Pc.Instance},Yl=function(){function t(){Object(o.a)(this,t),this.projectVM=void 0,this.projectViewType=void 0,Object(g.k)(this,{projectVM:g.l,projectViewType:g.l})}return Object(u.a)(t,[{key:"id",get:function(){return this._id},set:function(t){var e=this;this._id=t,function(t,e){if(t){var n="https://api.bimdev.vn/api/hbp/get?id=".concat(t);L(n).then((function(t){return t.data})).then((function(t){var n=ui(t);e&&e(n)}))}}(t,(function(t){e.ProjectVM=ic(t)}))}},{key:"ProjectVM",get:function(){return this.projectVM},set:function(t){this.projectVM=t,Jl().CurrentProject=t;var e=[t];Jl().Project_DictVM.Items=e,ou.Instance.Phase_Dict=t.ModelItem.Phase_Dict;var n=this.MassResultCompVM;n.ProjectVMStorageList=e,n.ProjectSelectVM.InitialItems=e;var i=function(){return n.PhaseVMStorageList=s.Items},s=t.Phase_DictVM;s.Items?i():s.OnGetItemsDone_Funcs.push((function(){i()}))}},{key:"MassResultCompVM",get:function(){if(!this.massResultCompVM){var t=this.massResultCompVM=Zl(this);Jl().MassResultCompVM=t}return this.massResultCompVM}},{key:"ProjectViewType",get:function(){return this.projectViewType||(this.projectViewType=Jl().ProjectViewType),this.projectViewType},set:function(t){this.projectViewType=t}},{key:"ViewElement",get:function(){if(this.ProjectVM)switch(this.ProjectViewType){case Fc:return Object(i.jsx)("div",{className:"massresult__comp__wrapper",children:Object(i.jsx)(zu,{store:this.MassResultCompVM})});case xc:return Object(i.jsx)(i.Fragment,{children:this.ProjectVM.TypicalLevelSetting_ForEdit?Object(i.jsx)(Wl,{store:this.ProjectVM.TypicalLevelSetting_ForEdit}):""});case Gc:return Object(i.jsx)("div",{className:"phase__comp__wrapper",children:Object(i.jsx)(Kl,{store:this.ProjectVM.Phase_DictVM})});case Lc:return Object(i.jsx)(ql,{store:this.ProjectVM.RebarMass_Dict})}}}]),t}(),Ql=function(){return Pc.Instance},Zl=function(t){var e=fc(new Io,!1);return e.IsShowProjectSelect=!1,e.CanHavePhase=!0,e},Xl=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||function(){var t=new Yl;return bt(Ql().OnSet_ProjectViewType_Func_Dict,(function(){return t.ProjectViewType=Ql().ProjectViewType}),!1),t}(),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this.state,e=this.props.match.params.id;t.id=e}},{key:"render",value:function(){var t=this.state,e=t.ProjectVM;return Object(i.jsx)(i.Fragment,{children:e?t.ViewElement:""})}}]),n}(s.Component),$l=Object($u.f)(Object(d.a)(Xl)),th=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=Pc.Instance;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{className:"projectcomp",children:[Object(i.jsx)(dl,{}),Object(i.jsxs)("div",{className:"projectcomp__main__wrapper",children:[Object(i.jsx)("div",{className:t.Main_Classname,children:Object(i.jsx)(Xu.a,{basename:"/BIM_Database",children:Object(i.jsxs)($u.c,{children:[Object(i.jsx)($u.a,{exact:!0,path:"/",component:yh}),Object(i.jsx)($u.a,{exact:!0,path:"/massdetail/:id",component:Ml}),Object(i.jsx)($u.a,{exact:!0,path:"/project/:id",component:$l})]})})}),Object(i.jsx)("div",{className:"projectcomp__main__bottom"})]})]})})}}]),n}(s.Component),eh=Object(d.a)(th),nh=function t(){Object(o.a)(this,t)},ih=function t(){Object(o.a)(this,t),this.SubItems=[]},sh="project",rh="element",ah="element-info",ch="element-info-identify",oh="element-info-locate",uh=function t(e,n){var i=new ih;switch(i.Title=n||e,e){case rh:i.SubItems=[t("guid"),t("projectId"),t("exportSetId"),t(ah,"info")];break;case sh:i.SubItems=[];break;case ah:i.SubItems=[t(ch,"identify"),t(oh,"locate"),t("element-info-geometry","geometry"),t("element-info-specification","specification"),t("element-info-material","material")];break;case ch:i.SubItems=[t("category"),t("typename"),t("elementName"),t("typemark"),t("typecomment"),t("description"),t("model"),t("manufacturer"),t("keynote"),t("assemblycode"),t("systemtype"),t("systemclassification"),t("workItem")];break;case oh:i.SubItems=[t("level"),t("baseLevel"),t("topLevel"),t("block"),t("zone")];break;default:i.SubItems=[]}return i},lh=function(){function t(){var e=this;Object(o.a)(this,t),this.subItems=void 0,this.isOpenSub=!1,this.ToggleSub=function(){e.IsOpenSub=!e.IsOpenSub,e.ToggleSubContentVM.Content=fh(e)},Object(g.k)(this,{subItems:g.l,isOpenSub:g.l})}return Object(u.a)(t,[{key:"Title",get:function(){return this.ModelItem.Title}},{key:"IsHaveButton",get:function(){return 0!==this.SubItems.length}},{key:"SubItems",get:function(){return this.subItems||(this.subItems=dh(this)),this.subItems}},{key:"IsOpenSub",get:function(){return this.isOpenSub},set:function(t){this.isOpenSub=t}},{key:"ToggleSubContentVM",get:function(){return this.toggleSubContentVM||(this.toggleSubContentVM=y(fh(this))),this.toggleSubContentVM}}]),t}(),hh=function(t){var e=new lh;return e.ModelItem=t,e},dh=function(t){return t.ModelItem.SubItems.map((function(t){return hh(t)}))},fh=function(t){return t.IsOpenSub?"-":"+"},ph=function(){return function(t){var e=new mh;return e.ModelItem=t,e}(function(){var t=new nh;return t.Items=[uh(sh),uh(rh)],t}())},mh=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(g.k)(this,{items:g.l})}return Object(u.a)(t,[{key:"Items",get:function(){return this.items||(this.items=this.ModelItem.Items.map((function(t){return hh(t)}))),this.items}}]),t}(),vh=(n(163),function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new lh,i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("span",{className:"doelement",children:[t.Title,t.IsHaveButton?Object(i.jsx)(m.a,{className:"doelement__button",type:"primary",size:"small",onClick:t.ToggleSub,children:t.ToggleSubContentVM.Content}):"",t.IsOpenSub?Object(i.jsx)("div",{className:"doelement__dict",children:t.SubItems.map((function(t){return Object(i.jsx)(n,{store:t},t.Title)}))}):""]})})}}]),n}(s.Component)),gh=Object(d.a)(vh),Ih=(f.a.Option,function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||ph(),i}return Object(u.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{className:"doelement__dict",children:t.Items?t.Items.map((function(t){return Object(i.jsx)(gh,{store:t},t.Title)})):""})})}}]),n}(s.Component)),bh=Object(d.a)(Ih),_h=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var t=Pc.Instance,e="";switch(t.ProjectViewType){case Fc:e=Object(i.jsx)("div",{className:"massresult__comp__wrapper",children:Object(i.jsx)(zu,{store:t.MassResultCompVM})});break;case Nc:e="MEP Setting";break;case Rc:e=Object(i.jsx)(bh,{})}return Object(i.jsx)(i.Fragment,{children:e})}}]),n}(s.Component),yh=Object(d.a)(_h),jh=function(t){Object(l.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(i.jsx)(eh,{})}}]),n}(s.Component),Sh=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,349)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),i(t),s(t),r(t),a(t)}))};c.a.render(Object(i.jsx)(jh,{}),document.getElementById("root")),Sh()}},[[325,1,2]]]);
//# sourceMappingURL=main.9914a4a9.chunk.js.map