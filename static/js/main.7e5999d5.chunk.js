(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{169:function(t,e,n){},170:function(t,e,n){},271:function(t,e,n){"use strict";n.r(e);var i=n(1),s=n(0),r=n(28),a=n.n(r),o=(n(169),n(2)),c=n(3),u=n(10),h=n(9),l=(n(170),n(171),n(12)),d=n(280),f=n(282),p=n(278),m=n(276),I=n(159),g=n(279),v=n(4),b=function(){function t(){Object(o.a)(this,t),this.content=void 0,this.placeholder="n\u1ed9i dung input",Object(v.k)(this,{content:v.l,placeholder:v.l})}return Object(c.a)(t,[{key:"Content",get:function(){return this.content},set:function(t){this.content=t,this.onSetContent&&this.onSetContent(t)}},{key:"Placeholder",set:function(t){this.placeholder=t}},{key:"Style",get:function(){return this.style||(this.style=this.inputStyle?this.inputStyle:{},this.wrapper&&(this.style.position="relative")),this.style}}]),t}(),M=function(t,e){var n=new b;return n.content=t,n.placeholder=e,n},y=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onChange=function(t){var e=t.target.value;i.state.Content=e};var s=i.props.store;if(s)i.state=s;else{i.state=M("N\u1ed9i dung input")}return i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.content,n=t.placeholder;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(g.a,{value:e,onChange:this.onChange,placeholder:n})})}}]),n}(s.Component),k=Object(l.a)(y),j=n(60),O=n(50),V=n.n(O),S=n(71),D=n(145),C=n.n(D),w=n(281),x=function(t){return C.a.create({baseURL:"https://api.bimdev.vn/api",Accept:"application/json","Content-Type":"application/json",timeout:t})},F=function(t){return{success:t.status>=200&&t.status<300,data:t.data,message:t.statusText}},T=function(){var t=Object(S.a)(V.a.mark((function t(e){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e;case 3:return n=t.sent,t.abrupt("return",F(n));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",(i=t.t0,w.b.error("Error sending request: ".concat(i)),{success:!1}));case 10:return t.prev=10,t.finish(10);case 12:case"end":return t.stop()}var i}),t,null,[[0,7,10,12]])})));return function(e){return t.apply(this,arguments)}}(),G=2e4,N=function(){var t=Object(S.a)(V.a.mark((function t(e,n,i){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=i||G,t.abrupt("return",T(x(i).get(e,n)));case 2:case"end":return t.stop()}}),t)})));return function(e,n,i){return t.apply(this,arguments)}}(),_=function(){var t=Object(S.a)(V.a.mark((function t(e,n,i,s){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=s||G,t.next=3,T(x(s).put(e,n,i));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,s){return t.apply(this,arguments)}}(),R=function(){var t=Object(S.a)(V.a.mark((function t(e,n,i,s){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=s||G,t.next=3,T(x(s).post(e,n,i));case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,n,i,s){return t.apply(this,arguments)}}(),E="concrete",L="formwork",A="rebar",P="Project",W="Phase",H="Workpackage",U="Value",B="Unit",K="partition",z="rebarType",q="elementName",J="MassType",Q="workItem",X="level",Y="diameter",Z=function(t,e){var n=void 0;switch(e){case P:case W:n=t.Name;break;case H:n=t.FullName;break;default:n=t}return n||"undefined"},$=(new Intl.DateTimeFormat("en-GB"),function(){return Math.random().toString(36).substr(2,9)}),tt=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)}))},et=function(t,e){t.M2VM=!0,e(),t.M2VM=!1},nt=function(t,e,n){if(-1!==e&&-1!==n&&e!==n){var i=t[e];t[e]=t[n],t[n]=i}},it=function(){function t(){Object(o.a)(this,t),this.Cells=[]}return Object(c.a)(t,[{key:"id",get:function(){return this._id||(this._id=$()),this._id}},{key:"Index",get:function(){return this.Dict.Columns.indexOf(this)}}]),t}(),st=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).getWrapperContent=function(){var t=i.state.wrapper;return t||""};var s=i.props.store;return i.state=s||{content:"N\u1ed9i dung"},i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state.content;return Object(i.jsxs)(i.Fragment,{children:[t,this.getWrapperContent()]})}}]),n}(s.Component),rt=Object(l.a)(st),at=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=["Floors","Structural Framing","Walls","Structural Columns"]),this.categoryNames}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),ot="category",ct="family",ut="parameter",ht="bystring",lt="bynumber",dt="byequal",ft="bycontain",pt="bynotcontain",mt="byequal",It="bysmaller",gt="bybigger",vt="bybetween",bt=function(t,e){var n=new kt;return n.ValueType=t.valueType,n.NumberFilterType=t.numberFilterType,n.StringFilterType=t.stringFilterType,n.Values=t.values,n.CategoryType=e,n},Mt=function(t){var e=[];switch(t.CategoryType){case ot:e=at.Instance.CategoryNames;break;case ut:e=zs.Instance.ParameterNames}return e},yt=function(t,e){if(void 0===e||null===e)return!1;var n=!1,i=t.Values;switch(t.ValueType){case ht:if("string"===typeof e)switch(t.StringFilterType){case dt:i.forEach((function(t){n||t!==e||(n=!0)}));break;case ft:var s=e.toLowerCase();i.forEach((function(t){!n&&s.includes(t.toLowerCase())&&(n=!0)}));break;case pt:s=e.toLowerCase();n=!0,i.forEach((function(t){n&&s.includes(t.toLowerCase())&&(n=!1)}))}break;case lt:if(!isNaN(e))switch(t.NumberFilterType){case mt:return e===i[0];case It:return e<i[0];case"bysmallerorequal":return e<=i[0];case gt:return e>i[0];case"bybiggerorequal":return e>=i[0];case vt:var r=i[0],a=i[1];return t.IsEqualLeft&&r===e||r<e&&e<a||t.IsEqualRight&&e===a}}return n},kt=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"Values",get:function(){return this.values},set:function(t){this.values=t}},{key:"ValueStorageList",get:function(){return this.valueStorageList||(this.valueStorageList=Mt(this)),this.valueStorageList}},{key:"ApiData",get:function(){return{valueType:(t=this).ValueType,numberFilterType:t.NumberFilterType,stringFilterType:t.StringFilterType,values:t.Values};var t}}]),t}(),jt="byuser",Ot="byauto",Vt=function(t,e){var n=new St;return n.MassGroupItem=t,e?(n.CreateType=jt,n.Value=tt(),n.Title="T\xean \u0111\u1ea7u m\u1ee5c"):n.CreateType=Ot,n},St=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.MassGroupItem.Items.splice(e.Index,1)}}return Object(c.a)(t,[{key:"Index",get:function(){return this.MassGroupItem.Items.indexOf(this)}},{key:"Title",get:function(){return this.title||(this.title=this.Value),this.title},set:function(t){this.title=t}},{key:"NewMGI",get:function(){return this.newMGI||(this.newMGI=function(t){var e=t.newMGI_id;if(e){var n=t.MassGroupItem.SupComponent.AllItems,i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}(this),!this.newMGI&&this.newMGI_id&&(this.newMGI_id=void 0)),this.newMGI},set:function(t){this.newMGI=t,t&&t!==this.MassGroupItem?this.newMGI_id=t.id:this.newMGI_id=void 0}},{key:"ApiData",get:function(){return{value:this.Value,title:this.Title,newMGI_id:this.newMGI_id,createType:this.CreateType}}}]),t}(),Dt=function(){function t(){var e=this;Object(o.a)(this,t),this.SubComponents=[],this.NotIncludeValues=[],this.Items=[],this.AddNotIncludeValue=function(t){-1===e.NotIncludeValues.indexOf(t)&&e.NotIncludeValues.push(t)},this.GetItem=function(t,n){var i=e.Items.findIndex((function(e){return e.Value===t}));if(-1===i){var s=Vt(e);return s.Value=t,s.Title=n,e.Items.push(s),s}return e.Items[i]},this.OnIsFirstSetSupRow_Funcs=[],this.HandleCreatedByUserRows=function(){e.Items.filter((function(t){return t.CreateType===jt})).forEach((function(t){var n=t.Value,i=function(t){var i=e.Table.GetRow(n,t);return i.FullValue=n,i.IsCreatedByUser=!0,i},s=function(t){t.MassGroupItem=e,r(t)},r=function(n){var i=e.SubComponents.findIndex((function(e){return e.Filter.Values.includes(t.Value)}));-1!==i&&(e.SubComponents[i].Items[0].SupRow=n)},a=t.NewMGI;a?(a.GetItem(n),e.Table.Handle_ReplaceMGI(a,i,s)):s(i(e.SupRow))}))}}return Object(c.a)(t,[{key:"id",get:function(){return this._id||(this._id=tt()),this._id},set:function(t){this._id=t}},{key:"Index",get:function(){return this.SupComponent.Items.indexOf(this)}},{key:"OrderItems",get:function(){return this.Items}},{key:"OrderValues",get:function(){return this.Items.map((function(t){return t.Value}))}},{key:"ApiData",get:function(){var t=this.Items.map((function(t){return t.ApiData}));return{_id:this.id,field:this.Field,subComponents:this.SubComponents.map((function(t){return t.ApiData})),valueOrders:this.ValueOrders,notIncludeValues:this.NotIncludeValues,items:t}}},{key:"SupRow",get:function(){return this.supRow},set:function(t){this.supRow=t,this.IsFirstSetSupRow||(this.IsFirstSetSupRow=!0,this.HandleCreatedByUserRows())}},{key:"IsFirstSetSupRow",get:function(){return this.isFirstSetSupRow},set:function(t){this.isFirstSetSupRow=t,this.OnIsFirstSetSupRow_Funcs.forEach((function(t){return t()}))}},{key:"HaveMassItemSubComponents",get:function(){return this.SubComponents.filter((function(t){return t.IsHaveMassItem}))}},{key:"Table",get:function(){return this.table||(this.table=_t(this)),this.table},set:function(t){this.table=t}}]),t}(),Ct=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"OriginComponent",get:function(){return this.originComponent||(this.originComponent=Ft(this)),this.originComponent}},{key:"ApiData",get:function(){return{filter:this.Filter?this.Filter.ApiData:void 0,items:this.Items.map((function(t){return t.ApiData}))}}},{key:"AllItems",get:function(){return this.OriginComponent.AllSubItems}},{key:"AllSubItems",get:function(){var t=Object(j.a)(this.Items);return this.Items.forEach((function(e){return e.SubComponents.forEach((function(e){return t.push.apply(t,e.AllSubItems)}))})),t}}]),t}(),wt=function(t,e){var n=new Ct;return n.Filter=t.filter?bt(t.filter):void 0,n.Items=t.items.map((function(t){return Gt(t,n)})),n.SupItem=e,n},xt=function(t,e){if(!t)return t;var n=new Ct;return n.Filter=function(t){if(!t)return t;var e=new kt;return e.ValueType=t.ValueType,e.NumberFilterType=t.NumberFilterType,e.StringFilterType=t.StringFilterType,e.Values=Object(j.a)(t.Values),e.CategoryType=t.CategoryType,e}(t.Filter),n.Items=t.Items.map((function(t){return Nt(t,n)})),n.SupItem=e,n},Ft=function(t){return t.SupItem?t.SupItem.SupComponent.OriginComponent:t},Tt=function(t,e,n){var i=new Dt;return i.Field=t,i.SupComponent=n,e&&(i.SubComponents=e),i},Gt=function(t,e){var n=new Dt;return n._id=t._id,n.Field=t.field,n.SupComponent=e,n.SubComponents=t.subComponents?t.subComponents.map((function(t){return wt(t,n)})):[],t.items?(n.Items=t.items.map((function(t){return function(t,e){var n=new St;return n.Value=t.value,n.Title=t.title,n.newMGI_id=t.newMGI_id,n.MassGroupItem=e,n.CreateType=t.createType?t.createType:Ot,n}(t,n)})).filter((function(t){return t.Value})),n.IsHaveValueOrder=!0):(n.Items=[],n.IsHaveValueOrder=!1),n.NotIncludeValues=t.notIncludeValues?t.notIncludeValues:[],n},Nt=function(t,e){if(!t)return t;var n=new Dt;return n.id=t.id,n.Field=t.Field,n.Items=t.Items.map((function(t){return function(t,e){var n=new St;return n.Value=t.Value,n.Title=t.Title,n.newMGI_id=t.newMGI_id,n.MassGroupItem=e,n.CreateType=t.CreateType,n}(t,n)})),n.NotIncludeValues=Object(j.a)(t.NotIncludeValues),n.IsHaveValueOrder=t.IsHaveValueOrder,n.SupComponent=e,n.SubComponents=t.SubComponents.map((function(t){return xt(t,n)})),n},_t=function(t){return t.SupComponent.SupItem.Table},Rt=n(83),Et=n.n(Rt),Lt=function(t,e){var n=new At;return n.Items=t,n.InitialItems=e,n},At=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.GetInitialIndexs=function(){var t=e.InitialItems;return t?t.map((function(t){return e.Items.indexOf(t)})).filter((function(t){return-1!==t})):[]},this.selectedIndexs=[],this.GetSelectedItems=function(){return e.SelectedIndexs.map((function(t){return e.Items[t]}))},Object(v.k)(this,{items:v.l,selectedIndexs:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t}},{key:"InitialItems",get:function(){return this.initialItems},set:function(t){this.initialItems=t,this.InitialIndexs=this.GetInitialIndexs(),this.SelectedIndexs=this.InitialIndexs}},{key:"InitialIndexs",get:function(){return this.initialIndexs||(this.initialIndexs=this.GetInitialIndexs()),this.initialIndexs},set:function(t){this.initialIndexs=t}},{key:"SelectedIndexs",get:function(){return this.selectedIndexs},set:function(t){this.selectedIndexs=t,this.SelectedItems=this.GetSelectedItems()}},{key:"SelectedItems",get:function(){return this.selectedItems||(this.selectedItems=this.GetSelectedItems()),this.selectedItems},set:function(t){this.selectedItems=t,this.OnSelectedItemChanged&&this.OnSelectedItemChanged(t)}},{key:"Placeholder",get:function(){return this.placeholder||(this.placeholder="ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng ..."),this.placeholder},set:function(t){this.placeholder=t}},{key:"TitleRender",get:function(){return this.titleRender||(this.titleRender=function(t){return t.DisplayContent?t.DisplayContent:"".concat(t)}),this.titleRender},set:function(t){this.titleRender=t}}]),t}(),Pt=p.a.Option,Wt=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndexs=t};var s=i.props.store;return i.state=s||new At,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=this.props.style?this.props.style:{width:"100%"},n=t.Placeholder,s=t.Items,r=t.SelectedIndexs,a=t.InitialIndexs;0===r.length&&(r=a,t.InitialIndexs=[]);var o=s?s.map((function(e,n){var s=t.TitleRender(e),r=void 0;return r=void 0===e?$():"string"!==typeof e&&isNaN(e)?e._id?e._id:e.id:e,Object(i.jsx)(Pt,{value:n,children:s},r)})):"";return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(p.a,{style:e,mode:"multiple",placeholder:n,optionFilterProp:"children",onChange:this.onValueChange,value:r,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:o})})}}]),n}(s.Component),Ht=Object(l.a)(Wt),Ut=function t(){var e=this;Object(o.a)(this,t),this.IsElementVisible=!1,this.ShowElement=function(){e.IsElementVisible=!0},this.HideElement=function(){e.IsElementVisible=!1},Object(v.k)(this,{IsElementVisible:v.l})},Bt=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ut,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;if(!t.style){var e=this.props.style?this.props.style:{};e.minWidth||(e.minWidth=150),t.style=e}return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{onMouseEnter:t.ShowElement,style:t.style,onMouseLeave:t.HideElement,children:t.IsElementVisible?t.Element:""})})}}]),n}(s.Component),Kt=Object(l.a)(Bt),zt=n(283),qt=n(284),Jt=function(t,e){var n=new Qt;return n.Items=t,n.InitialItem=e,n},Qt=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.initialItem=void 0,this.GetInitialIndex=function(){var t=e.Items.indexOf(e.InitialItem);return-1!==t?t:null},this.selectedIndex=void 0,this.GetSelectedItem=function(){var t=e.SelectedIndex;if(-1!==t)return e.Items[t]},this.CanClear=!1,this.Clear=function(){e.SelectedIndex=null},Object(v.k)(this,{items:v.l,selectedIndex:v.l,CanClear:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=[]),this.items},set:function(t){this.items=t}},{key:"InitialItem",get:function(){return this.initialItem},set:function(t){this.initialItem=t,this.InitialIndex=this.GetInitialIndex(),this.SelectedIndex=this.InitialIndex}},{key:"InitialIndex",get:function(){return this.initialIndex||(this.initialIndex=this.GetInitialIndex()),this.initialIndex},set:function(t){this.initialIndex=t}},{key:"SelectedIndex",get:function(){return this.selectedIndex},set:function(t){this.selectedIndex=t,this.SelectedItem=this.GetSelectedItem()}},{key:"SelectedItem",get:function(){return this.selectedItem||(this.selectedItem=this.GetSelectedItem()),this.selectedItem},set:function(t){this.selectedItem=t,this.OnSelectedItemChanged&&this.OnSelectedItemChanged(t)}},{key:"Placeholder",get:function(){return this.placeholder||(this.placeholder="ch\u1ecdn \u0111\u1ed1i t\u01b0\u1ee3ng ..."),this.placeholder},set:function(t){this.placeholder=t}},{key:"DivStyle",get:function(){return this.CanClear?{position:"relative",padding:"0 22px 0 0"}:{}}},{key:"TitleRender",get:function(){return this.titleRender||(this.titleRender=function(t){return t.DisplayContent?t.DisplayContent:"".concat(t)}),this.titleRender},set:function(t){this.titleRender=t}}]),t}(),Xt=function t(){var e=this;Object(o.a)(this,t),this.getClassName=function(){return e.className||(e.className="float ".concat(e.location)),e.className}},Yt=function(t){var e=new Xt;return e.location=t,e},Zt=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).getWrapperContent=function(){var t=i.state.wrapper;return t||""};var s=i.props.store;return i.state=s||Yt("top right"),i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("span",{className:t.getClassName(),children:this.getWrapperContent()})})}}]),n}(s.Component),$t=Object(l.a)(Zt),te=p.a.Option,ee=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndex=t};var s=i.props.store;return i.state=s||new Qt,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=this.props.style?this.props.style:{width:"100%"},n=t.Placeholder,s=t.Items,r=t.SelectedIndex,a=t.InitialIndex;-1===r&&(r=a,t.InitialIndex=-1);var o=s?s.map((function(e,n){var s=t.TitleRender(e),r=void 0;return r=void 0===e?$():"string"!==typeof e&&isNaN(e)?e._id?e._id:e.id:e,Object(i.jsx)(te,{value:n,children:s},r)})):"",c="";if(t.CanClear){var u=Yt("right");u.wrapper=Object(i.jsx)(I.a,{size:"small",type:"primary",onClick:t.Clear,children:"x"}),c=Object(i.jsx)($t,{store:u})}return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{style:t.DivStyle,children:[c,Object(i.jsx)(p.a,{style:e,showSearch:!0,placeholder:n,optionFilterProp:"children",onChange:this.onValueChange,value:r,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:o})]})})}}]),n}(s.Component),ne=Object(l.a)(ee),ie="inside",se="lower",re=function(){function t(){var e=this;Object(o.a)(this,t),this.Location=ie,this.ToggleLocation=function(){switch(e.Location){case ie:e.Location=se;break;case se:e.Location=ie}},Object(v.k)(this,{Location:v.l})}return Object(c.a)(t,[{key:"Color",get:function(){return function(t){switch(t.Location){case ie:return"#52c41a";case se:return"#faad14"}}(this)}},{key:"ButtonStyle",get:function(){return{width:50,backgroundColor:this.Color,border:"none"}}}]),t}(),ae=function(){function t(){var e=this;Object(o.a)(this,t),this.SubItems=[],this.Cells=[],this.isShowSub=!0,this.rank=void 0,this.isHaveSub=void 0,this.IsToolVisible=!1,this.title=void 0,this.GetCellByColumn=function(t){var n=e.Cells.findIndex((function(e){return e.Column===t}));return-1!==n?e.Cells[n]:void 0},this.UpdateData=function(){e.Rank=ce(e),e.IsHaveSub=he(e),e.SubItems=fe(e.SubItems),e.SubItems.forEach((function(t){return t.UpdateData()}))},this.ToggleSub=function(){e.IsShowSub=!e.IsShowSub},this.SetSubFields=function(){var t=e.TempSubFields?e.TempSubFields:[],n=!0;if(e.SubFields.length!==t.length?n=!1:e.SubFields.forEach((function(e,i){n&&e!==t[i]&&(n=!1)})),!n){e.SubFields=t;var i=new kt;i.ValueType=ht,i.StringFilterType=dt,i.Values=[e.FullValue];var s=e.MassGroupItem,r=new Ct;r.SubItem=s,r.Filter=i;var a=r.Items=t.map((function(t){return Tt(t,null,r)})),o=s.SubComponents;if(e.SubMassGroupComponent){var c=o.indexOf(e.SubMassGroupComponent);o[c]=r}else o.push(r);if(e.SubMassGroupComponent=r,e.SubItems=[],e.SubMassGroupItem=void 0,0!==a.length){var u=e.Table;e.Items.forEach((function(t){u.HandleItem(t,t.GetValue(u.ColumnField),r,e)}))}}},this.MoveUp=function(){var t=e.CurrentList,n=e.Index;if(0!==n){var i=e.OrderMGI.OrderItems,s=e.OrderMGI.OrderValues,r=s.indexOf(t[n].FullValue),a=s.indexOf(t[n-1].FullValue);nt(t,n,n-1),nt(i,r,a)}},this.MoveDown=function(){var t=e.CurrentList,n=e.Index;if(t.length-1!==n){var i=e.OrderMGI.OrderItems,s=e.OrderMGI.OrderValues,r=s.indexOf(t[n].FullValue),a=s.indexOf(t[n+1].FullValue);nt(t,n,n+1),nt(i,r,a)}},this.AddSub=function(){be(e,e.Table)},this.Delete=function(){var t=e.SupItem,n=e.CurrentList;e.IsCreatedByUser?e.MassGroupItem.GetItem(e.FullValue).Delete():e.MassGroupItem.AddNotIncludeValue(e.FullValue),n.splice(e.Index,1),t&&t.Cells.forEach((function(t){t.SubCells=t.GetSubCells();var e=t.SubCells?t.SubCells.map((function(t){return t.TotalValue})).filter((function(t){return t})):[];t.TotalValue=e.reduce((function(t,e){return t+e}),0),t.ContentVM.Content=t.ValueString}))},this.ReplaceOK=function(){var t=e.ReplaceFactory,n=t.ReferenceRow;if(n){var i=t.Location;n===e&&i===se||n===e.SupItem&&i===ie||(e.Replace(n,i),t.Location=ie)}},this.Replace=function(t,n){var i=e.MassGroupItem,s=void 0;switch(n){case ie:s=t;break;case se:s=t.SupItem}var r=s?s.SubMassGroupItem?s.SubMassGroupItem:ve(s):e.Table.MainMGI;i.GetItem(e.FullValue).NewMGI=r,e.ReplaceMGI=r,e.CurrentList.splice(e.Index,1),e.SupItem=s,e.CurrentList.push(e),e.IsShowSubFieldSelect=!1},this.IsModalVisible=!1,this.OpenModal=function(){e.IsModalVisible=!0,e.TitleVM.Content=e.Title,e.SubFieldSelectVM.InitialItems=e.SubFields;var t=e.LocationSelectVM;t.Items=e.LocationStorageList,t.InitialItem=void 0},this.ModalOK=function(){e.IsModalVisible=!1,e.SetSubFields(),e.ReplaceOK();var t=e.TitleVM.Content;e.Title=t,e.MassGroupItem.GetItem(e.FullValue).Title=t},this.ModalCancel=function(){e.IsModalVisible=!1},Object(v.k)(this,{rank:v.l,isShowSub:v.l,isHaveSub:v.l,IsToolVisible:v.l,SubItems:v.l,IsModalVisible:v.l,title:v.l})}return Object(c.a)(t,[{key:"id",get:function(){return this._id||(this._id=$()),this._id}},{key:"Index",get:function(){return this.CurrentList.indexOf(this)}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t,this.CurrentList=void 0,this.Rank=void 0}},{key:"CurrentList",get:function(){return this.currentList||(this.currentList=this.SupItem?this.SupItem.SubItems:this.Table.MainRows),this.currentList},set:function(t){this.currentList=t}},{key:"Table",get:function(){return this.Dict}},{key:"AllItems",get:function(){var t=[];return t.push(this),this.SubItems.forEach((function(e){t.push.apply(t,e.AllItems)})),t}},{key:"Items",get:function(){return this.Cells.reduce((function(t,e){return t.concat(e.Items)}),[])}},{key:"MassGroupItem",get:function(){return this.massGroupItem},set:function(t){this.massGroupItem=t,t&&(this.Title=t.GetItem(this.FullValue).Title)}},{key:"OrderMGI",get:function(){return this.ReplaceMGI?this.ReplaceMGI:this.MassGroupItem}},{key:"SubMassGroupItem",get:function(){return this.subMassGroupItem||(this.subMassGroupItem=Ie(this)),this.subMassGroupItem},set:function(t){this.subMassGroupItem=t}},{key:"SubFields",get:function(){return this.subFields||(this.subFields=ge(this)),this.subFields},set:function(t){this.subFields=t}},{key:"IsShowSub",get:function(){return this.isShowSub},set:function(t){this.isShowSub=t,this.ToggleButtonContentVM.Content=le(this)}},{key:"ToggleButtonContent",get:function(){return this.toggleButtonContent||(this.toggleButtonContent=le(this)),this.toggleButtonContent},set:function(t){this.toggleButtonContent=t}},{key:"ToggleButtonContentVM",get:function(){var t=this;this.toggleButtonContentVM||((this.toggleButtonContentVM=M(this.ToggleButtonContent)).OnSetContent=function(e){return t.ToggleButtonContent=e});return this.toggleButtonContentVM}},{key:"Rank",get:function(){return void 0===this.rank&&(this.rank=ce(this)),this.rank},set:function(t){this.rank=t,this.SubItems.forEach((function(t){return t.Rank=void 0}))}},{key:"IsHaveSub",get:function(){return this.isHaveSub||(this.isHaveSub=he(this)),this.isHaveSub},set:function(t){this.isHaveSub=t}},{key:"Style",get:function(){return ue(this)}},{key:"SubFieldSelectVM",get:function(){return this.subFieldSelectVM||(this.subFieldSelectVM=de(this)),this.subFieldSelectVM}},{key:"Title",get:function(){return this.title||(this.title=pe(this)),this.title},set:function(t){this.title=t}},{key:"LocationStorageList",get:function(){return this.Table.AllRows}},{key:"LocationSelectVM",get:function(){return this.locationSelectVM||(this.locationSelectVM=me(this)),this.locationSelectVM}},{key:"TitleVM",get:function(){return this.titleVM||(this.titleVM=M(void 0,"ti\xeau \u0111\u1ec1")),this.titleVM}},{key:"ReplaceFactory",get:function(){return this.replaceFactory||(this.replaceFactory=new re),this.replaceFactory}},{key:"ModalElement",get:function(){var t=this.ReplaceFactory;return Object(i.jsxs)(Et.a,{title:this.Title,visible:this.IsModalVisible,onOk:this.ModalOK,onCancel:this.ModalCancel,children:[Object(i.jsxs)(d.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(f.a,{flex:"165px",children:Object(i.jsx)("b",{children:" Ti\xeau \u0111\u1ec1:"})}),Object(i.jsx)(f.a,{flex:"auto",children:Object(i.jsx)(k,{store:this.TitleVM})})]}),this.IsCreatedByUser?"":Object(i.jsxs)(d.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(f.a,{flex:"165px",children:Object(i.jsx)("b",{children:" Thi\u1ebft l\u1eadp ph\xe2n nh\xf3m:"})}),Object(i.jsx)(f.a,{flex:"auto",children:Object(i.jsx)(Ht,{store:this.SubFieldSelectVM})})]}),Object(i.jsxs)(d.a,{gutter:15,style:{marginTop:10},children:[Object(i.jsx)(f.a,{flex:"165px",children:Object(i.jsx)("b",{children:" \u0110\u1ed5i v\u1ecb tr\xed:"})}),Object(i.jsx)(f.a,{flex:"auto",children:Object(i.jsxs)(d.a,{children:[Object(i.jsx)(f.a,{flex:"auto",children:Object(i.jsx)(ne,{store:this.LocationSelectVM})}),Object(i.jsx)(f.a,{children:Object(i.jsx)(I.a,{type:"primary",size:"small",style:t.ButtonStyle,onClick:t.ToggleLocation,children:t.Location})})]})})]})]})}},{key:"HoverToolElement",get:function(){var t=new Ut;return t.Element=this.ToolElement,Object(i.jsx)(Kt,{store:t,style:{display:"flex",marginLeft:20}})}},{key:"ToolElement",get:function(){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(I.a,{size:"small",type:"primary",style:{backgroundColor:"#52c41a",border:"none"},onClick:this.MoveUp,children:Object(i.jsx)(zt.a,{})}),Object(i.jsx)(I.a,{size:"small",type:"primary",style:{backgroundColor:"#52c41a",border:"none"},onClick:this.MoveDown,children:Object(i.jsx)(qt.a,{})}),Object(i.jsx)(I.a,{type:"primary",size:"small",style:{backgroundColor:"#faad14",border:"none"},onClick:this.OpenModal,children:"..."}),Object(i.jsx)(I.a,{size:"small",type:"primary",style:{backgroundColor:"#52c41a",border:"none"},onClick:this.AddSub,children:"+"}),Object(i.jsx)(I.a,{type:"primary",size:"small",danger:!0,onClick:this.Delete,children:"x"})]})}}]),t}(),oe=function(t,e){var n=new ae;return n.Name=t,n.Dict=e,n},ce=function(t){return t.SupItem?t.SupItem.Rank+1:0},ue=function(t){return{display:"flex",marginLeft:20*t.Rank}},he=function(t){return 0!==t.SubItems.length},le=function(t){return t.IsShowSub?"-":"+"},de=function(t){var e=zs.Instance.MassItemFields,n=Lt(e,void 0);return n.Placeholder="ch\u1ecdn ph\xe2n nh\xf3m",n.OnSelectedItemChanged=function(e){return t.TempSubFields=e},n},fe=function(t){if(0===t.length)return t;var e=t[0].OrderMGI;if(!e.IsHaveValueOrder)return t;var n=e.OrderValues;return t.sort((function(t,e){return n.indexOf(t.FullValue)-n.indexOf(e.FullValue)}))},pe=function(t){return t.Name},me=function(t){var e=Jt([],void 0);return e.Placeholder="ch\u1ecdn v\u1ecb tr\xed",e.TitleRender=function(t){var e=15*t.Rank;return Object(i.jsx)("div",{style:{marginLeft:e},children:t.Title})},e.OnSelectedItemChanged=function(e){t.ReplaceFactory.ReferenceRow=e},e},Ie=function(t){var e=t.SubItems;if(0!==e.length)return e[0].MassGroupItem},ge=function(t){var e=t.SubMassGroupItem;if(!e)return[];var n=e.SupComponent.Items,i=-1,s=!0;n.forEach((function(t,e){s&&0===t.HaveMassItemSubComponents.length?i=e:s=!1}));var r=n.indexOf(t.MassGroupItem);return-1===i?[e.Field]:n.filter((function(t,e){return(-1===r||r<e)&&e<=i})).map((function(t){return t.Field}))},ve=function(t){var e=new kt;e.ValueType=ht,e.StringFilterType=dt,e.Values=[t.FullValue];var n=t.MassGroupItem,i=void 0,s=n.SubComponents.findIndex((function(t){return function(t,e){var n=!0,i=!0;return t.forEach((function(t,s){n&&!e.includes(t)&&(n=!1,i=!1)})),i}(t.Filter.Values,e.Values)}));-1!==s?i=n.SubComponents[s]:((i=new Ct).SubItem=n,i.Filter=e,n.SubComponents.push(i));var r=Tt(null,null,i);return i.Items=[r],t.SubMassGroupItem=r,r},be=function(t,e){var n=t?t.SubMassGroupItem?t.SubMassGroupItem:ve(t):e.MainMGI,i=Vt(n,jt);n.Items.push(i);var s=oe(i.Value,e);return s.FullValue=i.Value,s.IsCreatedByUser=!0,s.MassGroupItem=n,s.SupItem=t,s.CurrentList.push(s),s},Me=function(){function t(){var e=this;Object(o.a)(this,t),this.items=[],this.GetUnit=function(){if(e.SubCells){var t=void 0;return e.SubCells.forEach((function(e){e.Unit&&(t=e.Unit)})),t}return e.Items&&0!==e.Items.length?e.Items[0].Unit:void 0},this.totalValue=void 0,this.GetTotalValue=function(){return e.SubCells?e.SubCells.reduce((function(t,e){return t+e.TotalValue}),0):e.Items.reduce((function(t,e){return t+e.Value}),0)},this.GetSubCells=function(){var t=e.Row.SubItems;if(t&&0!==t.length){var n=e.Column;return t.map((function(t){return t.GetCellByColumn(n)})).filter((function(t){return void 0!==t}))}},this.AsString=function(){console.log("".concat(e.Column.Name," - ").concat(e.Row.Name," - ").concat(e.TotalValue))},this.UpdateData=function(){e.Row.IsCreatedByUser||(e.SubCells=e.GetSubCells(),e.TotalValue=e.GetTotalValue(),e.Unit=e.GetUnit(),e.ContentVM.Content=e.ValueString,e.MassType=Se(e),e.IsHaveVCS_Item=ke(e),e.IsHaveVCS_Item&&(e.VCS_Item=Ve(e)),e.ValueColor=je(e),e.TDBgColor=Oe(e))},this.ShowDetail=function(){var t="".concat("/BIM_Database").concat("/#","/massdetail"),n=function(e){return window.open(function(e){return"".concat(t,"/").concat(e)}(e),"_blank")};e.viewDetailId?n(e.viewDetailId):e.GetViewDetailId((function(t){var i=e.viewDetailId=t._id;n(i)}))},this.valueColor=void 0,this.tdBgColor=void 0,this.ApiData=function(){var t=e.AllItems.map((function(t){return t._id}));return{massType:e.MassType,massIds:t}},this.GetViewDetailId=function(t){var n=e.ApiData();_("https://api.bimdev.vn/api/hbdv/updatemass",n).then((function(t){return t.data})).then((function(e){return t(e)}))},Object(v.k)(this,{valueColor:v.l,tdBgColor:v.l})}return Object(c.a)(t,[{key:"id",get:function(){return this._id||(this._id=$()),this._id}},{key:"ColumnIndex",get:function(){return this.Column.Index}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t}},{key:"Unit",get:function(){return this.unit||(this.unit=this.GetUnit()),this.unit},set:function(t){this.unit=t}},{key:"UnitVM",get:function(){var t=this;return this.unitVM||(this.unitVM=M(this.Unit),this.unitVM.OnSetContent=function(e){return t.Unit=e}),this.unitVM}},{key:"TotalValue",get:function(){return this.totalValue||(this.totalValue=this.GetTotalValue()),this.totalValue},set:function(t){this.totalValue=t}},{key:"ContentVM",get:function(){return this.contentVM||(this.contentVM=M(this.ValueString)),this.contentVM}},{key:"ValueString",get:function(){if(this.Row.IsCreatedByUser)return"";var t=this.TotalValue;if(!t)return"";var e=this.Unit?this.Unit:"";return"".concat(t.toFixed(2)," ").concat(e)}},{key:"SubCells",get:function(){return this.subCells||(this.subCells=this.GetSubCells()),this.subCells},set:function(t){this.subCells=t}},{key:"MassType",get:function(){return this.massType||(this.massType=Se(this)),this.massType},set:function(t){this.massType=t}},{key:"AllItems",get:function(){return this.SubCells?this.SubCells.map((function(t){return t.Items})).reduce((function(t,e){return t.concat(e)}),[]):this.Items}},{key:"IsHaveVCS_Item",get:function(){return this.isHaveVCS_Item||(this.isHaveVCS_Item=ke(this)),this.isHaveVCS_Item},set:function(t){this.isHaveVCS_Item=t}},{key:"VCS_Item",get:function(){return this.vcs_Item||(this.vcs_Item=Ve(this)),this.vcs_Item},set:function(t){this.vcs_Item=t}},{key:"ValueColor",get:function(){return this.valueColor||(this.valueColor=je(this)),this.valueColor},set:function(t){this.valueColor=t}},{key:"TDBgColor",get:function(){return this.tdBgColor||(this.tdBgColor=Oe(this)),this.tdBgColor},set:function(t){this.tdBgColor=t}},{key:"AStyle",get:function(){return{color:this.ValueColor,fontWeight:"bold"}}},{key:"TDStyle",get:function(){return{backgroundColor:this.TDBgColor}}}]),t}(),ye=function(){return zs.Instance},ke=function(t){return t.Dict.ColumnField===W&&2===ye().MassResultComp.Phases.length&&1===t.ColumnIndex},je=function(t){return t.IsHaveVCS_Item&&t.VCS_Item?"#FFFFFF":"#1890ff"},Oe=function(t){return t.IsHaveVCS_Item&&t.VCS_Item?t.VCS_Item.Color:"#FFFFFF"},Ve=function(t){var e=ye().VersionCompareSetting.Items,n=t.Row.Cells,i=n.findIndex((function(t){return 0===t.ColumnIndex})),s=n[i],r=t.TotalValue/s.TotalValue,a=e.findIndex((function(t){return yt(t.Filter,r)}));return-1!==a?e[a]:void 0},Se=function(t){var e=void 0;if(t.SubCells){var n=!0;t.SubCells.forEach((function(t){n&&t.MassType&&(e=t.MassType,n=!1)}))}else t.Items&&t.Items.length>0&&(e=t.Items[0].MassType);return e},De=function(t){return t.MassGroupSetting?t.MassGroupSetting.Name:""},Ce=function(t){var e,n=null===(e=t.MainMGC)||void 0===e?void 0:e.Items[0];return n.Table=t,n.SupRow=void 0,n},we="elementfilter",xe="massexport",Fe="massgroup",Te=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){var t=e._id;_("https://api.bimdev.vn/api/hbs/delete",{_id:t}).then((function(t){return t.data})).then((function(t){return w.b.success("Delete setting successfully")})),e.Dict.Items.splice(e.Index,1),e.OnDelete&&e.OnDelete(),e.Dict.Input.EditItemId=void 0}}return Object(c.a)(t,[{key:"Name",get:function(){return this.name},set:function(t){this.name=t,this.OnNameChanged&&this.OnNameChanged(t)}},{key:"Description",get:function(){return this.description},set:function(t){this.description=t,this.OnDescriptionChanged&&this.OnDescriptionChanged(t)}},{key:"Data",get:function(){return this.data},set:function(t){this.data=t,this.OnDataChanged&&this.OnDataChanged(t)}},{key:"DisplayContent",get:function(){return this.Name}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}}]),t}(),Ge=function(){function t(){var e=this;Object(o.a)(this,t),this.AddNewField=function(){var t=zs.Instance.MassPropertyNames[0];return e.Fields.push(t),t}}return Object(c.a)(t,[{key:"Fields",get:function(){return this.fields||(this.fields=_e(this)),this.fields},set:function(t){this.fields=t}}]),t}(),Ne="Category",_e=function(){return[Ne]},Re=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Te),Ee=function(t,e){var n=new Re;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=function(t){var e=new Ge;return e.MassGroupComponent=wt(t.massGroupComponent),e}(t.data),n.Dict=e,n},Le=function(){function t(){var e=this;Object(o.a)(this,t),this.code=void 0,this.name=void 0,this.description=void 0,this.fullName=void 0,this.Delete=function(){e.Dict.WorkpackageVMs.splice(e.Index,1)},this.AsString=function(){console.log(e.Name,e.Code,e.Description)},Object(v.k)(this,{fullName:v.l})}return Object(c.a)(t,[{key:"_id",get:function(){return this.Workpackage._id}},{key:"Index",get:function(){return this.Dict.WorkpackageVMs.indexOf(this)}},{key:"M2VM",get:function(){return this.Workpackage.M2VM},set:function(t){this.Workpackage.M2VM=t}},{key:"SupItem",get:function(){return this.supItem||(this.supItem=Pe(this)),this.supItem}},{key:"Code",get:function(){return this.code||(this.code=this.Workpackage.Code),this.code},set:function(t){this.code=t,this.M2VM||(this.Workpackage.Code=t)}},{key:"Name",get:function(){return this.name||(this.name=this.Workpackage.Name),this.name},set:function(t){this.name=t,this.M2VM||(this.Workpackage.Name=t)}},{key:"Description",get:function(){return this.description||(this.description=this.Workpackage.Description),this.description},set:function(t){this.description=t,this.M2VM||(this.Workpackage.Description=t)}},{key:"FullName",get:function(){return this.fullName||(this.fullName=this.Workpackage.FullName),this.fullName},set:function(t){this.fullName=t}},{key:"SearchName",get:function(){return this.FullName}},{key:"DisplayContent",get:function(){return this.FullName}},{key:"CodeVM",get:function(){var t=this;this.codeVM||((this.codeVM=M(this.Code,"m\xe3 code")).onSetContent=function(e){return t.Code=e});return this.codeVM}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=M(this.Name,"t\xean c\xf4ng t\xe1c")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=M(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}}]),t}(),Ae=function(t,e){var n=new Le;return n.Workpackage=t,n.Dict=e,t.OnCodeChanged=function(e){t.M2VM&&(n.Code=e)},t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnFullNameChanged=function(e){t.M2VM&&(n.FullName=e)},t.OnDelete=function(){n.Delete()},n},Pe=function(t){var e=t.Workpackage.SupItem,n=wi.Instance.Workpackage_DictVM.WorkpackageVMs,i=n.findIndex((function(t){return t.Workpackage===e}));return-1!==i?n[i]:void 0},We=function(){function t(){Object(o.a)(this,t),this.ischecked=void 0,this.isDisable=!1,Object(v.k)(this,{ischecked:v.l,isDisable:v.l})}return Object(c.a)(t,[{key:"Ischecked",set:function(t){this.ischecked=t,this.onCheckChange&&this.onCheckChange(t)}}]),t}(),He=function(t,e){var n=new We;return n.ischecked=e,n.name=t,n},Ue=function(){function t(){var e=this;Object(o.a)(this,t),this.code=void 0,this.name=void 0,this.description=void 0,this.supItem=void 0,this.workpackageVMStorageList=void 0,this.isNew=void 0,this.commandName=void 0,this.AsString=function(){return"".concat(e.Code," ").concat(e.Name," ").concat(e.Description," ").concat(e.IsNew)},this.AddDatabase=function(){e.WorkpackageInput.AddDatabase()},this.DeleteFunc=function(){e.WorkpackageVM.Workpackage.Delete(),e.WorkpackageVM=void 0},this.Clear=function(){e.CodeVM.Content=null,e.NameVM.Content=null,e.DescriptionVM.Content=null,e.IsNewVM.Ischecked=!0},Object(v.k)(this,{isNew:v.l})}return Object(c.a)(t,[{key:"Code",get:function(){return this.code||(this.code=this.WorkpackageInput.Code),this.code},set:function(t){this.code=t,this.WorkpackageInput.Code=t}},{key:"Name",get:function(){return this.name||(this.name=this.WorkpackageInput.Name),this.name},set:function(t){this.name=t,this.WorkpackageInput.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.WorkpackageInput.Description),this.description},set:function(t){this.description=t,this.WorkpackageInput.Description=t}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t;var e=this.WorkpackageInput;e.SupItem=t?t.Workpackage:t}},{key:"WorkpackageVMStorageList",get:function(){return this.workpackageVMStorageList||(this.workpackageVMStorageList=ze(this)),this.workpackageVMStorageList},set:function(t){this.workpackageVMStorageList=t;var e=this.SupItemSelectVM;e.Items=t,e.InitialItem=this.SupItem}},{key:"SupItemSelectVM",get:function(){var t=this;if(!this.supItemSelectVM){var e=this.supItemSelectVM=Jt(this.WorkpackageVMStorageList,this.SupItem);e.Placeholder="c\xf4ng t\xe1c cha",e.CanClear=!0,e.OnSelectedItemChanged=function(e){return t.SupItem=e}}return this.supItemSelectVM}},{key:"IsNew",get:function(){return void 0===this.isNew&&(this.isNew=this.WorkpackageInput.IsNew),this.isNew},set:function(t){this.isNew=t,this.CommandVM.Content=Ke(this),this.WorkpackageInput.IsNew=t}},{key:"CommandName",get:function(){return this.commandName||(this.commandName=Ke(this)),this.commandName},set:function(t){this.commandName=t}},{key:"WorkpackageVM",get:function(){return this.workpackageVM},set:function(t){if(this.workpackageVM=t,t){this.WorkpackageInput.Workpackage=t.Workpackage;var e=t.Code,n=t.Name,i=t.Description,s=t.SupItem;this.CodeVM.Content=e,this.NameVM.Content=n,this.DescriptionVM.Content=i,this.SupItemSelectVM.InitialItem=s,this.IsNewVM.Ischecked=!1}else this.WorkpackageInput.Workpackage=t,this.IsNewVM.Ischecked=!0}},{key:"CodeVM",get:function(){var t=this;this.codeVM||((this.codeVM=M(this.Code,"m\xe3 code")).onSetContent=function(e){return t.Code=e});return this.codeVM}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=M(this.Name,"t\xean c\xf4ng t\xe1c")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=M(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}},{key:"IsNewVM",get:function(){var t=this;if(!this.isNewVM){var e=this.isNewVM=He("C\xf4ng t\xe1c m\u1edbi",this.IsNew);e.isDisable=!0,e.onCheckChange=function(n){t.IsNew=n,e.isDisable=!!n}}return this.isNewVM}},{key:"CommandVM",get:function(){var t=this;this.commandVM||((this.commandVM=M(this.CommandName)).onSetContent=function(e){return t.CommandName=e});return this.commandVM}},{key:"DeleteView",get:function(){return this.IsNew?"":Object(i.jsx)(I.a,{onClick:this.DeleteFunc,children:"Delete"})}}]),t}(),Be=function(){return wi.Instance},Ke=function(t){return t.IsNew?"Create":"Edit"},ze=function(t){return Be().Workpackage_DictVM.WorkpackageVMs},qe=function(t){return function(t,e){var n=new Ue;return n.WorkpackageInput=t,n.Dict=e,Be().Workpackage_DictVM.OnGetItemsDone_Funcs.push((function(){n.WorkpackageVMStorageList=ze(n)})),t.OnAddDatabaseDone=function(t){var e=n.CommandName;w.b.success("".concat(e," workpackage successfully"))},e.OnAdd=function(t){n.WorkpackageVM=t},n}(t.Workpackage_Dict.WorkpackageInput,t)},Je=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"M2VM",get:function(){return this.ModelItem.M2VM},set:function(t){this.ModelItem.M2VM=t}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Items",get:function(){return this.items||(this.items=an(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,t?(this.ModelItem.CurrentItem=t.ModelItem,this.Input.EditItem=t):this.ModelItem.CurrentItem=t}},{key:"Input",get:function(){return this.input||(this.input=on(this)),this.input}}]),t}(),Qe=function(){function t(){var e=this;Object(o.a)(this,t),this.name=void 0,this.GetDataVM=function(){if(e.OnGetDataVM)return e.OnGetDataVM()},this.Delete=function(){e.Dict.Items.splice(e.Index,1)},Object(v.k)(this,{name:v.l})}return Object(c.a)(t,[{key:"_id",get:function(){return this.ModelItem._id}},{key:"M2VM",get:function(){return this.ModelItem.M2VM},set:function(t){this.ModelItem.M2VM=t}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.M2VM||(this.ModelItem.Name=t)}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.M2VM||(this.ModelItem.Description=t)}},{key:"SettingType",get:function(){return this.settingType||(this.settingType=this.ModelItem.SettingType),this.settingType},set:function(t){this.settingType=t,this.ModelItem.SettingType=t}},{key:"SearchName",get:function(){return this.Name}},{key:"DisplayContent",get:function(){return this.Name}},{key:"Data",get:function(){return this.data||(this.data=this.ModelItem.Data),this.data},set:function(t){this.data=t,this.M2VM||(this.ModelItem.Data=t)}},{key:"DataVM",get:function(){return this.dataVM||(this.dataVM=this.GetDataVM()),this.dataVM},set:function(t){this.dataVM=t,t&&this.OnInitialSetDataVM&&this.OnInitialSetDataVM(t),this.M2VM||(this.Data=t?t.ModelItem:t)}},{key:"Index",get:function(){return this.Dict.Items.indexOf(this)}}]),t}(),Xe=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){var e=t.CategoryFilterVM;e&&e.OnInitialData();var n=t.FamilyFilterVM;n&&n.OnInitialData()},t}return n}(Qe),Ye=function(){function t(){var e=this;Object(o.a)(this,t),this.SetData=function(t){if(t){var n=t.ValueType,i=(t.NumberFilterType,t.StringFilterType),s=t.Values;e.ValueTypeSelectVM.InitialItem=n,e.StringFilterTypeSelectVM.InitialItem=i,e.ValuesSelectVM.InitialItems=s}},this.OnInitialData=function(){e.ValueType,e.NumberFilterType,e.StringFilterType,e.Values},Object(v.k)(this,{})}return Object(c.a)(t,[{key:"pmDataVM",get:function(){return wi.Instance}},{key:"ValueType",get:function(){return this.valueType||(this.valueType=this.ModelItem.ValueType),this.valueType},set:function(t){this.valueType=t,this.ModelItem.ValueType=t}},{key:"NumberFilterType",get:function(){return this.numberFilterType||(this.numberFilterType=this.ModelItem.NumberFilterType),this.numberFilterType},set:function(t){this.numberFilterType=t,this.ModelItem.NumberFilterType=t}},{key:"StringFilterType",get:function(){return this.stringFilterType||(this.stringFilterType=this.ModelItem.StringFilterType),this.stringFilterType},set:function(t){this.stringFilterType=t,this.ModelItem.StringFilterType=t}},{key:"Values",get:function(){return this.values||(this.values=this.ModelItem.Values),this.values},set:function(t){this.values=t,this.ModelItem.Values=t}},{key:"ValueStorageList",get:function(){return this.valueStorageList||(this.valueStorageList=this.ModelItem.ValueStorageList),this.valueStorageList}},{key:"ValueTypeSelectVM",get:function(){var t=this;this.valueTypeSelectVM||((this.valueTypeSelectVM=Jt(this.pmDataVM.FilterValueTypes,this.ValueType)).OnSelectedItemChanged=function(e){t.ValueType=e});return this.valueTypeSelectVM}},{key:"StringFilterTypeSelectVM",get:function(){var t=this;this.stringFilterTypeSelectVM||((this.stringFilterTypeSelectVM=Jt(this.pmDataVM.StringFilterTypes,this.StringFilterType)).OnSelectedItemChanged=function(e){t.StringFilterType=e});return this.stringFilterTypeSelectVM}},{key:"ValuesSelectVM",get:function(){var t=this;if(!this.valuesSelectVM){var e=this.valuesSelectVM=Lt(this.ValueStorageList,this.Values);this.ValueSelectPlaceholder&&(e.Placeholder=this.ValueSelectPlaceholder),e.OnSelectedItemChanged=function(e){t.Values=e}}return this.valuesSelectVM}}]),t}(),Ze=function(t){if(t){var e=new Ye;return e.ModelItem=t,e}},$e=function(){function t(){var e=this;Object(o.a)(this,t),this.GetCategoryFilterVM=function(){var t=e.ModelItem.CategoryFilter;return Ze(t)},this.isHaveFamilyFilter=void 0,this.GetFamilyFilterVM=function(){var t=e.ModelItem.FamilyFilter;return Ze(t)},this.SetData=function(t){e.CategoryFilterVM.SetData(t.CategoryFilterVM);var n=!0===t.IsHaveFamilyFilter;e.IsHaveFamilyFilterVM.Ischecked=n,e.FamilyFilterVM.SetData(t.FamilyFilterVM)},Object(v.k)(this,{isHaveFamilyFilter:v.l})}return Object(c.a)(t,[{key:"CategoryFilterVM",get:function(){return!this.categoryFilterVM&&this.ModelItem&&(this.categoryFilterVM=this.GetCategoryFilterVM()),this.categoryFilterVM}},{key:"IsHaveFamilyFilter",get:function(){return this.isHaveFamilyFilter||(this.isHaveFamilyFilter=this.ModelItem.IsHaveFamilyFilter),this.isHaveFamilyFilter},set:function(t){this.isHaveFamilyFilter=t,this.ModelItem.IsHaveFamilyFilter=t}},{key:"FamilyFilterVM",get:function(){return!this.familyFilterVM&&this.ModelItem&&(this.familyFilterVM=this.GetFamilyFilterVM()),this.familyFilterVM}},{key:"IsHaveFamilyFilterVM",get:function(){var t=this;this.isHaveFamilyFilterVM||((this.isHaveFamilyFilterVM=He("Thi\u1ebft l\u1eadp l\u1ecdc Family",this.IsHaveFamilyFilter)).onCheckChange=function(e){t.IsHaveFamilyFilter=e});return this.isHaveFamilyFilterVM}}]),t}(),tn=function(t){var e=new $e;return e.ModelItem=t,e},en=function(t,e){var n=new Xe;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){var e=t.Data;return tn(e)},n},nn=function(t){return t.IsNew?"Create":"Edit"},sn=function(){function t(){var e=this;Object(o.a)(this,t),this.dataVM=void 0,this.GetDataVM=function(){if(e.OnGetDataVM)return e.OnGetDataVM()},this.isNew=void 0,this.commandName=void 0,this.DeleteFunc=function(){e.EditItem.ModelItem.Delete(),e.EditItem.Delete(),e.EditItem=void 0},this.AddDatabase=function(){e.ModelItem.AddDatabase()},Object(v.k)(this,{dataVM:v.l,isNew:v.l})}return Object(c.a)(t,[{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"SettingType",get:function(){return this.settingType||(this.settingType=this.ModelItem.SettingType),this.settingType},set:function(t){this.settingType=t,this.ModelItem.SettingType=t}},{key:"SearchName",get:function(){return this.Name}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=M(this.Name,"t\xean b\u1ed9 l\u1ecdc")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=M(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}},{key:"SettingTypeVM",get:function(){var t=this;this.settingTypeVM||((this.settingTypeVM=M(this.SettingType,"lo\u1ea1i thi\u1ebft l\u1eadp")).onSetContent=function(e){return t.SettingType=e});return this.settingTypeVM}},{key:"DataVM",get:function(){return this.dataVM||(this.dataVM=this.GetDataVM()),this.dataVM},set:function(t){this.DataVM.SetData&&this.DataVM.SetData(t)}},{key:"EditItem",get:function(){return this.editItem},set:function(t){this.editItem=t;var e=this.ModelItem;if(t){e.EditItem=t.ModelItem;var n=t.Name,i=t.Description,s=t.SettingType;this.NameVM.Content=n,this.DescriptionVM.Content=i,this.SettingTypeVM.Content=s,this.DataVM=t.DataVM,this.IsNewVM.Ischecked=!1}else e.EditItem=t,this.IsNewVM.Ischecked=!0}},{key:"IsNew",get:function(){return void 0===this.isNew&&(this.isNew=this.ModelItem.IsNew),this.isNew},set:function(t){this.isNew=t,this.CommandVM.Content=nn(this),this.ModelItem.IsNew=t}},{key:"IsNewVM",get:function(){var t=this;if(!this.isNewVM){var e=this.isNewVM=He("Thi\u1ebft l\u1eadp m\u1edbi",this.IsNew);e.isDisable=!0,e.onCheckChange=function(n){t.IsNew=n,e.isDisable=!!n}}return this.isNewVM}},{key:"CommandName",get:function(){return this.commandName||(this.commandName=nn(this)),this.commandName},set:function(t){this.commandName=t}},{key:"CommandVM",get:function(){var t=this;this.commandVM||((this.commandVM=M(this.CommandName)).onSetContent=function(e){return t.CommandName=e});return this.commandVM}},{key:"DeleteView",get:function(){return this.IsNew?"":Object(i.jsx)(I.a,{onClick:this.DeleteFunc,children:"Delete"})}}]),t}(),rn=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(sn),an=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return en(e,t)}))},on=function(t){return function(t,e){var n=new rn;return n.ModelItem=t,n.Dict=e,t.OnAddDatabaseDone=function(t){var e=n.CommandName;w.b.success("".concat(e," element filter setting successfully"))},n.OnGetDataVM=function(){var e=t.Data;return tn(e)},n}(t.ModelItem.Input,t)},cn=function(){function t(){var e=this;Object(o.a)(this,t),this.workpackageVMStorageList=void 0,this.Delete=function(){e.ModelItem.Delete(),e.Dict.ValueSettingVMs.splice(e.Index,1)},this.SetData=function(t){e.RetrieveTypeSelectVM.InitialItem=t.RetrieveType,e.ValueFilterVM.SetData(t.ValueFilterVM),e.WorkpackageSelectVM.InitialItem=t.WorkpackageVM,e.MassTypeSelectVM.InitialItem=t.MassType}}return Object(c.a)(t,[{key:"Index",get:function(){return this.Dict.ValueSettingVMs.indexOf(this)}},{key:"RetrieveType",get:function(){return this.retrieveType||(this.retrieveType=this.ModelItem.RetrieveType),this.retrieveType},set:function(t){this.retrieveType=t,this.ModelItem.RetrieveType=t}},{key:"RetrieveTypeStorageList",get:function(){return ln(this)}},{key:"RetrieveTypeSelectVM",get:function(){var t=this;this.retrieveTypeSelectVM||((this.retrieveTypeSelectVM=Jt(this.RetrieveTypeStorageList,this.RetrieveType)).OnSelectedItemChanged=function(e){return t.RetrieveType=e});return this.retrieveTypeSelectVM}},{key:"ValueFilterVM",get:function(){this.valueFilterVM||((this.valueFilterVM=Ze(this.ModelItem.ValueFilter)).ValueSelectPlaceholder="gi\xe1 tr\u1ecb parameter");return this.valueFilterVM},set:function(t){this.valueFilterVM=t,this.ModelItem.ValueFilter=t?t.ModelItem:t}},{key:"WorkpackageVM",get:function(){return this.workpackageVM||(this.workpackageVM=dn(this)),this.workpackageVM},set:function(t){this.workpackageVM=t;var e=this.ModelItem;t?this.ModelItem.Workpackage=t.Workpackage:e.Workpackage=t}},{key:"WorkpackageVMStorageList",get:function(){return this.workpackageVMStorageList||(this.workpackageVMStorageList=fn(this)),this.workpackageVMStorageList},set:function(t){this.workpackageVMStorageList=t;var e=this.WorkpackageSelectVM;e.Items=t,e.SelectedIndex=-1}},{key:"WorkpackageSelectVM",get:function(){var t=this;if(!this.workpackageSelectVM){var e=this.WorkpackageVMStorageList?this.WorkpackageVMStorageList:[],n=this.workpackageSelectVM=Jt(e,this.WorkpackageVM);n.Placeholder="ch\u1ecdn c\xf4ng t\xe1c",n.OnSelectedItemChanged=function(e){return t.WorkpackageVM=e}}return this.workpackageSelectVM}},{key:"MassType",get:function(){return this.massType||(this.massType=this.ModelItem.MassType),this.massType},set:function(t){this.massType=t,this.ModelItem.MassType=t}},{key:"MassTypeStorageList",get:function(){return pn(this)}},{key:"MassTypeSelectVM",get:function(){var t=this;if(!this.massTypeSelectVM){var e=this.massTypeSelectVM=Jt(this.MassTypeStorageList,this.MassType);e.Placeholder="lo\u1ea1i kh\u1ed1i l\u01b0\u1ee3ng",e.OnSelectedItemChanged=function(e){return t.MassType=e}}return this.massTypeSelectVM}}]),t}(),un=function(){return wi.Instance},hn=function(t,e){var n=new cn;return n.ModelItem=t,n.Dict=e,un().Workpackage_DictVM.OnGetItemsDone_Funcs.push((function(t){n.WorkpackageVMStorageList=fn(n)})),n},ln=function(t){return un().ValueRetrieveTypes},dn=function(t){var e=t.ModelItem.Workpackage;if(e){var n=un().Workpackage_DictVM.WorkpackageVMs;if(n){var i=n.findIndex((function(t){return t.Workpackage===e}));return-1!==i?n[i]:void 0}}},fn=function(t){return un().Workpackage_DictVM.WorkpackageVMs},pn=function(t){return un().MassTypes},mn=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){e.Dict.ValueSettings.splice(e.Index,1)}}return Object(c.a)(t,[{key:"Index",get:function(){return this.Dict.ValueSettings.indexOf(this)}},{key:"Workpackage",get:function(){return this.workpackage||(this.workpackage=bn(this)),this.workpackage},set:function(t){this.workpackage=t,this.workpackageId=t?t._id:void 0}},{key:"ApiData",get:function(){return Mn(this)}}]),t}(),In="byparameter",gn=function(t,e){var n=new mn;return n.RetrieveType=t.RetrieveType,n.MassType=t.MassType,n.ValueFilter=t.ValueFilter,n.Workpackage=t.Workpackage,n.Dict=e,n},vn=function(t){var e=new mn;e.RetrieveType=In,e.Dict=t;var n=new kt;return n.CategoryType=ut,n.ValueType=ht,n.StringFilterType=dt,n.Values=["Volume"],e.ValueFilter=n,e},bn=function(t){var e=t.workpackageId;if(e){var n=zs.Instance.Workpackage_Dict.Workpackages;if(n){var i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}},Mn=function(t){return{retrieveType:t.RetrieveType,massType:t.MassType,valueFilter:t.ValueFilter.ApiData,workpackageId:t.workpackageId}},yn=function(){function t(){var e=this;Object(o.a)(this,t),this.elementFilterVMStorageList=void 0,this.valueSettingVMs=void 0,this.AddNewValueSettingVM=function(){var t=e.ModelItem.AddNewValueSetting(),n=hn(t,e);return e.ValueSettingVMs.push(n),n},this.SetData=function(t){e.ElementFilterSelectVM.InitialItem=t.ElementFilterVM,e.ValueSettingVMs=t.ValueSettingVMs},Object(v.k)(this,{valueSettingVMs:v.l})}return Object(c.a)(t,[{key:"ElementFilterVM",get:function(){return this.elementFilterVM||(this.elementFilterVM=On(this)),this.elementFilterVM},set:function(t){this.elementFilterVM=t;var e=this.ModelItem;e.ElementFilter=t?t.ModelItem:t}},{key:"ElementFilterVMStorageList",get:function(){return this.elementFilterVMStorageList||(this.elementFilterVMStorageList=Vn(this)),this.elementFilterVMStorageList},set:function(t){this.elementFilterVMStorageList=t;var e=this.ElementFilterSelectVM;e.Items=t,e.SelectedIndex=0}},{key:"ElementFilterSelectVM",get:function(){var t=this;if(!this.elementFilterSelectVM){var e=this.ElementFilterVMStorageList?this.ElementFilterVMStorageList:[],n=this.elementFilterSelectVM=Jt(e,this.ElementFilterVM);n.Placeholder="ch\u1ecdn b\u1ed9 l\u1ecdc",n.OnSelectedItemChanged=function(e){return t.ElementFilterVM=e}}return this.elementFilterSelectVM}},{key:"ValueSettingVMs",get:function(){return this.valueSettingVMs||(this.valueSettingVMs=Sn(this)),this.valueSettingVMs},set:function(t){var e=this.valueSettingVMs,n=this.ModelItem.ValueSettings,i=e.length,s=t.length;e.forEach((function(e,n){n>=s||e.SetData(t[n])}));var r=Math.abs(i-s);if(i>s)e.splice(s,r),n.splice(s,r);else if(i<s)for(var a=0;a<r;a++){var o=t[i+a],c=gn(o.ModelItem,this.ModelItem);n.push(c);var u=hn(c,this);e.push(u)}}}]),t}(),kn=function(){return wi.Instance},jn=function(t){var e=new yn;return e.ModelItem=t,kn().ElementFilterSetting_DictVM.OnGetItemsDone=function(t){e.ElementFilterVMStorageList=Vn(e)},e},On=function(t){var e=t.ModelItem.ElementFilter;if(e){var n=kn().ElementFilterSetting_DictVM.Items;if(n){var i=n.findIndex((function(t){return t.ModelItem===e}));return-1!==i?n[i]:void 0}}},Vn=function(t){return kn().ElementFilterSetting_DictVM.Items},Sn=function(t){return t.ModelItem.ValueSettings.map((function(e){return hn(e,t)}))},Dn=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){t.ValueSettingVMs},t}return n}(Qe),Cn=function(t,e){var n=new Dn;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){var e=t.Data;return jn(e)},n},wn=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(sn),xn=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=Fn(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,t?(this.ModelItem.CurrentItem=t.ModelItem,this.Input.EditItem=t):this.ModelItem.CurrentItem=t}},{key:"Input",get:function(){return this.input||(this.input=Tn(this)),this.input}}]),t}(),Fn=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Cn(e,t)}))},Tn=function(t){return function(t,e){var n=new wn;return n.ModelItem=t,n.Dict=e,t.OnAddDatabaseDone=function(t){var e=n.CommandName;w.b.success("".concat(e," setting successfully"))},n.OnGetDataVM=function(){var e=t.Data;return jn(e)},n}(t.ModelItem.Input,t)},Gn=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.Add=function(t){e.Items.push(t)},Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=Nn(this)),this.items}},{key:"CurrentItem",get:function(){return this.currentItem||(this.currentItem=this.ModelItem.CurrentItem),this.currentItem},set:function(t){this.currentItem=t,this.ModelItem.CurrentItem=t?t.ModelItem:t}}]),t}(),Nn=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Ri(e,t)}))},_n=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"DisplayContent",get:function(){return"".concat(this.Name)}}]),t}(),Rn=function(t,e){if(t){var n=new _n;return n.ModelItem=t,n.Dict=e,n}},En="addversion",Ln=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.OnGetItemsDone_Funcs=[],this.state=void 0,this.Add=function(t){e.Items.push(t)},this.AddVersion=function(){e.State=En},this.Cancel=function(){e.State=void 0},this.OK=function(){var t=e.Input.Name;-1===e.Items.findIndex((function(e){return e.Name===t}))?(e.State=void 0,e.ModelItem.AddMassVersion()):w.b.warning("version name already exists!")},Object(v.k)(this,{items:v.l,state:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=Pn(this)),this.items}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"Input",get:function(){return this.input||(this.input=Wn(this)),this.input}},{key:"State",get:function(){return this.state},set:function(t){this.state=t}}]),t}(),An=function(){function t(){Object(o.a)(this,t),this.name=void 0}return Object(c.a)(t,[{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Description",get:function(){return this.description||(this.description=this.ModelItem.Description),this.description},set:function(t){this.description=t,this.ModelItem.Description=t}},{key:"NameVM",get:function(){var t=this;this.nameVM||((this.nameVM=M(this.Name,"t\xean version")).onSetContent=function(e){return t.Name=e});return this.nameVM}},{key:"DescriptionVM",get:function(){var t=this;this.descriptionVM||((this.descriptionVM=M(this.Description,"m\xf4 t\u1ea3")).onSetContent=function(e){return t.Description=e});return this.descriptionVM}}]),t}(),Pn=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Rn(e,t)}))},Wn=function(t){return function(t,e){var n=new An;return n.ModelItem=t,n.Dict=e,n}(t.ModelItem.Input,t)},Hn=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"_id",get:function(){return this.ModelItem._id}},{key:"Name",get:function(){return this.name||(this.name=this.ModelItem.Name),this.name},set:function(t){this.name=t,this.ModelItem.Name=t}},{key:"Code",get:function(){return this.code||(this.code=this.ModelItem.Code),this.code},set:function(t){this.code=t,this.ModelItem.Code=t}},{key:"Phase_DictVM",get:function(){return this.phase_DictVM||(this.phase_DictVM=Bn(this)),this.phase_DictVM}},{key:"RebarMass_Dict",get:function(){return this.rebarMass_Dict||(this.rebarMass_Dict=this.ModelItem.RebarMass_Dict),this.rebarMass_Dict}},{key:"InputExportSet",get:function(){return this.ModelItem.InputExportSet}},{key:"DisplayContent",get:function(){return"".concat(this.Code," - ").concat(this.Name)}}]),t}(),Un=function(t,e){if(t){var n=new Hn;return n.ModelItem=t,n.Dict=e,n}},Bn=function(t){return function(t){var e=new Ln;return e.ModelItem=t,t.OnGetItemsDone_Funcs.push((function(t){e.Items,e.GetItemsDone=!0})),t.OnAdd=function(t){e.Add(Rn(t,e))},e}(t.ModelItem.Phase_Dict)},Kn=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=zn(this)),this.items},set:function(t){this.items=t,this.ModelItem.Items=t.map((function(t){return t.ModelItem}))}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}}]),t}(),zn=function(t){var e=t.ModelItem.Items;if(e)return e.map((function(e){return Un(e,t)}))},qn=function(){function t(){var e=this;Object(o.a)(this,t),this.IsShowProjectSelect=!0,this.CanHavePhase=!1,this.isHavePhase=void 0,this.IsDataPending=!1,this.handledRatio=0,this.GetMassData=function(){e.IsDataPending=!0,e.HandledRatio=0,e.ModelItem.GetMassData()},Object(v.k)(this,{IsShowProjectSelect:v.l,CanHavePhase:v.l,isHavePhase:v.l,IsDataPending:v.l})}return Object(c.a)(t,[{key:"Projects",get:function(){return this.projects||(this.projects=this.ModelItem.Projects),this.projects},set:function(t){this.projects=t,this.ModelItem.Projects=t}},{key:"ProjectVMs",get:function(){return this.projectVMs||(this.projectVMs=Yn(this)),this.projectVMs},set:function(t){this.projectVMs=t,this.Projects=t.map((function(t){return t.ModelItem}))}},{key:"ProjectVMStorageList",get:function(){return this.projectVMStorageList||(this.projectVMStorageList=Xn(this)),this.projectVMStorageList},set:function(t){this.projectVMStorageList=t,this.projectVMs=Yn(this);var e=this.ProjectSelectVM;e.Items=t,e.InitialItems=this.projectVMs}},{key:"ProjectSelectVM",get:function(){var t=this;if(!this.projectSelectVM){var e=this.ProjectVMStorageList?this.ProjectVMStorageList:[],n=this.projectSelectVM=Lt(e,this.ProjectVMs);n.Placeholder="ch\u1ecdn d\u1ef1 \xe1n",n.OnSelectedItemChanged=function(e){return t.ProjectVMs=e}}return this.projectSelectVM}},{key:"Phases",get:function(){return this.phases||(this.phases=this.ModelItem.Phases),this.phases},set:function(t){this.phases=t,this.ModelItem.Phases=t}},{key:"PhaseVMs",get:function(){return this.phaseVMs||(this.phaseVMs=Zn(this)),this.phaseVMs},set:function(t){this.phaseVMs=t,this.Phases=t.map((function(t){return t.ModelItem}))}},{key:"MassItem_Dict",get:function(){return this.massItem_Dict||(this.massItem_Dict=this.ModelItem.MassItem_Dict),this.massItem_Dict}},{key:"PhaseVMStorageList",get:function(){return this.phaseVMStorageList},set:function(t){this.phaseVMStorageList=t,this.phaseVMs=Zn(this);var e=this.PhaseSelectVM;e.Items=t,e.InitialItems=this.phaseVMs}},{key:"PhaseSelectVM",get:function(){var t=this;if(!this.phaseSelectVM){var e=this.PhaseVMStorageList?this.PhaseVMStorageList:[],n=this.phaseSelectVM=Lt(e,this.PhaseVMs);n.Placeholder="ch\u1ecdn version",n.OnSelectedItemChanged=function(e){return t.PhaseVMs=e}}return this.phaseSelectVM}},{key:"IsHavePhase",get:function(){return this.isHavePhase||(this.isHavePhase=this.ModelItem.IsHavePhase),this.isHavePhase},set:function(t){this.isHavePhase=t,this.ModelItem.IsHavePhase=t}},{key:"IsShowPhaseSelectVM",get:function(){var t=this;this.isShowPhaseSelectVM||((this.isShowPhaseSelectVM=He("So s\xe1nh c\xe1c version",this.IsHavePhase)).onCheckChange=function(e){t.IsHavePhase=e});return this.isShowPhaseSelectVM}},{key:"MassGroupSetting",get:function(){return this.ModelItem.MassGroupSetting},set:function(t){this.ModelItem.MassGroupSetting=t}},{key:"MassGroupSettingStorageList",get:function(){this.massGroupSettingStorageList||(this.massGroupSettingStorageList=$n(this))},set:function(t){this.massGroupSettingStorageList=t,this.MassGroupSettingSelectVM.Items=t}},{key:"MassGroupSettingSelectVM",get:function(){var t=this;if(!this.massGroupSettingSelectVM){var e=this.MassGroupSettingStorageList?this.MassGroupSettingStorageList:[],n=this.massGroupSettingSelectVM=Jt(e);n.CanClear=!0,n.Placeholder="ch\u1ecdn b\u1ed9 set kh\u1ed1i l\u01b0\u1ee3ng",n.OnSelectedItemChanged=function(e){return t.MassGroupSetting=e}}return this.massGroupSettingSelectVM}},{key:"LoadingSpinTip",get:function(){return"loading data ... (".concat((100*this.HandledRatio).toFixed(1),"%)")}},{key:"LoadingSpinTipVM",get:function(){return this.loadingSpinTipVM||(this.loadingSpinTipVM=M(this.LoadingSpinTip)),this.loadingSpinTipVM}},{key:"HandledRatio",get:function(){return this.handledRatio},set:function(t){this.handledRatio=t,this.LoadingSpinTipVM.Content=this.LoadingSpinTip}}]),t}(),Jn=function(){return wi.Instance},Qn=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new qn;n.ModelItem=t,e&&(Jn().Project_DictVM.OnGetItemsDone=function(t){n.ProjectVMStorageList=Xn(n)}),t.OnGetItemsDone_Funcs.push((function(){w.b.success("get mass data successfully")}));var i=t.MassItem_Dict.MassTable;return i.OnIsUpdateDataDone_Funcs.push((function(){n.IsDataPending=!1})),i.OnSetHandledRatio_Funcs.push((function(t){n.HandledRatio=t})),n},Xn=function(t){return Jn().Project_DictVM.Items},Yn=function(t){var e=t.ProjectVMStorageList;if(!e)return[];var n=[];return t.Projects.forEach((function(t){var i=e.findIndex((function(e){return e.ModelItem===t}));-1!==i&&n.push(e[i])})),n},Zn=function(t){var e=t.PhaseVMStorageList;if(!e)return[];var n=[];return t.Phases.forEach((function(t){var i=e.findIndex((function(e){return e.ModelItem===t}));-1!==i&&n.push(e[i])})),n},$n=function(t){var e=zs.Instance.MassGroupSetting_Dict,n=e.Items;return n||e.OnGetItemsDone_Funcs.push((function(){t.MassGroupSettingStorageList=e.Items})),n},ti="default",ei="edit",ni=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"Render",get:function(){return this.render||(this.render=si(this)),this.render},set:function(t){this.render=t}}]),t}(),ii=function(t,e){var n=new ni;return n.State=t,n.Render=e,n},si=function(t){switch(t.State){case ti:return function(t){return t};case ei:return function(t,e,n){if(!n)return t;var s=M(t,"input"),r=n.length,a=e;return n.filter((function(t,e){return e<r-1})).forEach((function(t){return a=a[t]})),s.onSetContent=function(t){return a[n[r-1]]=t},Object(i.jsx)(k,{store:s})};default:return}},ri=function t(){var e=this;Object(o.a)(this,t),this.Items=[],this.GetRender=function(t){var n=e.Items,i=n.findIndex((function(e){return e.State===t}));if(-1===i){var s=ii(t);return n.push(s),s}return n[i]}},ai=function(){function t(){Object(o.a)(this,t),this.RenderState=ti,this.Title=void 0,Object(v.k)(this,{Title:v.l})}return Object(c.a)(t,[{key:"Render_Dict",get:function(){return this.render_Dict||(this.render_Dict=new ri),this.render_Dict},set:function(t){this.render_Dict=t}}]),t}(),oi=function(t,e,n,i){var s=new ai;s.Title=t,s.DataIndex=e,s.Key=$(),s.Table=i;var r=s.Render_Dict;return n&&n.forEach((function(t){r.GetRender(t.State).Render=t.Render})),s},ci=function(t){var e=void 0;if(t.CanAdd){var n=t.AddItem;e=Object(i.jsx)(I.a,{type:"primary",size:"small",onClick:n,children:"Add"})}var s=[ii(ti,(function(e,n,s,r,a){var o="";if(t.CanEdit){o=Object(i.jsx)(I.a,{type:"primary",size:"small",style:{backgroundColor:"#faad14",border:"none"},onClick:function(){return a.Edit()},children:"Edit"})}var c="";if(t.CanDelete){c=Object(i.jsx)(I.a,{type:"primary",danger:!0,size:"small",onClick:function(){return t.DeleteItem(n,a)},children:"Delete"})}return Object(i.jsxs)(i.Fragment,{children:[o,c]})})),ii(ei,(function(t,e,n,s,r){return Object(i.jsx)(I.a,{type:"primary",size:"small",onClick:function(){return r.OK()},children:"OK"})}))];return oi(e,null,s,t)},ui=function(){function t(){var e=this;Object(o.a)(this,t),this.Edit=function(){e.Cells.forEach((function(t){return t.RenderState=ei}))},this.OK=function(){e.Cells.forEach((function(t){return t.RenderState=ti})),e.Table.EditItem(e.Item)}}return Object(c.a)(t,[{key:"Key",get:function(){return this.key||(this.key=this.Item._id?this.Item._id:this.Item.id,this.key||(this.key=$())),this.key}},{key:"Cells",get:function(){return this.cells||(this.cells=di(this)),this.cells}}]),t}(),hi=function(){function t(){var e=this;Object(o.a)(this,t),this.renderState=void 0,this.Render=function(){var t=e.DataIndex,n=e.Item,i=void 0;return t&&(i=n,t.forEach((function(t){i=i[t]}))),e.Render_Dict.GetRender(e.RenderState).Render(i,n,t,e,e.Row)},Object(v.k)(this,{renderState:v.l})}return Object(c.a)(t,[{key:"Key",get:function(){return"".concat(this.Column.Key,"_").concat(this.Row.Key)}},{key:"Item",get:function(){return this.Row.Item}},{key:"RenderState",get:function(){return this.renderState||(this.renderState=this.Column.RenderState),this.renderState},set:function(t){this.renderState=t}},{key:"Render_Dict",get:function(){return this.render_Dict||(this.render_Dict=this.Column.Render_Dict),this.render_Dict}},{key:"DataIndex",get:function(){return this.Column.DataIndex}}]),t}(),li=function(t,e){var n=new ui;return n.Item=t,n.Table=e,n},di=function(t){return t.Table.Columns.map((function(e){return function(t,e){var n=new hi;return n.Row=t,n.Column=e,n}(t,e)}))},fi=function(){function t(){var e=this;Object(o.a)(this,t),this.CanAdd=!0,this.CanDelete=!0,this.CanEdit=!0,this.IsShowActionColumn=!0,this.columns=void 0,this.dataSource=void 0,this.rows=void 0,this.AddItem=function(){var t=void 0;t=e.OnGetItemForAdd?e.OnGetItemForAdd():{Key:$()},e.DataSource.push(t);var n=li(t,e);e.Rows.push(n),n.Edit()},this.DeleteItem=function(t,n){var i=e.DataSource,s=i.indexOf(t);i.splice(s,1),e.Rows.splice(s,1),e.OnDeleteItem&&e.OnDeleteItem(t)},this.EditItem=function(t){e.OnEditItem&&e.OnEditItem(t)},Object(v.k)(this,{columns:v.l,dataSource:v.l,rows:v.l,CanAdd:v.l,CanDelete:v.l,CanEdit:v.l,IsShowActionColumn:v.l})}return Object(c.a)(t,[{key:"Columns",get:function(){return this.columns||(this.columns=[oi("T\xean c\u1ea5u ki\u1ec7n","ElementName",null,this),oi("\u0110\u01b0\u1eddng k\xednh","Diameter",null,this)],this.IsShowActionColumn&&this.columns.push(ci(this))),this.columns},set:function(t){this.columns=t,this.Rows=void 0}},{key:"DataSource",get:function(){return this.dataSource||(this.dataSource=[{id:1,ElementName:"W1",Diameter:"18",Weight:"30"},{id:2,ElementName:"W2",Diameter:"20",Weight:"3.7"}]),this.dataSource},set:function(t){this.dataSource=t,this.Rows=void 0}},{key:"Rows",get:function(){var t;return this.rows||(this.rows=(t=this).DataSource.map((function(e){return li(e,t)}))),this.rows},set:function(t){this.rows=t}}]),t}(),pi=function t(){Object(o.a)(this,t),Object(v.k)(this,{})},mi=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).IsCategoryChecked=!0,t}return Object(c.a)(n,[{key:"CategoryCheckboxVM",get:function(){if(!this.categoryCheckboxVM)this.categoryCheckboxVM=He(void 0,this.IsCategoryChecked);return this.categoryCheckboxVM}}]),n}(Qe),Ii=function(t,e){var n=new mi;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){return function(t){var e=new pi;return e.ModelItem=t,e}(t.Data)},n},gi=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Te),vi=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=[Ii(new gi)]),this.items}},{key:"TableVM",get:function(){return this.tableVM||(this.tableVM=yi(this)),this.tableVM}}]),t}(),bi=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onCheckedChange=function(t){var e=t.target.checked;i.state.Ischecked=e};var s=i.props.store;return i.state=s||He(!1),i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.ischecked,n=t.name,s=t.isDisable;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("label",{children:[Object(i.jsx)("input",{type:"checkbox",checked:e,onChange:this.onCheckedChange,disabled:s}),n]})})}}]),n}(s.Component),Mi=Object(l.a)(bi),yi=function(t){var e=new fi;e.DataSource=t.Items;var n=oi("T\xean thi\u1ebft l\u1eadp",["Name"],null,e),s=oi("Category",null,[ii(ti,(function(t,e){e.CategoryCheckboxVM;return Object(i.jsx)(Mi,{store:e.CategoryCheckboxVM})}))],e),r=oi("H\u1ea1ng m\u1ee5c ph\u1ee5",null,[ii(ti,(function(t,e){return Object(i.jsx)(Mi,{})}))],e);return e.Columns=[n,s,r,ci(e)],e.OnGetItemForAdd=function(){return new mi},e},ki=function(){return zs.Instance},ji=function(t){return function(t){var e=new nr;return e.Workpackage_Dict=t,t.OnGetWorkpackagesDone=function(t){e.WorkpackageVMs,e.GetItemsDone=!0},t.OnAdd=function(t){var n=Ae(t,e);e.Add(n)},e}(ki().Workpackage_Dict)},Oi=function(t){return function(t){var e=new Je;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items,e.GetItemsDone=!0},t.OnAdd=function(t){e.Add(en(t,e))},e}(ki().ElementFilterSetting_Dict)},Vi=function(t){return function(t){var e=new xn;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items},t.OnAdd=function(t){e.Add(Cn(t,e))},e}(ki().MassExportSetting_Dict)},Si=function(t){return function(t){var e=new Gn;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items},t.OnAdd=function(t){e.Add(Ri(t,e))},e}(ki().MassGroupSetting_Dict)},Di=function(t){return function(t){var e=new Kn;return e.ModelItem=t,t.OnGetItemsDone=function(t){e.Items,e.GetItemsDone=!0},e}(ki().Project_Dict)},Ci=function(t){return function(t){var e=new vi;return e.ModelItem=t,t.OnGetItemsDone_Funcs.push((function(t){e.Items})),e}(ki().WorkItemExportSetting_Dict)},wi=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"pmData",get:function(){return zs.Instance}},{key:"Workpackage_DictVM",get:function(){return this.workpackage_DictVM||(this.workpackage_DictVM=ji()),this.workpackage_DictVM}},{key:"ElementFilterSetting_DictVM",get:function(){return this.elementFilterSetting_DictVM||(this.elementFilterSetting_DictVM=Oi()),this.elementFilterSetting_DictVM}},{key:"MassExportSetting_DictVM",get:function(){return this.massExportSetting_DictVM||(this.massExportSetting_DictVM=Vi()),this.massExportSetting_DictVM}},{key:"MassGroupSetting_DictVM",get:function(){return this.massGroupSetting_DictVM||(this.massGroupSetting_DictVM=Si()),this.massGroupSetting_DictVM}},{key:"Project_DictVM",get:function(){return this.project_DictVM||(this.project_DictVM=Di()),this.project_DictVM}},{key:"MassResultCompVM",get:function(){return this.massResultCompVM||(this.massResultCompVM=Qn(ki().MassResultComp)),this.massResultCompVM},set:function(t){this.massResultCompVM=t,this.pmData.MassResultComp=t?t.ModelItem:t}},{key:"FilterValueTypes",get:function(){return this.filterValueTypes||(this.filterValueTypes=this.pmData.FilterValueTypes),this.filterValueTypes}},{key:"StringFilterTypes",get:function(){return this.stringFilterTypes||(this.stringFilterTypes=this.pmData.StringFilterTypes),this.stringFilterTypes}},{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=this.pmData.CategoryNames),this.categoryNames}},{key:"ValueRetrieveTypes",get:function(){return this.valueRetrieveTypes||(this.valueRetrieveTypes=this.pmData.ValueRetrieveTypes),this.valueRetrieveTypes}},{key:"ParameterNames",get:function(){return this.parameterNames||(this.parameterNames=this.pmData.ParameterNames),this.parameterNames}},{key:"MassPropertyNames",get:function(){return this.massPropertyNames||(this.massPropertyNames=this.pmData.MassPropertyNames),this.massPropertyNames}},{key:"MassTypes",get:function(){return this.massTypes||(this.massTypes=this.pmData.MassTypes),this.massTypes}},{key:"WorkItemExportSetting_Dict",get:function(){return this.workItemExportSetting_Dict||(this.workItemExportSetting_Dict=Ci()),this.workItemExportSetting_Dict}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),xi=function(){function t(){var e=this;Object(o.a)(this,t),this.Delete=function(){var t=e.Index;e.Fields.splice(t,1),e.Dict.FieldVMs.splice(t,1)},this.SetData=function(t){e.FieldSelectVM.InitialItem=t.Field}}return Object(c.a)(t,[{key:"Index",get:function(){return this.Dict.FieldVMs.indexOf(this)}},{key:"Fields",get:function(){return this.Dict.ModelItem.Fields}},{key:"Field",get:function(){return this.Fields[this.Index]},set:function(t){this.Fields[this.Index]=t}},{key:"FieldStorageList",get:function(){return Ti()}},{key:"FieldSelectVM",get:function(){var t=this;this.fieldSelectVM||((this.fieldSelectVM=Jt(this.FieldStorageList,this.Field)).OnSelectedItemChanged=function(e){return t.Field=e});return this.fieldSelectVM}}]),t}(),Fi=function(t,e){var n=new xi;return n.Dict=e,n},Ti=function(){return wi.Instance.MassPropertyNames},Gi=function(){function t(){var e=this;Object(o.a)(this,t),this.fieldVMs=void 0,this.AddNewFieldVM=function(){e.ModelItem.AddNewField();var t=Fi(0,e);return e.FieldVMs.push(t),t},this.SetData=function(t){e.FieldVMs=t.FieldVMs},Object(v.k)(this,{fieldVMs:v.l})}return Object(c.a)(t,[{key:"FieldVMs",get:function(){return this.fieldVMs||(this.fieldVMs=Ni(this)),this.fieldVMs},set:function(t){var e=this.fieldVMs,n=this.ModelItem.Fields,i=e.length,s=t.length;e.forEach((function(e,n){n>=s||e.SetData(t[n])}));var r=Math.abs(i-s);if(i>s)e.splice(s,r),n.splice(s,r);else if(i<s)for(var a=0;a<r;a++){var o=t[i+a].Field;n.push(o);var c=Fi(0,this);e.push(c)}}}]),t}(),Ni=function(t){return t.ModelItem.Fields.map((function(e){return Fi(0,t)}))},_i=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).OnInitialSetDataVM=function(t){},t}return n}(Qe),Ri=function(t,e){var n=new _i;return n.ModelItem=t,n.Dict=e,t.OnNameChanged=function(e){t.M2VM&&(n.Name=e)},t.OnDescriptionChanged=function(e){t.M2VM&&(n.Description=e)},t.OnDataChanged=function(e){t.M2VM&&(n.Data=e,n.DataVM=n.GetDataVM())},n.OnGetDataVM=function(){return function(t){var e=new Gi;return e.ModelItem=t,e}(t.Data)},n},Ei=function(){return zs.Instance},Li=function(){function t(){var e=this;Object(o.a)(this,t),this.IsValidTable=!1,this.columnField=P,this.Columns=void 0,this.FullRows=void 0,this.MainRows=void 0,this.Cells=void 0,this.Init=function(){e.Columns=[],e.MainRows=[],e.FullRows=[],e.Cells=[]},this.GetColumn=function(t){var n=e.Columns,i=void 0,s=n.findIndex((function(e){return e.Name===t}));return-1===s?(i=function(t,e){var n=new it;return n.Name=t,n.Dict=e,n}(t,e),n.push(i),i):n[s]},this.GetRow=function(t,n){var i=void 0,s=void 0,r=(i=n?n.SubItems:e.MainRows).findIndex((function(e){return e.Name===t}));return-1===r?((s=oe(t,e)).SupItem=n,i.push(s),e.FullRows.push(s),s):i[r]},this.GetCell=function(t,n){var i=e.Cells,s=void 0,r=i.findIndex((function(e){return e.Column===t&&e.Row===n}));return-1===r?(s=function(t,e,n){var i=new Me;return i.Column=t,i.Row=e,i.Dict=n,t.Cells.push(i),e.Cells.push(i),i}(t,n,e),i.push(s),s):i[r]},this.Build=function(){var t=e.ColumnField;t===W&&Ei().MassResultComp.Phases.forEach((function(n){e.GetColumn(Z(n,t))})),e.Items.forEach((function(n){switch(t){case W:n.ValidPhasesByInput.forEach((function(t){e.HandleItem(n,t)}));break;default:e.HandleItem(n,n.GetValue(t))}})),e.IsHaveAsyncData||e.UpdateData()},this.IsHaveAsyncData=!1,this.IsOnSaveMassGroup=!1,this.HandledItems=[],this.OnSetHandledRatio_Funcs=[],this.AddHandledItems=function(t){e.HandledItems.push(t),e.HandledRatio=e.HandledItems.length/e.Items.length,e.HandledItems.length===e.Items.length&&(e.UpdateData(),e.HandledItems=[])},this.UpdateData=function(){e.MainRows.forEach((function(t){return t.UpdateData()})),e.MainRows=fe(e.MainRows),e.Cells.forEach((function(t){return t.UpdateData()})),e.IsUpdateDataDone=!0},this.OnIsUpdateDataDone_Funcs=[],this.HandleItem=function(t,n,i,s){var r=e.GetColumn(Z(n,e.ColumnField)),a=s?[s]:[];i=i||e.MainMGC;e.HandleRowFieldIndex(t,r,a,i,0)},this.GetRow_Value_FieldIndex=function(t,n,i,s,r,a){var o=r.Items,c=o.length,u=o[a],h=0!==i.length?i[i.length-1]:void 0;u.SupRow=h;var l=u.Field;if(l){var d=Z(s,l),f=h?"".concat(h.FullValue,"__").concat(d):d;if(u.NotIncludeValues.includes(f))e.AddHandledItems(t);else{var p=function(t){return e.Handle_AddRow(f,t)},m=function(s){s.MassGroupItem=u,i.push(s);var o=u.SubComponents,h=o.findIndex((function(t){return yt(t.Filter,f)}));-1!==h&&((r=o[h]).IsHaveMassItem=!0,a=-1,c=r.Items.length,s.SubMassGroupComponent=r),e.GetCell(n,s).Items.push(t),a===c-1?e.AddHandledItems(t):e.HandleRowFieldIndex(t,n,i,r,a+1)},I=u.GetItem(f,d).NewMGI;I?(I.GetItem(f,d),e.Handle_ReplaceMGI(I,p,m)):m(p(h))}}else e.AddHandledItems(t)},this.Handle_AddRow=function(t,n){var i=e.GetRow(t,n);return i.FullValue=t,i},this.Handle_ReplaceMGI=function(t,e,n){var i=function(){var n=t.SupRow,i=e(n);return i.ReplaceMGI=t,i},s=void 0;t.IsFirstSetSupRow?(s=i(),n(s)):t.OnIsFirstSetSupRow_Funcs.push((function(){s=i(),n(s)}))},this.HandleRowFieldIndex=function(t,n,i,s,r){var a=s.Items[r].Field,o=t.GetValue(a,(function(a){return e.GetRow_Value_FieldIndex(t,n,i,a,s,r)}));Array.isArray(o)?e.IsHaveAsyncData=!0:e.GetRow_Value_FieldIndex(t,n,i,o,s,r)},this.SaveMassGroup=function(){e.IsOnSaveMassGroup=!0},this.massGroupName=void 0,this.MassGroupInputOK=function(){var t=Ei().MassGroupSetting_Dict.Items,n=t.findIndex((function(t){return t.Name===e.MassGroupName})),i=void 0;-1!==n&&(i=t[n]._id);var s={_id:i,name:e.MassGroupName,settingType:Fe,data:{massGroupComponent:e.MainMGC.ApiData}},r="https://api.bimdev.vn/api/hbs/mg",a=i?"edit":"add";(i?_("".concat(r,"/").concat(a),s):R("".concat(r,"/").concat(a),s)).then((function(t){return t.data})).then((function(t){var e=Ei().MassGroupSetting_Dict,n=Ee(t,e);e.Items.push(n);var i=wi.Instance.MassGroupSetting_DictVM,s=Ri(n,i);i.Items.push(s),w.b.success("".concat(a," massgroup successfully"))})),e.IsOnSaveMassGroup=!1,e.MassGroupNameVM.Content=De(e)},this.MassGroupInputCancel=function(){e.IsOnSaveMassGroup=!1,e.MassGroupNameVM.Content=De(e)},this.AddMainRow=function(){return be(void 0,e)},Object(v.k)(this,{IsValidTable:v.l,Columns:v.l,MainRows:v.l,Cells:v.l,columnField:v.l,IsOnSaveMassGroup:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,t&&0!==t.length?(this.Build(),this.IsValidTable=!0):this.IsValidTable=!1}},{key:"ColumnField",get:function(){return this.columnField},set:function(t){this.columnField=t}},{key:"MassGroupSetting",get:function(){return this.massGroupSetting},set:function(t){this.massGroupSetting=t,this.MainMGC=t?xt(t.Data.MassGroupComponent):t}},{key:"MainMGC",get:function(){return this.mainMGC||(this.mainMGC=function(t){var e=new Ct,n=Tt(J);return e.Items=[n],e}()),this.mainMGC},set:function(t){this.mainMGC=t,this.Init(),this.MainMGI=t?Ce(this):void 0}},{key:"MainMGI",get:function(){return this.mainMGI||(this.mainMGI=Ce(this)),this.mainMGI},set:function(t){this.mainMGI=t}},{key:"AllRows",get:function(){return function(t){var e=[];return t.MainRows.forEach((function(t){e.push.apply(e,t.AllItems)})),e}(this)}},{key:"HandledRatio",get:function(){return this.handledRatio},set:function(t){this.handledRatio=t,this.OnSetHandledRatio_Funcs.forEach((function(e){return e(t)}))}},{key:"IsUpdateDataDone",set:function(t){this.OnIsUpdateDataDone_Funcs.forEach((function(t){return t()}))}},{key:"MassGroupName",get:function(){return this.massGroupName||(this.massGroupName=De(this)),this.massGroupName},set:function(t){this.massGroupName=t}},{key:"MassGroupNameVM",get:function(){var t=this;this.massGroupNameVM||((this.massGroupNameVM=M(this.MassGroupName,"T\xean set kh\u1ed1i l\u01b0\u1ee3ng")).onSetContent=function(e){return t.MassGroupName=e});return this.massGroupNameVM}}]),t}(),Ai=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.MassTable.Items=t}},{key:"MassTable",get:function(){return this.massTable||(this.massTable=new Li),this.massTable}},{key:"MassGroupSetting",set:function(t){this.MassTable.MassGroupSetting=t}}]),t}(),Pi=function(){function t(){var e=this;Object(o.a)(this,t),this.IsGetElement=!1,this.OnGetElementDone_Funcs=[],this.GetValue=function(t,n){if(t){var i=function(t,e){switch(e){case P:case U:case B:case J:return{fields:[e],isFromElement:!1};case Q:case q:case z:case K:case X:case Y:if(t.MassType===A)return{fields:["Info",e],isFromElement:!1};var n=void 0;switch(e){case Q:case q:n="identify";break;case X:n="locate"}return{fields:["Element","info",n,e],isFromElement:!0}}}(e,t),s=i.fields;return!i.isFromElement||e.Element?function(){var t=e,n=!0;return s.forEach((function(e){if(n){var i=t[e];void 0===(t=i)&&(n=!1)}})),t}():void 0}},this.AddDatabase=function(t){var n=e.ApiData,i=n._id,s="https://api.bimdev.vn/api/hbm",r=i?"edit":"add";(i?_("".concat(s,"/").concat(r),n):R("".concat(s,"/").concat(r),n)).then((function(t){return t.data})).then((function(n){"add"===r&&(e._id=n._id),t&&t(n),w.b.success("".concat(r," mass successfully"))}))},this.DeleteDatabase=function(t){var n={_id:e._id};_("".concat("https://api.bimdev.vn/api/hbm","/delete"),n).then((function(t){return t.data})).then((function(e){t&&t(e),w.b.success("delete mass successfully")}))}}return Object(c.a)(t,[{key:"Project",get:function(){return this.project||(this.project=Ui(this)),this.project}},{key:"Workpackage",get:function(){return this.workpackage||(this.workpackage=Bi(this)),this.workpackage}},{key:"Phases",get:function(){return this.phases||(this.phases=Ki(this)),this.phases}},{key:"ValidPhasesByInput",get:function(){return zi(this)}},{key:"GetElementDone",set:function(t){this.OnGetElementDone_Funcs.forEach((function(t){return t()}))}},{key:"ApiData",get:function(){return{_id:this._id,projectId:this.projectId,elementId:this.elementId,workpackageId:this.workpackageId,exportSetId:this.exportSetId,exportSetVersionId:this.exportSetVersionId,value:this.Value,unit:this.Unit,massType:this.MassType,info:this.Info}}}]),t}(),Wi=function(){return zs.Instance},Hi=function(t){var e=new Pi;return e._id=t._id,e.Value=t.value,e.Unit=t.unit,e.MassType=t.massType,e.Info=t.info,e.projectId=t.projectId,e.workpackageId=t.workpackageId,e.exportSetId=t.exportSetId,e.exportSetVersionId=t.exportSetVersionId,e.Element=0!==t.Elements.length?t.Elements[0]:void 0,e},Ui=function(t){var e=Wi().Project_Dict.Items,n=t.projectId,i=e.findIndex((function(t){return t._id===n}));return-1!==i?e[i]:void 0},Bi=function(t){var e=Wi().Workpackage_Dict.Workpackages,n=t.workpackageId,i=e.findIndex((function(t){return t._id===n}));return-1!==i?e[i]:void 0},Ki=function(t){var e=[],n=Wi().Phase_Dict.Items,i=t.exportSetVersionId;return n.forEach((function(t){t.exportSetVersionIds.includes(i)&&e.push(t)})),e},zi=function(t){var e=Wi().MassResultComp.Phases,n=t.Phases,i=[];return n.forEach((function(t){e.includes(t)&&i.push(t)})),i},qi=function(t,e){var n="https://api.bimdev.vn/api/hbdv/massdetail?id=".concat(t);N(n).then((function(t){return t.data})).then((function(t){var n,i=t.viewDetail,s=t.masses,r=(n=i.massType)===E||n===L,a=s.map((function(t){return Hi(t,r)}));e&&e(a)}))},Ji=function(){function t(){var e=this;Object(o.a)(this,t),this.Projects=[],this.Phases=[],this.OnGetItemsDone_Funcs=[],this.isHavePhase=!1,this.GetMassData=function(){var t=zs.Instance.Workpackage_Dict;t.IsDataChanged&&t.RefreshData(),function(t,e){var n=window.performance.now();R("https://api.bimdev.vn/api/hbmr/newlist",t,void 0,2e6).then((function(t){return t.data})).then((function(t){var i=window.performance.now();if(console.log("Execution time: ".concat((i-n)/1e3," s")),t){var s=t.map((function(t){return Hi(t)}));e&&e(s)}else console.log("mass result undefined")}))}(e.ApiData,(function(t){var n=e.MassItem_Dict;n.MassGroupSetting=e.MassGroupSetting?e.MassGroupSetting:void 0,n.Items=t,e.GetItemsDone=!0}))}}return Object(c.a)(t,[{key:"ApiData",get:function(){return{projectIds:(t=this).Projects.map((function(t){return t._id})),phaseIds:t.IsHavePhase?t.Phases.map((function(t){return t._id})):void 0};var t}},{key:"MassItem_Dict",get:function(){return this.massItem_Dict||(this.massItem_Dict=new Ai),this.massItem_Dict}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"IsHavePhase",get:function(){return this.isHavePhase},set:function(t){this.isHavePhase=t,this.MassItem_Dict.MassTable.ColumnField=t?W:P}}]),t}(),Qi=function(t){var e=new Yi;return e.Project=t,function(t,e){if(t){var n="https://api.bimdev.vn/api/hbmr/rebar?projectId=".concat(t);N(n).then((function(t){return t.data})).then((function(t){var n=void 0;n=t?t.map((function(t){return Hi(t)})):[],e&&e(n)}))}}(e.projectId,(function(t){e.Items=t})),e},Xi=function(t){var e=new fi;return e.DataSource=t.Items,e.Columns=[oi("T\xean c\u1ea5u ki\u1ec7n",["Info","elementName"],[ii(ti,(function(t,e){return e.Info.elementName}))],e),oi("H\u1ea1ng m\u1ee5c",["Info","workItem"],[ii(ti,(function(t,e){return e.Info.workItem}))],e),oi("\u0110\u01b0\u1eddng k\xednh",["Info","diameter"],[ii(ti,(function(t,e){return e.Info.diameter}))],e),oi("Kh\u1ed1i l\u01b0\u1ee3ng",["Value"],null,e),ci(e)],e.OnGetItemForAdd=function(){return function(t){var e=new Pi;e.Unit="kg",e.MassType=A,e.Info={},e.projectId=t._id;var n=function(t){e.exportSetId=t._id;var n=t.CurrentVersion;n?e.exportSetVersionId=n._id:t.OnGetCurrentVersionDone_Func.push((function(){n=t.CurrentVersion,e.exportSetVersionId=n._id}))},i=t.InputExportSet;return i?n(i):t.OnGetInputExportSetDone_Funcs.push((function(){i=t.InputExportSet,n(i)})),e}(t.Project)},e.OnEditItem=function(t){t.AddDatabase()},e.OnDeleteItem=function(t){t.DeleteDatabase()},e},Yi=function(){function t(){Object(o.a)(this,t),this.items=[]}return Object(c.a)(t,[{key:"Project",get:function(){return this.project},set:function(t){this.project=t,this.projectId=t._id}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.TableVM.DataSource=t}},{key:"TableVM",get:function(){return this.tableVM||(this.tableVM=Xi(this)),this.tableVM}}]),t}(),Zi=function(){function t(){Object(o.a)(this,t),this.OnGetExportSetVersions_Func=[]}return Object(c.a)(t,[{key:"ExportSetVersions",get:function(){return this.exportSetVersions},set:function(t){this.exportSetVersions=t,this.exportSetVersionIds=t.map((function(t){return t._id}))}},{key:"GetExportSetVersions",set:function(t){this.OnGetExportSetVersions_Func.forEach((function(t){return t()}))}}]),t}(),$i=function(t,e){if(t){var n=new Zi;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.Dict=e,ts(t._id,(function(t){n.ExportSetVersions=t,n.GetExportSetVersions=!0})),n}},ts=function(t,e){var n="https://api.bimdev.vn/api/hbesv/byphase?phaseId=".concat(t);N(n).then((function(t){return t.data})).then((function(t){e&&e(t)}))},es=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.Add=function(t){e.Items.push(t),e.OnAdd&&e.OnAdd(t)},this.AddMassVersion=function(){var t=e.Input.ApiData;_("".concat("https://api.bimdev.vn/api/hbphase","/mass/add"),t).then((function(t){return t.data})).then((function(t){var n=$i(t,e);e.Add(n),w.b.success("create version successfully!")}));var n=function(t){return t.AddVersion()},i=e.Project,s=i.InputExportSet;s?n(s):i.OnGetInputExportSetDone_Funcs.push((function(){s=i.InputExportSet,n(s)}))}}return Object(c.a)(t,[{key:"Project",get:function(){return this.Dict}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"Input",get:function(){return this.input||(this.input=ss(this)),this.input}}]),t}(),ns=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"ApiData",get:function(){return{projectId:this.Dict.Dict._id,name:this.Name,description:this.Description}}}]),t}(),is=function(t){var e=new es;return e.Dict=t,function(t,e){var n="https://api.bimdev.vn/api/hbphase/list?projectId=".concat(t);N(n).then((function(t){return t.data})).then((function(t){e&&e(t)}))}(t._id,(function(t){e.Items=t.map((function(t){return $i(t,e)})),e.GetItemsDone=!0})),e},ss=function(t){return function(t){var e=new ns;return e.Dict=t,e.Name="Version 1",e.Description="m\xf4 t\u1ea3 phi\xean b\u1ea3n",e}(t)},rs=function(){function t(){Object(o.a)(this,t),this.OnGetInputExportSetDone_Funcs=[]}return Object(c.a)(t,[{key:"Phase_Dict",get:function(){return this.phase_Dict||(this.phase_Dict=is(this)),this.phase_Dict}},{key:"RebarMass_Dict",get:function(){return this.rebarMass_Dict||(this.rebarMass_Dict=fs(this)),this.rebarMass_Dict}},{key:"InputExportSet",get:function(){return this.inputExportSet||ps(this),this.inputExportSet},set:function(t){this.inputExportSet=t,this.GetInputExportSetDone=!0}},{key:"GetInputExportSetDone",get:function(){return this.getInputExportSetDone},set:function(t){this.getInputExportSetDone=t,this.OnGetInputExportSetDone_Funcs.forEach((function(t){return t()}))}}]),t}(),as=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetCurrentVersionDone_Func=[],this.AddVersion=function(){ls(e)}}return Object(c.a)(t,[{key:"CurrentVersion",get:function(){return this.currentVersion||hs(this),this.currentVersion},set:function(t){this.currentVersion=t,this.GetCurrentVersionDone=t}},{key:"GetCurrentVersionDone",set:function(t){this.OnGetCurrentVersionDone_Func.forEach((function(t){return t()}))}}]),t}(),os=function t(){Object(o.a)(this,t)},cs=function(t){var e=new os;return e._id=t._id,e},us=function(t){var e=new as;return e._id=t._id,e.Name=t.name,e.Description=t.description,e.RetrieveFrom=t.retrieveFrom,e},hs=function(t){!function(t,e){if(t){var n="https://api.bimdev.vn/api/hbesv/last?exportSetId=".concat(t);N(n).then((function(t){return t.data})).then((function(t){var n=t?cs(t):t;e(n)}))}}(t._id,(function(e){e?t.CurrentVersion=e:ls(t)}))},ls=function(t){!function(t,e){R("https://api.bimdev.vn/api/hbesv/add",t).then((function(t){return t.data})).then((function(t){var n=cs(t);e(n)}))}({exportSetId:t._id},(function(e){t.CurrentVersion=e}))},ds=function(t,e){if(t){var n=new rs;return n._id=t._id,n.Name=t.name,n.Code=t.code,n.Dict=e,n}},fs=function(t){return Qi(t)},ps=function(t){var e=t._id;!function(t,e){if(t){var n="https://api.bimdev.vn/api/hbes/input?projectId=".concat(t);N(n).then((function(t){return t.data})).then((function(t){var n=t?us(t):t;e(n)}))}}(e,(function(n){n?t.InputExportSet=n:function(t,e){R("https://api.bimdev.vn/api/hbes/add",t).then((function(t){return t.data})).then((function(t){var n=us(t);e(n)}))}({projectId:e,name:"D\u1eef li\u1ec7u kh\u1ed1i l\u01b0\u1ee3ng input",description:"m\xf4 t\u1ea3 d\u1eef li\u1ec7u",retrieveFrom:"input"},(function(e){t.InputExportSet=e}))}))},ms=function(){function t(){var e,n,i=this;Object(o.a)(this,t),e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},N("https://api.bimdev.vn/api/hbp/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return ds(t,e)}));n&&n(i)}))}return Object(c.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}}]),t}(),Is=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Te),gs=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"ApiData",get:function(){return vs(this)}}]),t}(),vs=function(t){return{categoryFilter:t.CategoryFilter.ApiData,familyFilter:t.IsHaveFamilyFilter?t.FamilyFilter.ApiData:void 0}},bs=function(t,e){var n=new Is;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=function(t){var e=new gs;return e.CategoryFilter=bt(t.categoryFilter),e}(t.data),n.Dict=e,n},Ms=function(){function t(){var e=this;Object(o.a)(this,t),this.GetData=function(){if(e.OnGetData)return e.OnGetData()},this.isNew=!0,this.AddDatabase=function(){var t=e.EditItemId,n=e.Name,i=e.Description,s=e.SettingType,r=e.Data.ApiData,a=e.UrlPrefix,o={_id:t,name:n,description:i,settingType:s,data:r},c="https://api.bimdev.vn/api/hbs/".concat(a);(t?_("".concat(c,"/edit"),o):R("".concat(c,"/add"),o)).then((function(t){return t.data})).then((function(t){e.AddDatabaseDone=!0,e.NewItem=e.GetEditItem(t,e.Dict),e.Dict.Update()}))}}return Object(c.a)(t,[{key:"Data",get:function(){return this.data||(this.data=this.GetData()),this.data},set:function(t){this.data=t}},{key:"EditItem",get:function(){return this.editItem},set:function(t){this.editItem=t,this.EditItemId=t?t._id:void 0}},{key:"IsNew",get:function(){return this.isNew},set:function(t){this.isNew=t,t&&(this.EditItem=void 0)}},{key:"UrlPrefix",get:function(){return this.urlPrefix||(this.urlPrefix=function(t){var e=void 0;switch(t.SettingType){case we:e="ef";break;case xe:e="me";break;case Fe:e="mg"}return e}(this)),this.urlPrefix}},{key:"AddDatabaseDone",set:function(t){this.OnAddDatabaseDone&&this.OnAddDatabaseDone(t)}}]),t}(),ys=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).GetEditItem=function(t,e){return bs(t,e)},t}return n}(Ms),ks=function(t){var e=new ys;return e.Dict=t,e.Name="B\u1ed9 l\u1ecdc c\u1ed9t",e.Description="m\xf4 t\u1ea3 b\u1ed9 l\u1ecdc",e.SettingType=we,e.OnGetData=function(){return function(){var t=new gs,e=new kt;e.CategoryType=ot,e.ValueType=ht,e.StringFilterType=dt,e.Values=["Floors"],t.CategoryFilter=e,t.IsHaveFamilyFilter=!1;var n=new kt;return n.CategoryType=ct,n.ValueType=ht,n.StringFilterType=dt,n.Values=[],t.FamilyFilter=n,t}()},e},js=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},this.Update=function(){var t=i.Input;if(t.IsNew)i.Add(t.NewItem);else{var e=t.EditItem;et(e,(function(){e.Name=t.Name,e.Description=t.Description,e.Data=t.Data}))}},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},N("https://api.bimdev.vn/api/hbs/ef/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return bs(t,e)}));n&&n(i)}))}return Object(c.a)(t,[{key:"GetInput",value:function(){return ks(this)}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Input",get:function(){return this.input||(this.input=this.GetInput()),this.input}}]),t}(),Os=function(){function t(){var e=this;Object(o.a)(this,t),this.AddNewValueSetting=function(){var t=e.ValueSettings,n=vn(e);return t.push(n),n}}return Object(c.a)(t,[{key:"ElementFilter",get:function(){return this.elementFilter||(this.elementFilter=Ss(this)),this.elementFilter},set:function(t){this.elementFilter=t,this.elementFilterId=t?t._id:void 0}},{key:"ValueSettings",get:function(){return this.valueSettings||(this.valueSettings=Ds(this)),this.valueSettings},set:function(t){this.valueSettings=t}},{key:"ApiData",get:function(){return Cs(this)}}]),t}(),Vs=function(t){var e=new Os;return e.elementFilterId=t.elementFilterId,e.ValueSettings=t.exportSettings.map((function(t){return function(t,e){var n=new mn;return n.RetrieveType=t.retrieveType,n.MassType=t.massType,n.ValueFilter=bt(t.valueFilter,ut),n.workpackageId=t.workpackageId,n.Dict=e,n}(t,e)})),e},Ss=function(t){var e=t.elementFilterId;if(e){var n=zs.Instance.ElementFilterSetting_Dict.Items;if(n){var i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0}}},Ds=function(t){return[vn(t)]},Cs=function(t){return{elementFilterId:t.elementFilterId,exportSettings:t.ValueSettings.map((function(t){return t.ApiData}))}},ws=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return n}(Te),xs=function(t,e){var n=new ws;return n._id=t._id,n.Name=t.name,n.Description=t.description,n.SettingType=t.settingType,n.Data=Vs(t.data),n.Dict=e,n},Fs=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){var t;Object(o.a)(this,n);for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(t=e.call.apply(e,[this].concat(s))).GetEditItem=function(t,e){return xs(t,e)},t}return n}(Ms),Ts=function(t){var e=new Fs;return e.Dict=t,e.Name="B\xeat\xf4ng s\xe0n",e.Description="m\xf4 t\u1ea3 thi\u1ebft l\u1eadp",e.SettingType=xe,e.OnGetData=function(){return new Os},e},Gs=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},this.Update=function(){var t=i.Input;if(t.IsNew)i.Add(t.NewItem);else{var e=t.EditItem;et(e,(function(){e.Name=t.Name,e.Description=t.Description,e.Data=t.Data}))}},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},N("https://api.bimdev.vn/api/hbs/me/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return xs(t,e)}));n&&n(i)}))}return Object(c.a)(t,[{key:"GetInput",value:function(){return Ts(this)}},{key:"GetItemsDone",set:function(t){this.OnGetItemsDone&&this.OnGetItemsDone(t)}},{key:"Input",get:function(){return this.input||(this.input=this.GetInput()),this.input}}]),t}(),Ns=function(){function t(){var e,n,i=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.Add=function(t){i.Items.push(t),i.OnAdd&&i.OnAdd(t)},e=this,n=function(t){i.Items=t,i.GetItemsDone=!0},N("https://api.bimdev.vn/api/hbs/mg/list").then((function(t){return t.data})).then((function(t){var i=t.map((function(t){return Ee(t,e)}));n&&n(i)}))}return Object(c.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}}]),t}(),_s=function t(){Object(o.a)(this,t)},Rs=function(){function t(){Object(o.a)(this,t)}return Object(c.a)(t,[{key:"Items",get:function(){return this.items||(this.items=function(t){var e=[],n=new _s;n.Color="#1956c9";var i=new kt;return i.ValueType=lt,i.NumberFilterType=It,i.Values=[.8],n.Filter=i,e.push(n),(n=new _s).Color="#3f79d6",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualLeft=!0,i.Values=[.8,.85],n.Filter=i,e.push(n),(n=new _s).Color="#6f9fe9",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualLeft=!0,i.Values=[.85,.9],n.Filter=i,e.push(n),(n=new _s).Color="#a5c2f2",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualLeft=!0,i.Values=[.9,.95],n.Filter=i,e.push(n),(n=new _s).Color="#c9d9f6",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualLeft=!0,i.Values=[.95,1],n.Filter=i,e.push(n),(n=new _s).Color="#f3cccc",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualRight=!0,i.Values=[1,1.05],n.Filter=i,e.push(n),(n=new _s).Color="#e9999a",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualRight=!0,i.Values=[1.05,1.1],n.Filter=i,e.push(n),(n=new _s).Color="#de6568",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualRight=!0,i.Values=[1.1,1.15],n.Filter=i,e.push(n),(n=new _s).Color="#c90010",(i=new kt).ValueType=lt,i.NumberFilterType=vt,i.IsEqualRight=!0,i.Values=[1.15,1.2],n.Filter=i,e.push(n),(n=new _s).Color="#980009",(i=new kt).ValueType=lt,i.NumberFilterType=gt,i.Values=[1.2],n.Filter=i,e.push(n),e}()),this.items}}]),t}(),Es=function(){function t(){Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[]}return Object(c.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}}]),t}(),Ls=function(){function t(){var e=this;Object(o.a)(this,t),this.Description="m\xf4 t\u1ea3 c\xf4ng t\xe1c",this.isNew=!0,this.AddDatabase=function(){var t=e.WorkpackageId,n=e.Code,i=e.Name,s=e.Description,r=e.SupId,a={_id:t,name:i,code:n,description:s,supId:r},o="https://api.bimdev.vn/api/hbwp";(t?_("".concat(o,"/edit"),a):R("".concat(o,"/add"),a)).then((function(t){return t.data})).then((function(t){e.AddDatabaseDone=!0,e.NewWorkpackage=Qs(t,e.Dict),e.Dict.Update()}))}}return Object(c.a)(t,[{key:"IsNew",get:function(){return this.isNew},set:function(t){this.isNew=t,t&&(this.Workpackage=void 0)}},{key:"Workpackage",get:function(){return this.workpackage},set:function(t){this.workpackage=t,this.WorkpackageId=t?t._id:void 0}},{key:"SupItem",get:function(){return this.supItem},set:function(t){this.supItem=t,this.SupId=t?t._id:void 0}},{key:"AddDatabaseDone",set:function(t){this.OnAddDatabaseDone&&this.OnAddDatabaseDone(t)}}]),t}(),As=function(){function t(){var e=this;Object(o.a)(this,t),this.Add=function(t){e.Workpackages.push(t),e.OnAdd&&e.OnAdd(t)},this.Update=function(){var t=e.WorkpackageInput,n=t.Workpackage;if(t.IsNew)e.Add(t.NewWorkpackage);else{et(n,(function(){n.Code=t.Code,n.Name=t.Name,n.Description=t.Description,n.FullName=n.GetFullName()}))}e.IsDataChanged=!0},this.RefreshData=function(){e.Workpackages.forEach((function(t){t.SubItems=void 0,t.UpperList=void 0,t.LowerList=void 0,t.Rank=void 0})),e.IsDataChanged=!1},er(this,(function(t){e.Workpackages=t,e.GetWorkpackagesDone=!0}))}return Object(c.a)(t,[{key:"GetWorkpackagesDone",set:function(t){this.OnGetWorkpackagesDone&&this.OnGetWorkpackagesDone(t)}},{key:"WorkpackageInput",get:function(){this.workpackageInput||((this.workpackageInput=new Ls).Dict=this);return this.workpackageInput}}]),t}(),Ps=function(t){return[ht,lt]},Ws=function(t){return[dt,ft,pt]},Hs=function(t){return[In,"bymaterial","byrebar"]},Us=function(t){return["Discipline",Ne]},Bs=function(t){return[J,Q,X,Y]},Ks=function(t){return[E,L,A]},zs=function(){function t(){Object(o.a)(this,t),this.DebugPoints=[]}return Object(c.a)(t,[{key:"categoryData",get:function(){return at.Instance}},{key:"Workpackage_Dict",get:function(){return this.workpackage_Dict||(this.workpackage_Dict=new As),this.workpackage_Dict}},{key:"ElementFilterSetting_Dict",get:function(){return this.elementFilterSetting_Dict||(this.elementFilterSetting_Dict=new js),this.elementFilterSetting_Dict}},{key:"MassExportSetting_Dict",get:function(){return this.massExportSetting_Dict||(this.massExportSetting_Dict=new Gs),this.massExportSetting_Dict}},{key:"MassGroupSetting_Dict",get:function(){return this.massGroupSetting_Dict||(this.massGroupSetting_Dict=new Ns),this.massGroupSetting_Dict}},{key:"Project_Dict",get:function(){return this.project_Dict||(this.project_Dict=new ms),this.project_Dict}},{key:"MassResultComp",get:function(){return this.massResultComp||(this.massResultComp=new Ji),this.massResultComp},set:function(t){this.massResultComp=t}},{key:"FilterValueTypes",get:function(){return this.filterValueTypes||(this.filterValueTypes=Ps()),this.filterValueTypes}},{key:"StringFilterTypes",get:function(){return this.stringFilterTypes||(this.stringFilterTypes=Ws()),this.stringFilterTypes}},{key:"ValueRetrieveTypes",get:function(){return this.valueRetrieveTypes||(this.valueRetrieveTypes=Hs()),this.valueRetrieveTypes}},{key:"CategoryNames",get:function(){return this.categoryNames||(this.categoryNames=this.categoryData.CategoryNames),this.categoryNames}},{key:"ParameterNames",get:function(){return this.parameterNames||(this.parameterNames=["Volume","HB_Formwork_Total"]),this.parameterNames}},{key:"MassPropertyNames",get:function(){return this.massPropertyNames||(this.massPropertyNames=Us()),this.massPropertyNames}},{key:"MassItemFields",get:function(){return this.massItemFields||(this.massItemFields=Bs()),this.massItemFields}},{key:"MassTypes",get:function(){return this.massTypes||(this.massTypes=Ks()),this.massTypes}},{key:"VersionCompareSetting",get:function(){return this.versionCompareSetting||(this.versionCompareSetting=new Rs),this.versionCompareSetting}},{key:"WorkItemExportSetting_Dict",get:function(){return this.workItemExportSetting_Dict||(this.workItemExportSetting_Dict=new Es),this.workItemExportSetting_Dict}}],[{key:"Instance",get:function(){return this.instance||(this.instance=new t),this.instance}}]),t}(),qs=function(){function t(){var e=this;Object(o.a)(this,t),this.GetFullName=function(){return"".concat(e.Code," - ").concat(e.Name)},this.Delete=function(){var t=e._id;_("https://api.bimdev.vn/api/hbwp/delete",{_id:t}).then((function(t){return t.data})).then((function(t){return w.b.success("Delete workpackage successfully")}));var n=e.Dict;n.Workpackages.splice(e.Index,1),e.OnDelete&&e.OnDelete(),n.IsDataChanged=!0}}return Object(c.a)(t,[{key:"Index",get:function(){return this.Dict.Workpackages.indexOf(this)}},{key:"SupItem",get:function(){return this.supItem||(this.supItem=Xs(this)),this.supItem}},{key:"Code",get:function(){return this.code},set:function(t){this.code=t,this.OnCodeChanged&&this.OnCodeChanged(t)}},{key:"Name",get:function(){return this.name},set:function(t){this.name=t,this.OnNameChanged&&this.OnNameChanged(t)}},{key:"Description",get:function(){return this.description},set:function(t){this.description=t,this.OnDescriptionChanged&&this.OnDescriptionChanged(t)}},{key:"FullName",get:function(){return this.fullName||(this.fullName=this.GetFullName()),this.fullName},set:function(t){this.fullName=t,this.OnFullNameChanged&&this.OnFullNameChanged(t)}},{key:"SubItems",get:function(){return this.subItems||(this.subItems=Ys(this)),this.subItems},set:function(t){this.subItems=t}},{key:"UpperList",get:function(){return this.upperList||(this.upperList=Zs(this)),this.upperList},set:function(t){this.upperList=t}},{key:"LowerList",get:function(){return this.lowerList||(this.lowerList=$s(this)),this.lowerList},set:function(t){this.lowerList=t}},{key:"Rank",get:function(){return this.rank||(this.rank=tr(this)),this.rank},set:function(t){this.rank=t}},{key:"LowerIds",get:function(){return this.LowerList.map((function(t){return t._id}))}}]),t}(),Js=function(){return zs.Instance},Qs=function(t,e){var n=t._id,i=t.name,s=t.code,r=t.description,a=t.supId,o=new qs;return o._id=n,o.Name=i,o.Code=s,o.Description=r,o.SupId=a,o.Dict=e,o},Xs=function(t){var e=t.SupId,n=Js().Workpackage_Dict.Workpackages,i=n.findIndex((function(t){return t._id===e}));return-1!==i?n[i]:void 0},Ys=function(t){var e=t._id;return Js().Workpackage_Dict.Workpackages.filter((function(n){return n!==t&&n.SupId===e}))},Zs=function(t){var e=t.SupItem;if(e){var n=Object(j.a)(e.UpperList);return n.push(t),n}return[t]},$s=function(t){var e=[t];return t.SubItems.forEach((function(t,n){e.push.apply(e,t.LowerList)})),e},tr=function(t){var e=t.SupItem;return e?e.Rank+1:0},er=function(t,e){N("https://api.bimdev.vn/api/hbwp/list").then((function(t){return t.data})).then((function(n){var i=n.map((function(e){return Qs(e,t)}));e&&e(i)}))},nr=function(){function t(){var e=this;Object(o.a)(this,t),this.OnGetItemsDone_Funcs=[],this.workpackageVMs=void 0,this.Add=function(t){e.WorkpackageVMs.push(t),e.OnAdd&&e.OnAdd(t)},Object(v.k)(this,{workpackageVMs:v.l})}return Object(c.a)(t,[{key:"GetItemsDone",set:function(t){this.OnGetItemsDone_Funcs.forEach((function(t){return t()}))}},{key:"M2VM",get:function(){return this.Workpackage_Dict.M2VM},set:function(t){this.Workpackage_Dict.M2VM=t}},{key:"WorkpackageVMs",get:function(){return this.workpackageVMs||(this.workpackageVMs=function(t){var e=t.Workpackage_Dict.Workpackages;if(e)return e.map((function(e){return Ae(e,t)}))}(this)),this.workpackageVMs}},{key:"CurrentWorkpackageVM",set:function(t){this.Workpackage_Dict=t,this.Workpackage_Dict.CurrentWorkpackage=t.Workpackage,this.WorkpackageInputVM.WorkpackageVM=t}},{key:"WorkpackageInputVM",get:function(){return this.workpackageInputVM||(this.workpackageInputVM=qe(this)),this.workpackageInputVM}}]),t}(),ir=p.a.Option,sr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){var e=i.state,n=e.WorkpackageVMs;e.CurrentWorkpackageVM=n[t]};var s=i.props.store;return i.state=s||new nr,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.WorkpackageVMs,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(ir,{value:e,children:n},e)})):"",s=t.WorkpackageInputVM,r=s.CommandVM;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"C\xf4ng t\xe1c"})}),Object(i.jsx)(p.a,{showSearch:!0,style:{width:"100%"},placeholder:"search c\xf4ng t\xe1c",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(k,{store:s.CodeVM}),Object(i.jsx)(k,{store:s.NameVM}),Object(i.jsx)(k,{store:s.DescriptionVM}),Object(i.jsx)(ne,{store:s.SupItemSelectVM}),Object(i.jsxs)("div",{children:[Object(i.jsx)(Mi,{store:s.IsNewVM}),Object(i.jsx)(I.a,{style:{margin:10},onClick:s.AddDatabase,children:r.Content}),s.DeleteView]})]})]})}}]),n}(s.Component),rr=Object(l.a)(sr),ar=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).test=function(){console.log("test button")},i.onValueChange=function(t){var e=i.state,n=e.ItemVMs;e.CurrentItemVM=n[t]};var s=i.props.store;return i.state=s||new Ye,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{children:Object(i.jsx)(ne,{store:t.ValueTypeSelectVM})}),Object(i.jsx)("div",{children:Object(i.jsx)(ne,{store:t.StringFilterTypeSelectVM})}),Object(i.jsx)("div",{children:Object(i.jsx)(Ht,{store:t.ValuesSelectVM})})]})}}]),n}(s.Component)),or=Object(l.a)(ar),cr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new $e,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.IsHaveFamilyFilter;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:"Thi\u1ebft l\u1eadp l\u1ecdc Category"}),Object(i.jsx)(or,{store:t.CategoryFilterVM}),Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)(Mi,{store:t.IsHaveFamilyFilterVM})}),e?Object(i.jsx)(or,{store:t.FamilyFilterVM}):""]})}}]),n}(s.Component)),ur=Object(l.a)(cr),hr=p.a.Option,lr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).test=function(){console.log("test button")},i.onValueChange=function(t){var e=i.state,n=e.Items;e.CurrentItem=n[t]};var s=i.props.store;return i.state=s||new Je,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Items,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(hr,{value:e,children:n},e)})):"",s=t.Input;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"B\u1ed9 l\u1ecdc \u0111\u1ed1i t\u01b0\u1ee3ng"})}),Object(i.jsx)(p.a,{showSearch:!0,style:{width:"100%"},placeholder:"search b\u1ed9 l\u1ecdc",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(k,{store:s.NameVM}),Object(i.jsx)(k,{store:s.DescriptionVM}),Object(i.jsx)(ur,{store:s.DataVM}),Object(i.jsx)(Mi,{store:s.IsNewVM}),Object(i.jsx)(I.a,{style:{margin:10},onClick:s.AddDatabase,children:s.CommandVM.Content}),s.DeleteView]})]})}}]),n}(s.Component),dr=Object(l.a)(lr),fr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new cn,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=Yt("top right");return e.wrapper=Object(i.jsx)(I.a,{size:"small",type:"primary",onClick:t.Delete,children:"x"}),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{style:{padding:"10px 35px 10px 10px",margin:"8px auto",border:"solid 0.5px",borderRadius:"10px",position:"relative"},children:[Object(i.jsx)($t,{store:e}),Object(i.jsx)(ne,{store:t.RetrieveTypeSelectVM}),Object(i.jsx)(ne,{store:t.MassTypeSelectVM}),Object(i.jsx)(or,{store:t.ValueFilterVM}),Object(i.jsx)(ne,{store:t.WorkpackageSelectVM})]})})}}]),n}(s.Component)),pr=Object(l.a)(fr),mr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new yn,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.ValueSettingVMs.map((function(t,e){return Object(i.jsx)(pr,{store:t},e)}));return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(ne,{store:t.ElementFilterSelectVM}),Object(i.jsxs)(m.a,{orientation:"left",plain:!0,children:["Thi\u1ebft l\u1eadp gi\xe1 tr\u1ecb",Object(i.jsx)(I.a,{type:"primary",size:"small",onClick:t.AddNewValueSettingVM,style:{marginLeft:15},children:"+"})]}),e]})}}]),n}(s.Component)),Ir=Object(l.a)(mr),gr=p.a.Option,vr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){var e=i.state,n=e.Items;e.CurrentItem=n[t]};var s=i.props.store;return i.state=s||new xn,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Items,n=e?e.map((function(t,e){var n=t.SearchName;return Object(i.jsx)(gr,{value:e,children:n},e)})):"",s=t.Input;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp xu\u1ea5t kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(i.jsx)(p.a,{showSearch:!0,style:{width:"100%"},placeholder:"search thi\u1ebft l\u1eadp",optionFilterProp:"children",onChange:this.onValueChange,value:null,filterOption:function(t,e){return e.children.toLowerCase().indexOf(t.toLowerCase())>=0},children:n}),Object(i.jsxs)("div",{style:{marginTop:20},children:[Object(i.jsx)(k,{store:s.NameVM}),Object(i.jsx)(k,{store:s.DescriptionVM}),Object(i.jsx)(Ir,{store:s.DataVM}),Object(i.jsxs)("div",{children:[Object(i.jsx)(Mi,{store:s.IsNewVM}),Object(i.jsx)(I.a,{style:{margin:10},onClick:s.AddDatabase,children:s.CommandVM.Content}),s.DeleteView]})]})]})}}]),n}(s.Component),br=Object(l.a)(vr),Mr=n(277),yr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Me,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("td",{className:"text-right",style:t.TDStyle,children:Object(i.jsx)("a",{style:t.AStyle,onClick:t.ShowDetail,children:Object(i.jsx)(rt,{store:t.ContentVM})})})})}}]),n}(s.Component)),kr=Object(l.a)(yr),jr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new ae,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Dict,s=e.Columns,r=t.IsShowSub?t.SubItems.map((function(t,e){return Object(i.jsx)(n,{store:t},t.id)})):"",a=t.IsHaveSub?Object(i.jsx)(I.a,{size:"small",style:{marginRight:5,minWidth:25},type:"primary",onClick:t.ToggleSub,children:Object(i.jsx)(rt,{store:t.ToggleButtonContentVM})}):Object(i.jsx)("div",{style:{padding:"0 15.5px"}});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"row",children:Object(i.jsxs)("div",{style:t.Style,children:[a,t.Title,t.HoverToolElement,t.ModalElement]})}),s.map((function(n,s){var r=e.GetCell(n,t);return Object(i.jsx)(kr,{store:r},r.id)}))]}),r]})}}]),n}(s.Component)),Or=Object(l.a)(jr),Vr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Li,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Columns,n=t.MainRows,s=e?e.map((function(t,e){return Object(i.jsx)("th",{scope:"col",className:"text-center",children:t.Name},t.id)})):"",r=n?n.map((function(t,e){return Object(i.jsx)(Or,{store:t},t.id)})):"";return Object(i.jsx)(i.Fragment,{children:t.IsValidTable?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h4",{className:"text-center",children:["B\u1ea2NG T\u1ed4NG H\u1ee2P KH\u1ed0I L\u01af\u1ee2NG",Object(i.jsx)(I.a,{type:"primary",size:"small",style:{marginLeft:15},disabled:t.IsOnSaveMassGroup,onClick:t.SaveMassGroup,children:"s"})]}),t.IsOnSaveMassGroup?Object(i.jsxs)(d.a,{style:{padding:7},children:[Object(i.jsx)(f.a,{span:4}),Object(i.jsxs)(f.a,{span:16,style:{display:"flex"},children:[Object(i.jsx)(k,{store:t.MassGroupNameVM}),Object(i.jsx)(I.a,{type:"primary",size:"small",style:{marginLeft:10},onClick:t.MassGroupInputOK,children:"ok"}),Object(i.jsx)(I.a,{type:"default",size:"small",onClick:t.MassGroupInputCancel,children:"cancel"})]})]}):"",Object(i.jsxs)("table",{className:"table table-bordered table-sm",children:[Object(i.jsx)("thead",{className:"thead-light",children:Object(i.jsxs)("tr",{children:[Object(i.jsx)("th",{scope:"col",children:Object(i.jsx)(I.a,{onClick:t.AddMainRow,type:"primary",size:"small",style:{backgroundColor:"#52c41a",border:"none"},children:"+"})}),s]})}),Object(i.jsx)("tbody",{children:r})]})]}):""})}}]),n}(s.Component)),Sr=Object(l.a)(Vr),Dr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new qn,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Th\xf4ng tin kh\u1ed1i l\u01b0\u1ee3ng"})}),t.IsShowProjectSelect?Object(i.jsx)(Ht,{store:t.ProjectSelectVM}):"",t.CanHavePhase?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)(Mi,{store:t.IsShowPhaseSelectVM})}),t.IsHavePhase?Object(i.jsx)(Ht,{store:t.PhaseSelectVM}):""]}):"",Object(i.jsx)("div",{style:{marginTop:8},children:Object(i.jsx)(ne,{store:t.MassGroupSettingSelectVM})}),Object(i.jsx)(I.a,{style:{marginTop:8},onClick:t.GetMassData,size:"middle",type:"primary",children:"GET DATA"}),Object(i.jsx)("div",{style:{marginTop:15},children:t.IsDataPending?Object(i.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(i.jsxs)("div",{children:[Object(i.jsx)(Mr.a,{}),Object(i.jsx)(rt,{store:t.LoadingSpinTipVM})]})}):Object(i.jsx)(Sr,{store:t.MassItem_Dict.MassTable})})]})}}]),n}(s.Component)),Cr=Object(l.a)(Dr),wr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n),(i=e.call(this,t)).onValueChange=function(t){i.state.SelectedIndex=t};var s=i.props.store;return i.state=s||new fi,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Columns,n=t.Rows,s="";if(e&&n){var r=Object(i.jsx)("thead",{className:"thead-light",children:Object(i.jsx)("tr",{children:e.map((function(t){return Object(i.jsx)("th",{scope:"col",children:t.Title},t.Key)}))})}),a=Object(i.jsx)("tbody",{children:n.map((function(t){return Object(i.jsx)("tr",{children:t.Cells.map((function(t){return Object(i.jsx)("td",{children:t.Render()},t.Key)}))},t.Key)}))});s=Object(i.jsxs)("table",{className:"table table-sm",children:[r,a]})}return Object(i.jsx)(i.Fragment,{children:s})}}]),n}(s.Component)),xr=Object(l.a)(wr),Fr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new vi,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Thi\u1ebft l\u1eadp xu\u1ea5t h\u1ea1ng m\u1ee5c"})}),Object(i.jsx)(xr,{store:t.TableVM})]})}}]),n}(s.Component)),Tr=(Object(l.a)(Fr),function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var t=this.pmDataVM;return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)(d.a,{gutter:15,style:{padding:15},children:[Object(i.jsx)(f.a,{span:3}),Object(i.jsxs)(f.a,{span:5,children:[Object(i.jsx)(rr,{store:t.Workpackage_DictVM}),Object(i.jsx)(dr,{store:t.ElementFilterSetting_DictVM}),Object(i.jsx)(br,{store:t.MassExportSetting_DictVM})]}),Object(i.jsx)(f.a,{span:13,children:Object(i.jsx)(Cr,{store:t.MassResultCompVM})}),Object(i.jsx)(f.a,{span:3})]})})}},{key:"pmDataVM",get:function(){return wi.Instance}}]),n}(s.Component)),Gr=Object(l.a)(Tr),Nr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(Gr,{})})}}]),n}(s.Component),_r=Object(l.a)(Nr),Rr=n(84),Er=n(25),Lr=function(){function t(){var e=this;Object(o.a)(this,t),this.valueString=void 0,this.GetValueString=function(){return e.OnGetValueString()},Object(v.k)(this,{valueString:v.l})}return Object(c.a)(t,[{key:"Value",get:function(){return this.value},set:function(t){this.value=t,this.ValueString=this.GetValueString()}},{key:"ValueString",get:function(){return this.valueString||(this.valueString=this.GetValueString()),this.valueString},set:function(t){this.valueString=t}}]),t}(),Ar=function t(){Object(o.a)(this,t),this.Cells=[]},Pr=function t(){Object(o.a)(this,t),this.Cells=[]},Wr=function(t){var e=t.Items;if(!e||0===e.length)return[];switch(e[0].MassType){case A:return[K,z,U,B];case E:case L:return[q,U,B];default:return[U,B]}return[]},Hr=function(t){return t.Fields.map((function(t){var e=new Ar;return e.Name=t,e}))},Ur=function(){function t(){var e=this;Object(o.a)(this,t),this.items=void 0,this.IsValidTable=!1,this.fields=void 0,this.columns=void 0,this.rows=void 0,this.GetRows=function(){var t=e.Items;if(!t)return[];var n=e.Fields;return t.map((function(t){var e=new Pr;return e.Cells=n.map((function(e){var n=new Lr;n.OnGetValueString=function(){var t=n.Value;return isNaN(t)?t:parseFloat(t).toFixed(2)};var i=function(){return n.Value=Z(t.GetValue(e),e)};[q].includes(e)&&!t.Element?t.OnGetElementDone_Funcs.push((function(){i()})):i();var s="text-center";switch(e){case U:s="text-right"}return n.className=s,n})),e}))},Object(v.k)(this,{items:v.l,rows:v.l})}return Object(c.a)(t,[{key:"Items",get:function(){return this.items},set:function(t){this.items=t,t&&0!==t.length?this.IsValidTable=!0:this.IsValidTable=!1,this.Fields=Wr(this),this.Rows=this.GetRows()}},{key:"Fields",get:function(){return this.fields||(this.fields=Wr(this)),this.fields},set:function(t){this.fields=t,this.Columns=Hr(this)}},{key:"Columns",get:function(){return this.columns||(this.columns=Hr(this)),this.columns},set:function(t){this.columns=t}},{key:"Rows",get:function(){return this.rows||(this.rows=this.GetRows()),this.rows},set:function(t){this.rows=t}}]),t}(),Br=function(){function t(){Object(o.a)(this,t),this.items=void 0,Object(v.k)(this,{items:v.l})}return Object(c.a)(t,[{key:"id",get:function(){return this._id},set:function(t){var e=this;this._id=t,qi(t,(function(t){e.Items=t}))}},{key:"Items",get:function(){return this.items},set:function(t){this.items=t,this.DetailTable.Items=t}},{key:"DetailTable",get:function(){return this.detailTable||(this.detailTable=new Ur),this.detailTable}}]),t}(),Kr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ur,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Columns.map((function(t,e){return Object(i.jsx)("th",{scope:"col",className:"text-center",children:t.Name},e)})),n=t.Rows.map((function(t,e){var n=t.Cells.map((function(t,e){return Object(i.jsx)("td",{className:t.className,children:t.ValueString},e)}));return Object(i.jsx)("tr",{children:n},e)}));return Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("table",{className:"table table-bordered table-sm",children:[Object(i.jsx)("thead",{className:"thead-light",children:Object(i.jsx)("tr",{children:e})}),Object(i.jsx)("tbody",{children:n})]})})}}]),n}(s.Component),zr=Object(l.a)(Kr),qr=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Br,i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.state,e=this.props.match.params.id;t.id=e}},{key:"render",value:function(){var t=this.state;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)(d.a,{gutter:10,style:{padding:15},children:Object(i.jsxs)(f.a,{span:8,children:[Object(i.jsx)("h4",{className:"text-center",children:"B\u1ea2NG CHI TI\u1ebeT KH\u1ed0I L\u01af\u1ee2NG"}),Object(i.jsx)("div",{children:Object(i.jsx)(zr,{store:t.DetailTable})})]})})})}}]),n}(s.Component),Jr=Object(Er.f)(Object(l.a)(qr)),Qr=function(){return wi.Instance},Xr=function(){function t(){Object(o.a)(this,t),this.projectVM=void 0,Object(v.k)(this,{projectVM:v.l})}return Object(c.a)(t,[{key:"id",get:function(){return this._id},set:function(t){var e=this;this._id=t,function(t,e){if(t){var n="https://api.bimdev.vn/api/hbp/get?id=".concat(t);N(n).then((function(t){return t.data})).then((function(t){var n=ds(t);e&&e(n)}))}}(t,(function(t){e.ProjectVM=Un(t)}))}},{key:"ProjectVM",get:function(){return this.projectVM},set:function(t){this.projectVM=t;var e=[t];Qr().Project_DictVM.Items=e,zs.Instance.Phase_Dict=t.ModelItem.Phase_Dict;var n=this.MassResultCompVM;n.ProjectVMStorageList=e,n.ProjectSelectVM.InitialItems=e;var i=function(){return n.PhaseVMStorageList=s.Items},s=t.Phase_DictVM;s.Items?i():s.OnGetItemsDone_Funcs.push((function(){i()}))}},{key:"MassResultCompVM",get:function(){if(!this.massResultCompVM){var t=this.massResultCompVM=function(t){var e=Qn(new Ji,!1);return e.IsShowProjectSelect=!1,e.CanHavePhase=!0,e}();Qr().MassResultCompVM=t}return this.massResultCompVM}}]),t}(),Yr=n(285),Zr=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Ln,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state,e=t.Input,n=t.State;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"Phi\xean b\u1ea3n kh\u1ed1i l\u01b0\u1ee3ng"})}),Object(i.jsxs)("div",{children:[Object(i.jsxs)(I.a,{type:"primary",size:"middle",onClick:t.AddVersion,disabled:n===En,children:[Object(i.jsx)(Yr.a,{})," L\u01afU K\u1ebeT QU\u1ea2 HI\u1ec6N T\u1ea0I"]}),n===En?Object(i.jsxs)("div",{className:"mt-3",children:[Object(i.jsx)(k,{store:e.NameVM}),Object(i.jsx)(k,{store:e.DescriptionVM}),Object(i.jsxs)("div",{className:"mt-2",children:[Object(i.jsx)(I.a,{type:"primary",size:"small",onClick:t.OK,children:"OK"}),Object(i.jsx)(I.a,{type:"default",size:"small",onClick:t.Cancel,children:"Cancel"})]})]}):""]})]})}}]),n}(s.Component)),$r=Object(l.a)(Zr),ta=(p.a.Option,function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Yi,i}return Object(c.a)(n,[{key:"render",value:function(){var t=this.state;return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(m.a,{orientation:"left",plain:!0,children:Object(i.jsx)("b",{children:"D\u1eef li\u1ec7u th\xe9p"})}),Object(i.jsx)(xr,{store:t.TableVM})]})}}]),n}(s.Component)),ea=Object(l.a)(ta),na=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(t){var i;Object(o.a)(this,n);var s=(i=e.call(this,t)).props.store;return i.state=s||new Xr,i}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var t=this.state,e=this.props.match.params.id;t.id=e}},{key:"render",value:function(){var t=this.state,e=t.ProjectVM;return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("div",{style:{padding:15},children:Object(i.jsxs)(d.a,{gutter:10,children:[Object(i.jsx)(f.a,{span:5}),Object(i.jsx)(f.a,{span:14,children:e?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("h4",{className:"text-center",children:["D\u1ef1 \xe1n ",e.Name]}),Object(i.jsx)($r,{store:e.Phase_DictVM}),Object(i.jsx)(Cr,{store:t.MassResultCompVM}),Object(i.jsx)(ea,{store:e.RebarMass_Dict})]}):""}),Object(i.jsx)(f.a,{span:5})]})})})}}]),n}(s.Component),ia=Object(Er.f)(Object(l.a)(na)),sa=function(t){Object(u.a)(n,t);var e=Object(h.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(i.jsx)(Rr.a,{basename:"/BIM_Database",children:Object(i.jsxs)(Er.c,{children:[Object(i.jsx)(Er.a,{exact:!0,path:"/",component:_r}),Object(i.jsx)(Er.a,{exact:!0,path:"/massdetail/:id",component:Jr}),Object(i.jsx)(Er.a,{path:"/project/:id",component:ia})]})})}}]),n}(s.Component),ra=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,286)).then((function(e){var n=e.getCLS,i=e.getFID,s=e.getFCP,r=e.getLCP,a=e.getTTFB;n(t),i(t),s(t),r(t),a(t)}))};a.a.render(Object(i.jsx)(sa,{}),document.getElementById("root")),ra()}},[[271,1,2]]]);
//# sourceMappingURL=main.7e5999d5.chunk.js.map